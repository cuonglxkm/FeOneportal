<page-header [breadcrumb]="breadcrumb" [title]="'Khởi tạo kafka'">
  <!-- breadcrumb -->
  <ng-template #breadcrumb>
    <nz-breadcrumb>
      <nz-breadcrumb-item>
        <a [routerLink]="['/']">Trang chủ</a>
      </nz-breadcrumb-item>
      <nz-breadcrumb-item>
        <a [routerLink]="['/app-kafka']">Danh sách kafka</a>
      </nz-breadcrumb-item>
      <nz-breadcrumb-item>Khởi tạo kafka</nz-breadcrumb-item>
    </nz-breadcrumb>
  </ng-template>

  <!-- action -->

</page-header>

<div nz-row [nzGutter]="16">
  <div nz-col [nzSpan]="16" class="gutter-row">
    <form nz-form [formGroup]="myform" nzLayout="horizontal" nzLabelAlign="left">
      <nz-card class="border-card">
        <h3><b>Thông tin chung</b></h3>
        <span nz-typography nzType="secondary">Vui lòng hoàn thiện đầy đủ các thông tin vào form bên dưới. <br>
          Các trường thông tin có dấu <span nz-typography nzType="danger">(*)</span> là các thông tin bắt buộc phải
          nhập</span>
        <nz-form-item class="mt-4">
          <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired>Tên dịch vụ</nz-form-label>
          <nz-form-control [nzErrorTip]="kafkaErrorTpl">
            <nz-input-group nzAddOnBefore="Kafka-" style="width: 100%;">
              <input nz-input type="text" placeholder="Nhập tên kafka" formControlName="kafkaName" id="kafkaName"
                autofocus />
            </nz-input-group>
          </nz-form-control>
          <ng-template #kafkaErrorTpl let-control>
            <ng-container *ngIf="control.hasError('required')">
              <div>Tên kafka không để trống</div>
            </ng-container>
            <ng-container *ngIf="control.hasError('minlength') || control.hasError('maxlength')">
              <div>Tên kafka trong khoảng từ 5-50 ký tự</div>
            </ng-container>
            <ng-container *ngIf="control.hasError('pattern')">
              <div>Tên kafka chỉ bao gồm các chữ thường, chữ hoa, số và các ký tự _-</div>
            </ng-container>
          </ng-template>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired>Version</nz-form-label>
          <nz-form-control [nzErrorTip]="">
            <nz-select formControlName="version">
              <nz-option nzValue="2.0.0" nzLabel="2.0.0"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label [nzSm]="6" [nzXs]="24" nzRequired>Khu vực mong muốn</nz-form-label>
          <nz-form-control [nzErrorTip]="">
            <nz-select formControlName="region">
              <nz-option nzValue="TT" nzLabel="Khu vực Tân Thuận"></nz-option>
              <nz-option nzValue="NTL" nzLabel="Khu vực Nam Thăng Long"></nz-option>
            </nz-select>
          </nz-form-control>
        </nz-form-item>

        <h3 class="mt-5"><b>Các gói dịch vụ</b></h3>
        <nz-tabset nzCentered nzSize="large">
          <nz-tab nzTitle="Gói cấu hình sẵn"  (nzClick)="clicktab()">
            <ng-template nz-tab>
              <ngu-carousel #myCarousel [inputs]="carouselConfig" [dataSource]="carouselItems">
                <div style="justify-items: center ; align-items: center;" *nguCarouselDef="let item;" class="item">
                  <div class="tile" [ngClass]="{ 'choose': item==chooseitem}" (click)="handlechoose(item)">
                    <div class="item-header">
                      <div class="item-name">
                        <span>SMC{{item}}</span>
                        <div class="item-price">
                          <div class="price" style="margin-right: 23%">
                            <span>360.172</span><br>
                            <span class="dvt">đ/tháng</span>
                          </div>
                          <div class="price">
                            <span>418</span><br>
                            <span class="dvt">đ/tháng</span>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="item-body">
                      <div style="padding: 10px;">
                        2 VCPU / 2GB RAM / 2GB HDD / 1 IP
                      </div>
                    </div>
                  </div>
                </div>
                <ul class="myPoint" NguCarouselPoint>
                  <li *ngFor="let j of myCarousel.pointNumbers; let i = index"
                    [class.active]="j==myCarousel.activePoint" (click)="myCarousel.moveTo(j)"></li>
                </ul>
              </ngu-carousel>
            </ng-template>
          </nz-tab>
          <nz-tab nzTitle="Cấu hình tùy chọn">
            <ng-template nz-tab></ng-template>
          </nz-tab>
        </nz-tabset>
      </nz-card>

    </form>
  </div>

  <!-- payment -->
  <div nz-col [nzSpan]="8" class="gutter-row">
    <nz-card>
      <h3>Thành tiền</h3>
      <div nz-row [nzGutter]="8">
        <div nz-col [nzSpan]="12">
          <div class="ml-3">Tên kafka</div>
        </div>
        <div nz-col [nzSpan]="12">
          <div class="price-style mr-3" *ngIf="kafkaName">Kafka-{{kafkaName}}</div>
        </div>
      </div>

      <div nz-row [nzGutter]="8">
        <div nz-col [nzSpan]="12">
          <div class="mt-3 ml-3">Phiên bản Kafka</div>
        </div>
        <div nz-col [nzSpan]="12">
          <div class="price-style mt-3 mr-3">{{kafkaVersion}}</div>
        </div>
      </div>

      <div nz-row [nzGutter]="8">
        <div nz-col [nzSpan]="12">
          <div class="mt-3 ml-3">Khu vực</div>
        </div>
        <div nz-col [nzSpan]="12">
          <div class="price-style mt-3 mr-3">local</div>
        </div>
      </div>

      <nz-divider class="divider-style"></nz-divider>
      <h3>Cấu hình nâng cao</h3>

      <div class="scroll">
        <ng-container *ngFor="let control of listFormWorkerGroup.controls; let i = index;">
          <div nz-row [nzGutter]="8">
            <div nz-col [nzSpan]="12">
              <div class="ml-3">Tên nhóm worker</div>
            </div>
            <div nz-col [nzSpan]="12">
              <div class="price-style mt-3 mr-3">{{control.get('workerGroupName').value}}</div>
            </div>
          </div>

          <div nz-row [nzGutter]="8">
            <div nz-col [nzSpan]="12">
              <div class="mt-3 ml-3">Số node</div>
            </div>
            <div nz-col [nzSpan]="12">
              <div class="price-style mt-3 mr-3">{{control.get('nodeNumber').value}}</div>
            </div>
          </div>

          <ng-container *ngIf="isAutoScaleEnable">
            <div nz-row [nzGutter]="8">
              <div nz-col [nzSpan]="12">
                <div class="mt-3 ml-3">Số node tối thiểu</div>
              </div>
              <div nz-col [nzSpan]="12">
                <div class="price-style mt-3 mr-3">{{control.get('minimumNode').value}}</div>
              </div>
            </div>
            <div nz-row [nzGutter]="8">
              <div nz-col [nzSpan]="12">
                <div class="mt-3 ml-3">Số node tối đa</div>
              </div>
              <div nz-col [nzSpan]="12">
                <div class="price-style mt-3 mr-3">{{control.get('maximumNode').value}}</div>
              </div>
            </div>
          </ng-container>

          <div nz-row [nzGutter]="8">
            <div nz-col [nzSpan]="12">
              <div class="mt-3 ml-3">Cấu hình</div>
            </div>
            <div nz-col [nzSpan]="12">
              <div class="price-style mt-3 mr-3">{{control.get('configType').value}}</div>
            </div>
          </div>

          <div nz-row [nzGutter]="8">
            <div nz-col [nzSpan]="12">
              <div class="mt-3 ml-3">Ổ cứng (GB)</div>
            </div>
            <div nz-col [nzSpan]="12">
              <div class="price-style mt-3 mr-3">{{control.get('volumeStorage').value}}</div>
            </div>
          </div>


          <nz-divider [nzDashed]="true"></nz-divider>
        </ng-container>
      </div>

      <div nz-row [nzGutter]="8" class="mt-5 price-panel">
        <div nz-col [nzSpan]="12">
          <div class="mt-3 ml-3">Thành tiền</div>
          <div class="mt-1 ml-3 mb-3 unit-color"><i>(Đã bao gồm 10% VAT)</i></div>
        </div>
        <div nz-col [nzSpan]="12">
          <div class="price-style total-color mt-3 mr-3">2.500.000 VNĐ</div>
          <div class="price-style unit-color mr-3">VNĐ/tháng</div>
        </div>
      </div>

      <div nz-row class="mt-5" [nzGutter]="16" nzJustify="center">
        <div nz-col [nzSpan]="12">
          <button nz-button nzType="default" nzBlock class="border-button" (click)="onCancelCreate()">
            <span nz-icon nzType="close" nzTheme="outline"></span>
            Hủy
          </button>
        </div>

        <div nz-col [nzSpan]="12">
          <button nz-button nzType="primary" nzBlock class="border-button" (click)="onSubmitPayment()"
            [disabled]="myform.invalid">
            <span nz-icon>
              <svg viewBox="64 64 896 896" focusable="false">
                <path
                  d="M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-32 464H528V448h320v128zm-268-64a40 40 0 1080 0 40 40 0 10-80 0z" />
              </svg>
            </span>
            Thanh toán
          </button>
        </div>
      </div>
    </nz-card>

    <!-- payment -->
    <!-- <nz-card class="border-card ">
      <h3>Thành tiền</h3>
      <div nz-row [nzGutter]="8">
        <div nz-col [nzSpan]="12">
          <div class="mt-3 ml-3">Chi phí máy ảo:</div>
        </div>

        <div nz-col [nzSpan]="12">
          <div class="price-style price-color mt-3 mr-3">1.000.000 VNĐ</div>
          <div class="price-style unit-color mr-3">VNĐ/tháng</div>
        </div>
      </div>

      <nz-divider class="divider-style"></nz-divider>

      <div nz-row [nzGutter]="8">
        <div nz-col [nzSpan]="12">
          <div class="mt-3 ml-3">Chi phí Volume bổ sung:</div>
        </div>

        <div nz-col [nzSpan]="12">
          <div class="price-style price-color mt-3 mr-3">1.000.000 VNĐ</div>
          <div class="price-style unit-color mr-3">VNĐ/tháng</div>
        </div>
      </div>
    </nz-card> -->
  </div>
</div>