<nz-content>
    <div class="breadcrumb">
        <nz-breadcrumb vSeparator=">>">
            <nz-breadcrumb-item>
                Topic
            </nz-breadcrumb-item>
            <nz-breadcrumb-item>
                <a (click)="handleCancel()">Danh sách Topic</a>
            </nz-breadcrumb-item>
            <nz-breadcrumb-item *ngIf="control==createNum">
                Tạo mới Topic
            </nz-breadcrumb-item>
        </nz-breadcrumb>
    </div>
    <div class="inner-content">
        <div *ngIf="control == listNum">
            <div class="filter" nz-row>
                <div nz-col nzSpan="16">
                    <nz-input-group nz-col [nzPrefix]="prefixTemplateUser" class="search">
                        <input type="text" nz-input placeholder="Tìm kiếm" />
                    </nz-input-group>
                    <ng-template #prefixTemplateUser><span nz-icon nzType="search"
                            nzTheme="outline"></span></ng-template>
                </div>
                <div nz-col nzSpan="6">
                    <button nz-button nzType="primary" class="btn-search" (click)="openCreateForm()">
                        <span nz-icon nzType="plus" style="color: #fff;" nzTheme="outline"></span>
                        Tạo mới
                    </button>

                    <button nz-button btn-default nzType="primary" nzDanger>Test Producer</button>
                </div>
            </div>
            <nz-table [nzData]="listTopic" #basicTable nzShowPagination class="tbl-acl">
                <thead class="table-info">
                    <tr>
                        <th [nzAlign]="'center'" nzWidth="4%">STT</th>
                        <th>Tên Topic</th>
                        <th nzWidth="8%">Partitions</th>
                        <th nzWidth="8%">Replicas</th>
                        <th nzWidth="20%">Tổng số lượng message</th>
                        <th nzWidth="8%">Size</th>
                        <th nzWidth="15%">Out of sync replicas</th>
                        <th nzWidth="8%" [nzAlign]="'center'">Thao tác</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of basicTable.data; let i = index">
                        <td [nzAlign]="'center'">{{ i+1 }}</td>
                        <td><a (click)="detailTopic(data.topicName)">{{ data.topicName }}</a></td>
                        <td>{{ data.partitions }}</td>
                        <td>{{ data.replicas }}</td>
                        <td>{{ data.sumMessage }}</td>
                        <td>{{ data.sizeTopic }}</td>
                        <td>{{ data.outOfSync != null ? data.outOfSync : 0 }}</td>
                        <td [nzAlign]="'center'">
                            <a nz-dropdown [nzDropdownMenu]="menu">
                                <span nz-icon nzType="more" nzTheme="outline"></span>
                            </a>
                            <nz-dropdown-menu #menu="nzDropdownMenu">
                                <ul nz-menu vSelectable>
                                    <li nz-menu-item>
                                        <button nz-button nzType="text" (click)="showTopicInfo(data)">
                                            <span nz-icon nzType="info-circle" nzTheme="outline"></span> Thông tin
                                        </button>
                                    </li>
                                    <li nz-menu-item>
                                        <button nz-button nzType="text" (click)="detailTopic(data.topicName)">
                                            <span nz-icon nzType="eye" nzTheme="outline"></span> Chi tiết
                                        </button>
                                    </li>
                                    <li nz-menu-item>
                                        <button nz-button nzType="text">
                                            <span nz-icon nzType="delete-row" nzTheme="outline"></span> Xóa message
                                        </button>
                                    </li>
                                    <li nz-menu-item>
                                        <button nz-button nzType="text"  (click)="updateTopicForm(data)">
                                            <span nz-icon nzType="edit" nzTheme="outline"></span> Cập nhật
                                        </button>
                                    </li>
                                    <li nz-menu-item>
                                        <button nz-button nzType="text">
                                            <span nz-icon nzType="delete" nzTheme="outline"></span> Xoá
                                        </button>
                                    </li>
                                </ul>
                            </nz-dropdown-menu>
                        </td>
                    </tr>
                </tbody>
            </nz-table>
        </div>
        <div *ngIf="control == createNum || control == editNum">  
            <one-portal-create-topic [data]="selectedTopic" [mode]="control" (cancelEvent)="handleCancel()"></one-portal-create-topic>
        </div>
        <div *ngIf="control == detailNum">  
            <one-portal-message-topic [serviceOrderCode]="serviceOrderCode" [topicName]="topicDetail" (cancelEvent)="handleCancel()"></one-portal-message-topic>
        </div>
    </div>
</nz-content>
<nz-drawer [nzClosable]="true" [nzWidth]="580" (nzOnClose)="closeTopicInfo()" [nzVisible]="visibleConfigInfo" vPlacement="right">
    <ng-container *nzDrawerContent>
        <nz-descriptions nzTitle="Thông tin cấu hình" nzBordered>
            <nz-descriptions-item [nzSpan]="3" *ngFor="let item of configInfo | keyvalue"
                [nzTitle]="item.key">{{item.value}}</nz-descriptions-item>
        </nz-descriptions>
    </ng-container>
</nz-drawer>