<page-header [breadcrumb]="breadcrumb" [action]="action" [extra]="extra" [title]="title" [content]="content">
  <ng-template #breadcrumb>
    <nz-breadcrumb [nzSeparator]="separatorTemplate">
      <nz-breadcrumb-item>Trang chủ</nz-breadcrumb-item>
      <nz-breadcrumb-item>
        Dịch vụ hạ tầng
      </nz-breadcrumb-item>
      <nz-breadcrumb-item>
        Block Storage
      </nz-breadcrumb-item>
      <nz-breadcrumb-item>
        <a routerLink="/app-smart-cloud/snapshot/packages">Gói Snapshot</a>
      </nz-breadcrumb-item>
      <nz-breadcrumb-item>
        <a routerLink="/app-smart-cloud/snapshot/packages/detail/{{idPackageBackup}}">Thông tin gói Snapshot</a>
      </nz-breadcrumb-item>
    </nz-breadcrumb>
    <ng-template #separatorTemplate
      ><img src="assets/imgs/arrow-square-right.svg" alt="" />
    </ng-template>
  </ng-template>
  <ng-template #action>
    <div class="alain-custom-action text-right">
      <share-users-combobox></share-users-combobox>
      <region-select-dropdown (regionChange)="onRegionChanged($event)" (valueChanged)="regionChanged($event)"></region-select-dropdown>
      <project-select-dropdown #projectCombobox (valueChanged)="projectChanged($event)"
                               [regionId]="region"></project-select-dropdown>
    </div>
  </ng-template>
  <ng-template #title>
    <div nz-row nzJustify="space-between">
      <nz-row>
        <nz-col>
          <div>Chi tiết gói Snapshot</div>
        </nz-col>
      </nz-row>
      </div>
  </ng-template>
  <ng-template #content>
    <h3 style="display: none;">.</h3>
  </ng-template>
  <ng-template #extra>
    <button nz-button nzType="primary" (click)="navigateToExtend()" nzSize="large">
      <img style="padding-right: 10px;" src="assets/imgs/extend.png" alt="" />
      <span class="button-text-primary">Gia hạn</span>
    </button>
    <button *ngIf="packageSnapshotModel.suspendType == null || packageSnapshotModel.suspendType === ''" nz-button nzType="primary" (click)="navigateToEdit()" nzSize="large">
      <img style="padding-right: 10px;" src="assets/imgs/edit-1.svg" alt="" />
      <span class="button-text-primary">Điều chỉnh</span>
    </button>
  </ng-template>
</page-header>
<nz-content>
  <form nz-form nzLayout="vertical">
    <nz-card>
      <div class="text-card-header">Thông tin của gói Snapshot</div>
      <div class="customRow" style="margin-top: 15px;">
        <nz-row>
          <nz-col nzSpan="12">
            <nz-row style="padding: 12px 0 12px 0">
              <span class="text-label customSpan" style="width: 35%">Tên gói Snapshot:</span>
              <span class="text-value-detail customSpan">{{packageSnapshotModel.packageName}}</span>
            </nz-row>
          </nz-col>
          <nz-col nzSpan="12">
            <nz-row style="padding: 12px 0 12px 0">
              <span class="text-label customSpan" style="width: 35%">Trạng thái:</span>
              <ng-container *ngIf="packageSnapshotModel.status | ServiceStatusPipe as statusModel">
                <span nzBreakWord  [ngStyle]="{ color: statusModel.color }" class="text-value-detail customSpan">{{statusModel.status}}</span>
                <!--                <td >{{  }}</td>-->
              </ng-container>
            </nz-row>
          </nz-col>
        </nz-row>
        <nz-row style="background-color: #e2e2e9">
          <nz-col nzSpan="12">
            <nz-row style="padding: 12px 0 12px 0">
              <span class="text-label customSpan" style="width: 35%">Ngày khởi tạo:</span>
              <span class="text-value-detail customSpan">{{packageSnapshotModel?.creationDate | date: 'HH:mm:ss dd/MM/yyyy'}}</span>
            </nz-row>
          </nz-col>
          <nz-col nzSpan="12">
            <nz-row style="padding: 12px 0 12px 0">
              <span class="text-label customSpan" style="width: 35%">Ngày hết hạn:</span>
              <span class="text-value-detail customSpan">{{packageSnapshotModel?.expirationDate | date: 'HH:mm:ss dd/MM/yyyy'}}</span>
            </nz-row>
          </nz-col>
        </nz-row>
      </div>

      <nz-form-item>
        <nz-form-label>
          <span>{{ 'app.service.description' | i18n }}</span>
        </nz-form-label>
        <nz-form-control nzDisableAutoTips [nzErrorTip]="descriptionErrorTpl">
              <textarea nz-input class="input-custom" formControlName="description" [maxLength]="255"
                        [nzAutosize]="{ minRows: 3, maxRows: 5 }"></textarea>
          <ng-template #descriptionErrorTpl let-control>
            <ng-container *ngIf="control.hasError('maxlength')">{{ 'app.description.maxLength.255' | i18n }}</ng-container>
          </ng-template>
        </nz-form-control>
      </nz-form-item>
    </nz-card>
    <nz-card>
      <div class="text-card-header" style="margin-bottom: 10px">Thông tin tài nguyên</div>
      <nz-table nzData="null" nzHideOnSinglePage='true'>
        <thead>
        <tr>
          <th>Tên tài nguyên</th>
          <th>Tổng hạn mức</th>
          <th>Đã dùng</th>
          <th>Còn lại</th>
        </tr>
        </thead>
        <tbody>
        <tr>
          <td>Dung lượng HDD (GB)</td>
          <td class="text-right">{{ packageSnapshotModel.totalSizeHDD }}</td>
          <td class="text-right">{{ packageSnapshotModel.usedSizeHDD }}</td>
          <td class="text-right">{{ packageSnapshotModel.availableSizeHDD }}</td>
        </tr>
        <tr>
          <td>Dung lượng SSD (GB)</td>
          <td class="text-right">{{ packageSnapshotModel.totalSizeSSD }}</td>
          <td class="text-right">{{ packageSnapshotModel.usedSizeSSD }}</td>
          <td class="text-right">{{ packageSnapshotModel.availableSizeSSD }}</td>
        </tr>
        </tbody>
      </nz-table>
    </nz-card>
  </form>
</nz-content>
