<page-header [breadcrumb]="breadcrumb" [title]="'Quản lý Bucket'">
  <ng-template #breadcrumb>
    <nz-breadcrumb>
      <nz-breadcrumb-item
        ><a [routerLink]="['/']">Trang chủ</a></nz-breadcrumb-item
      >
      <nz-breadcrumb-item> Bucket </nz-breadcrumb-item>
    </nz-breadcrumb>
  </ng-template>
</page-header>
<nz-card style="border-radius: 4px" [nzBordered]="false">
  <nz-row style="margin-bottom: 20px" nzGutter="24">
    <div
      nz-col
      [nzLg]="12"
      [nzMd]="12"
      [nzSm]="24"
      [nzXl]="12"
      [nzXs]="24"
      [nzXXl]="12"
    >
      <span class="text-card-header">Thông tin Object Storage</span>
    </div>
    <div
      class="text-right p-0 m-b-0"
      nz-col
      [nzLg]="12"
      [nzMd]="12"
      [nzSm]="24"
      [nzXl]="12"
      [nzXs]="24"
      [nzXXl]="12"
    >
      <button nz-button nzType="primary" (click)="extendObjectStorage()">
        <img
          style="padding-right: 10px; margin-top: -4px"
          src="assets/imgs/add-circle.svg"
          alt=""
        />
        Gia hạn
      </button>
      <button nz-button nzType="primary" nz-dropdown [nzDropdownMenu]="opMenu">
        <img src="assets/imgs/dots.svg" alt="" />
        <nz-dropdown-menu #opMenu="nzDropdownMenu">
          <ul nz-menu>
            <li nz-menu-item (click)="updateObjectStorage()">Điều chỉnh</li>
            <li nz-menu-item (click)="deleteObjectStorage()">Xóa</li>
          </ul>
        </nz-dropdown-menu>
      </button>
    </div>
  </nz-row>
  <div style="margin-bottom: 10px" class="text-label">Dung lượng đã dùng:</div>
  <div style="margin-bottom: 10px" class="text-label">Ngày khởi tạo:</div>
  <div style="margin-bottom: 10px" class="text-label">Ngày hết hạn:</div>
</nz-card>
<nz-card style="border-radius: 4px" [nzBordered]="false">
  <div nz-row [nzGutter]="24">
    <div
      nz-col
      [nzLg]="8"
      [nzMd]="8"
      [nzSm]="24"
      [nzXl]="8"
      [nzXs]="24"
      [nzXXl]="8"
    >
      <span class="text-card-header">Danh sách Bucket</span>
    </div>
    <div
      class="text-right p-0 m-b-0"
      nz-col
      [nzLg]="16"
      [nzMd]="16"
      [nzSm]="24"
      [nzXl]="16"
      [nzXs]="24"
      [nzXXl]="16"
    >
      <nz-input-group
        style="margin-right: 8px; width: 38%; border-radius: 8px"
        [nzPrefix]="prefixIconSearch"
        nzSize="large"
      >
        <input
          name="name"
          nz-input
          placeholder="Tìm kiếm theo tên"
          [(ngModel)]="searchParam"
        />
      </nz-input-group>
      <ng-template #prefixIconSearch>
        <img
          src="assets/imgs/search.svg"
          alt=""
          style="cursor: pointer"
          nz-tooltip="Tìm kiếm"
          (click)="search()"
        />
      </ng-template>
      <button nz-button nzType="primary" (click)="createBucket()">
        <img
          style="padding-right: 10px; margin-top: -4px"
          src="assets/imgs/add-circle.svg"
          alt=""
        />
        Tạo mới Bucket
      </button>
    </div>
  </div>
  <nz-table
    style="margin-top: 10px"
    #rowSelectionTable
    nzShowSizeChanger
    [nzScroll]="{ x: '100%', y: '250px' }"
    [nzFrontPagination]="false"
    [nzData]="listBucket"
    (nzPageSizeChange)="search()"
    [nzLoading]="loading"
  >
    <thead>
      <tr>
        <th nzLeft>Tên Bucket</th>
        <th>URL</th>
        <th>Quyền truy cập</th>
        <th>Versioning</th>
        <th>Ngày khởi tạo</th>
        <th>Trạng thái</th>
        <th nzRight>Thao tác</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of listBucket">
        <td nzLeft>
          <a
            nz-tooltip
            nzTooltipTitle="Xem chi tiết"
            nzTooltipPlacement="bottom"
            [routerLink]="
              '/app-smart-cloud/instances/instances-detail/' + data.id
            "
            >{{ data.name }}</a
          >
        </td>
        <td nzBreakWord>
          {{ data.flavorName }}
          <!-- flavorId với flavorCloudId(mã dưới hệ thống openstack) ạ -->
        </td>
        <td nzBreakWord>
          <div style="color: #0066b3">
            {{ getStatus(data.status) }}
          </div>
        </td>
        <td nzBreakWord>{{ data.taskState }}</td>
        <td nzBreakWord>{{ data.ipPrivate }}</td>
        <td nzBreakWord>{{ data.ipPublic }}</td>
        <td nzRight>
          <img
            src="assets/imgs/uil_setting.svg"
            alt=""
            (click)="configure(data.id)"
            style="cursor: pointer; margin-right: 16px"
            nz-tooltip="Cấu hình"
          />
          <img
            src="assets/imgs/trash.svg"
            alt=""
            (click)="showModalDelete(data.id)"
            style="cursor: pointer; margin-right: 16px"
            nz-tooltip="Xóa"
          />
        </td>
      </tr>
    </tbody>
  </nz-table>
</nz-card>
