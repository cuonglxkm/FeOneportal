<!--Head section-->
<!-- <app-page-header [pageHeaderInfo]="pageHeaderInfo"></app-page-header> -->

<!-- <page-header [title]="'Danh s√°ch m√°y ·∫£o'"> </page-header> -->

<div page-header class="alain-default__content-title">
  <h1 class="h1">Danh s√°ch m√°y ·∫£o</h1>

  <div class="text-right">
    <region-select-dropdown
      (valueChanged)="onRegionChange($event)"
    ></region-select-dropdown>
    <project-select-dropdown [regionId]="region"></project-select-dropdown>
  </div>
</div>


<div class="normal-table-wrap" *ngIf="!activeCreate; else elsePage">
  <nz-card
    class="m-b-10"
    nzHoverable
    [nzBodyStyle]="{ 'padding-bottom': '15px' }"
  >
    <form nz-form>
      <div nz-row [nzGutter]="{ xs: 8, sm: 16, md: 24 }">
        <div
          nz-col
          [nzLg]="8"
          [nzMd]="12"
          [nzSm]="24"
          [nzXl]="8"
          [nzXs]="24"
          [nzXXl]="8"
        >
          <nz-form-item>
            <nz-form-label [nzFor]="">Tr·∫°ng th√°i m√°y ·∫£o</nz-form-label>
            <nz-form-control>
              <nz-select
                [ngModel]="searchParam.status"
                [nzPlaceHolder]="'T·∫•t c·∫£ tr·∫°ng th√°i'"
                [nzShowSearch]="false"
                name="status"
                (ngModelChange)="changeFilterStatus($event)"
              >
                <nz-option
                  *ngFor="let i of filterStatus"
                  [nzLabel]="i.text"
                  [nzValue]="i.value"
                />
              </nz-select>
            </nz-form-control>
            <!-- <nz-form-control>
              <input
                name="status"
                nz-input
                placeholder="T·∫•t c·∫£ tr·∫°ng th√°i"
                [(ngModel)]="searchParam.status"
              />
            </nz-form-control> -->
          </nz-form-item>
        </div>
        <div
          nz-col
          [nzLg]="8"
          [nzMd]="12"
          [nzSm]="24"
          [nzXl]="8"
          [nzXs]="24"
          [nzXXl]="8"
        >
          <nz-form-item>
            <nz-form-control>
              <input
                name="name"
                nz-input
                placeholder="T√¨m ki·∫øm t√™n m√°y ·∫£o, g√≥i c·∫•u h√¨nh ..."
                [ngModel]="searchParam.name"  (ngModelChange)="changeName($event)"
              />
            </nz-form-control>
          </nz-form-item>
        </div>
        <!-- <div nz-col [nzLg]="8" [nzMd]="12" [nzSm]="24" [nzXl]="8" [nzXs]="24" [nzXXl]="8"></div> -->
        <div
          class="text-right p-0 m-b-10"
          nz-col
          [nzLg]="8"
          [nzMd]="12"
          [nzSm]="24"
          [nzXl]="8"
          [nzXs]="24"
          [nzXXl]="8"
        >
          <button nz-button [nzType]="'primary'" (click)="getDataList()">
            <i nz-icon nzType="search"></i>
            Search
          </button>
          <!-- <button class="m-l-15" nz-button (click)="resetForm()"> <span nz-icon nzType="search" nzTheme="outline"></span> copied üéâ
            <i nz-icon nzTheme="outline" nzType="close-circle"></i>
            Reset
          </button> -->
          <button
            class="m-r-8"
            nz-button
            nzType="primary"
            (click)="navigateToCreate()"
          >
            <i nz-icon nzType="plus"></i>
            T·∫°o m·ªõi
          </button>
        </div>
      </div>
    </form>
  </nz-card>

  <nz-table
    #ajaxTable3
    nzShowSizeChanger
    [nzFrontPagination]="false"
    [nzData]="dataList"
    [nzLoading]="loading"
    [nzTotal]="total"
    [(nzPageIndex)]="pageIndex"
    [(nzPageSize)]="pageSize"
    (nzPageIndexChange)="getDataList()"
    (nzPageSizeChange)="getDataList(true)"
  >
    <thead>
      <tr>
        <th>T√™n m√°y ·∫£o</th>
        <th>G√≥i c·∫•u h√¨nh</th>
        <th>Tr·∫°ng th√°i m√°y ·∫£o</th>
        <th>Tr·∫°ng th√°i t√°c v·ª•</th>
        <th>IP LAN</th>
        <th>IP Public</th>
        <th>Thao t√°c</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let data of ajaxTable3.data">
        <td>{{ data.name }}</td>
        <td>
          {{ data.flavorName }}
          <!-- flavorId v·ªõi flavorCloudId(m√£ d∆∞·ªõi h·ªá th·ªëng openstack) ·∫° -->
        </td>
        <td>
          <div *ngFor="let nameFill of filterStatus">
            <p *ngIf="data.status == nameFill.value;">{{ nameFill.text }}</p>
          </div>
          <!-- <ng-template #notmatch>{{ data.status}}</ng-template> -->
        </td>
        <td>{{ data.taskState }}</td>
        <td>{{ data.ipPrivate }}</td>
        <td>{{ data.ipPublic }}</td>
        <td>
          <nz-select
            [nzPlaceHolder]="'Thao t√°c'"
            ngModel="selectedOptionAction"
            name="selectAction"
            (ngModelChange)="showModal($event, data)"
          >
            <nz-option nzValue="1" nzLabel="T·∫°o Backup"></nz-option>
            <nz-option nzValue="2" nzLabel="T·∫°o l·ªãch Backup"></nz-option>
            <nz-option
              nzValue="3"
              nzLabel="Ch·ªânh s·ª≠a Security Group"
            ></nz-option>
            <nz-option nzValue="4" nzLabel="Ch·ªânh s·ª≠a"></nz-option>
            <nz-option nzValue="5" nzLabel="G·∫Øn v√†o VLAN"></nz-option>
            <nz-option nzValue="6" nzLabel="G·ª° kh·ªèi VLAN"></nz-option>
            <nz-option nzValue="7" nzLabel="Kh·ªüi ƒë·ªông l·∫°i"></nz-option>
            <nz-option nzValue="8" nzLabel="T·∫Øt m√°y ·∫£o"></nz-option>
            <nz-option nzValue="9" nzLabel="RESCUE"></nz-option>
          </nz-select>
        </td>
      </tr>
    </tbody>
  </nz-table>
</div>
<ng-template #elsePage>
  <nz-card>
    <result>
      <img nz-image nzSrc="assets/imgs/blank_vm.png" alt="" />

      <button nz-button [nzType]="'primary'" (click)="navigateToCreate()">
        <!-- <a routerLink="/pages/vm/instances-create"> Kh·ªüi t·∫°o ngay</a>
        -->
        Kh·ªüi t·∫°o ngay
      </button>
    </result>
  </nz-card>
</ng-template>

<!-- Modal -->
<nz-modal
  [(nzVisible)]="isVisible07"
  nzTitle="T·∫Øt m√°y ·∫£o"
  (nzOnCancel)="handleCancel()"
  (nzOnOk)="handleOk(7)"
  [nzFooter]="modalFooter7"
>
  <ng-container *nzModalContent>
    <p>Qu√Ω kh√°ch ch·∫Øc ch·∫Øn mu·ªën th·ª±c hi·ªán kh·ªüi ƒë·ªông l·∫°i m√°y ·∫£o?</p>
  </ng-container>
  <ng-template #modalFooter7>
    <button nz-button nzType="default" (click)="handleCancel()">H·ªßy</button>
    <button nz-button nzType="primary" (click)="handleOk(7)">X√°c nh·∫≠n</button>
  </ng-template>
</nz-modal>

<nz-modal
  [(nzVisible)]="isVisible08"
  nzTitle="T·∫Øt m√°y ·∫£o"
  (nzOnCancel)="handleCancel()"
  (nzOnOk)="handleOk(8)"
  [nzFooter]="modalFooter8"
>
  <ng-container *nzModalContent>
    <p>Qu√Ω kh√°ch ch·∫Øn ch·∫Øn mu·ªën th·ª±c hi·ªán t·∫Øt m√°y ·∫£o?</p>
  </ng-container>
  <ng-template #modalFooter8>
    <button nz-button nzType="default" (click)="handleCancel()">H·ªßy</button>
    <button nz-button nzType="primary" (click)="handleOk(8)">X√°c nh·∫≠n</button>
  </ng-template>
</nz-modal>
