<page-header [breadcrumb]="breadcrumb" [action]="action"
             [title]="'Gia hạn IP Public'">
  <ng-template #breadcrumb>
    <nz-breadcrumb>
      <nz-breadcrumb-item><a [routerLink]="['/']">Trang chủ</a></nz-breadcrumb-item>
      <nz-breadcrumb-item><a [routerLink]="['/app-smart-cloud/ip-public']">Ip Public</a></nz-breadcrumb-item>
      <nz-breadcrumb-item>Extend</nz-breadcrumb-item>
    </nz-breadcrumb>
  </ng-template>
  <ng-template #action>
    <div class="alain-custom-action text-right">
      <region-select-dropdown (valueChanged)="onRegionChange($event)"></region-select-dropdown>
      <project-select-dropdown [regionId]="regionId" (userChanged)="projectChange($event)"></project-select-dropdown>
    </div>
  </ng-template>
</page-header>
<nz-content>
  <nz-row [nzGutter]="24">
    <nz-col nzSpan="16">
      <nz-card [nzLoading]="isLoading" style="border-radius: 8px;">
        <span class="text-card-header">Thông tin Volume</span>
        <nz-descriptions [nzColumn]="2" style="margin-top: 20px;">
          <nz-descriptions-item [nzTitle]="titleName">{{ipInfo?.ipAddress}}</nz-descriptions-item>
          <nz-descriptions-item><label nz-checkbox [(ngModel)]="isIpV6" [nzDisabled]="true">IPv6</label>
          </nz-descriptions-item>
          <nz-descriptions-item [nzTitle]="titleStorage">{{ipInfo?.attachedVm}}</nz-descriptions-item>
        </nz-descriptions>
        <ng-template #titleName>
          <span><b>Địa chỉ IP:</b></span>
        </ng-template>
        <ng-template #titleStorage>
          <span><b>Gắn vào máy ảo:</b></span>
        </ng-template>
      </nz-card>
      <nz-card style="border-radius: 8px;">
        <span class="text-card-header">Thông tin gia hạn</span>
        <hr style="opacity: 0.1">
        <hr>
        <nz-table style="margin-top: 50px">
          <td style="width: 50%">
            <p><b>Ngày cấp dịch vụ: </b> {{dateString | date:'dd/MM/yyyy'}} </p>
          </td>
          <td style="width: 50%">
            <p><b>Ngày hết hạn: </b> {{ipInfo.expiredDate | date:'dd/MM/yyyy'}} </p>
          </td>
        </nz-table>
        <b>Số tháng cần gia hạn thêm</b>
        <nz-input-number style="width: 100%; margin-top: 10px; margin-bottom: 18px;margin-left: -3px" [nzMin]="1"
                         [nzMax]="99999" [nzStep]="1"
                         [(ngModel)]="numOfMonth" (ngModelChange)="caculator()"
                         [ngModelOptions]="{ standalone: true }" nzSize="large"></nz-input-number>
        <p style="color: red"><b style="color: red">Ngày hết hạn dự
          kiến: </b>{{dateStringExpired | date : "dd/MM/YYYY"}}</p>
      </nz-card>
    </nz-col>
    <nz-col nzSpan="8">
      <nz-card style="border-radius: 8px;">
        <div style="margin-bottom: 20px">
          <span class="text-card-header">Thành tiền</span>
        </div>
        <nz-row style="margin-bottom: 10px" nzGutter="16">
          <nz-col nzSpan="16">
            <span class="text-label">
              Chi phí gia hạn IP Public
            </span>
          </nz-col>
          <nz-col class="text-right" nzSpan="8">
              <span *ngIf="total != undefined" class="text-value" style="color: #ea3829" nzAlign="right">
             {{total.data.totalAmount.amount.toLocaleString()}} VNĐ
            </span>
          </nz-col>
        </nz-row>
        <nz-row style="
            margin-bottom: 20px;
            background-color: #cce9ff;
            padding: 16px 0 16px 0;
            border-radius: 8px;
          "
                nzGutter="16">
          <nz-col nzSpan="16">
            <span class="text-label"> Thành tiền (Đã bao gồm 10% VAT): </span>
          </nz-col>
          <nz-col class="text-right" nzSpan="8">
              <span *ngIf="total != undefined" class="text-value" style="color: #ea3829" nzAlign="right">
              {{total.data.totalPayment.amount.toLocaleString()}} VNĐ
            </span>
          </nz-col>
        </nz-row>
        <nz-row>
          <nz-col style="width: 100%" class="text-right">
            <button nz-button (click)="backToList()">
              <img
                style="padding-right: 10px; margin-top: -4px"
                src="assets/imgs/cancel.svg"
                alt=""
              />Hủy
            </button>
            <button
              nz-button
              nzSize="large"
              nzType="primary"
              (click)="extendIpPublic()"
              [disabled]="numOfMonth == null || numOfMonth ==0">
              <span nz-icon nzType="wallet" nzTheme="outline"></span>
              <span class="button-text-primary"
                    [style.color]="numOfMonth == null || numOfMonth ==0? 'gray' : 'white'">Cập nhật</span>
            </button>
          </nz-col>
        </nz-row>
      </nz-card>
    </nz-col>
  </nz-row>
</nz-content>


