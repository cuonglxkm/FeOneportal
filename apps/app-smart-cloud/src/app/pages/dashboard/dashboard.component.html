<nz-content>
  <nz-row [nzGutter]="6" style="padding-top: 24px;">
    <nz-col [nzSpan]="6">
      <nz-card style="border: 1px solid #0074CC;gap: 40px;border-radius: 10px;">
        <div class="ant-card-body" style="text-align: center;">
          <div style="gap: 20px;">
            <span class="text-card-header-dashboard">{{ subscriptionsDashboard.serviceCount }}</span><br>
            <span class="text-body-card-dashboard" style="margin-top: 50px;">{{'app.dashboard.subscription.service' | i18n}}</span>
          </div>
        </div>

      </nz-card>
    </nz-col>
    <nz-col [nzSpan]="6">
      <nz-card style="border: 1px solid #0074CC;gap: 40px;border-radius: 10px;">
        <div class="ant-card-body" style="text-align: center;">
          <div style="gap: 20px;">
            <span class="text-card-header-dashboard">{{ subscriptionsDashboard.serviceActiveCount }}</span><br>
            <span class="text-body-card-dashboard" style="margin-top: 50px;">{{'app.dashboard.subscription.service.active'|i18n}}</span>
          </div>
        </div>

      </nz-card>
    </nz-col>
    <nz-col [nzSpan]="6">
      <nz-card style="border: 1px solid #0074CC;gap: 40px;border-radius: 10px;">
        <div class="ant-card-body" style="text-align: center;">
          <div style="gap: 20px;">
            <span class="text-card-header-dashboard">{{ subscriptionsDashboard.serviceNearExpireCount }}</span><br>
            <span class="text-body-card-dashboard" style="margin-top: 50px;">{{'app.dashboard.subscription.service.near.expire'|i18n}}</span>
          </div>
        </div>

      </nz-card>
    </nz-col>
    <nz-col [nzSpan]="6">
      <nz-card style="border: 1px solid #0074CC;gap: 40px;border-radius: 10px;">
        <div class="ant-card-body" style="text-align: center;">
          <div style="gap: 20px;">
            <span class="text-card-header-dashboard">{{ subscriptionsDashboard.serviceExpireCount }}</span><br>
            <span class="text-body-card-dashboard" style="margin-top: 50px;">{{ 'app.dashboard.subscription.service.expire'|i18n }}</span>
          </div>
        </div>
      </nz-card>
    </nz-col>
  </nz-row>
  <nz-card style="border-radius: 8px; margin-top: 15px;">
    <span class="text-card-header">{{ 'app.dashboard.payment.and.cost' | i18n }}</span>
    <nz-row nzGutter="24">
      <nz-col nzSpan="8">
        <div #pieChart></div>
      </nz-col>
      <nz-col nzSpan="16">
        <nz-table>
          <nz-table #fixTablePaymentCost
                    nzShowPagination
                    style="margin-top: 25px;"
                    [nzData]="listPaymentCostUse?.records"
                    [nzFrontPagination]="false"
                    [nzTotal]="listPaymentCostUse?.totalCount"
                    [nzPageSize]="listPaymentCostUse?.pageSize"
                    [nzPageIndex]="listPaymentCostUse?.currentPage"
                    [nzLoading]="isLoadingPaymentCost"
                    (nzPageSizeChange)="onPageSizeCostChange($event)"
                    (nzPageIndexChange)="onPageIndexCostChange($event)">
            <thead>
            <tr>
              <th>{{ 'app.dashboard.payment.and.cost.payment.code'|i18n }}</th>
              <th>{{ 'app.dashboard.payment.and.cost.service' |i18n }}</th>
              <th>{{ 'app.dashboard.payment.and.cost.total.payment'|i18n }}</th>
              <th>{{ 'app.dashboard.payment.and.cost.create.date'|i18n}}</th>
              <th>{{ 'app.dashboard.payment.and.cost.status'|i18n }}</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let data of fixTablePaymentCost.data">
              <td><a (click)="navigateToDetailPayment(data.id, data.paymentCode)">{{ data.paymentCode }}</a></td>
              <td>{{ data.serviceTypeName }}</td>
              <td nzAlign="right">{{ data.totalAmount | number}}</td>
              <td>{{ data.createdDate | date: 'dd/MM/yyyy' }}</td>
              <td>
                <span *ngIf="data.status === 'PAID'" style="color: #008D47;">{{ 'app.dashboard.payment.and.cost.paid'|i18n }}</span>
                <span *ngIf="data.status !== 'PAID'" style="color: #EB1414;">{{ 'app.dashboard.payment.and.cost.not.paid'|i18n }}</span>
              </td>
            </tr>
            </tbody>
          </nz-table>
        </nz-table>
      </nz-col>
    </nz-row>
  </nz-card>
  <nz-card style="border-radius: 8px; margin-top: 25px;">
    <span class="text-card-header">{{ 'app.dashboard.service.near.expire'|i18n }}</span>
    <nz-table #fixTableNearExpire
              nzShowPagination
              style="margin-top: 25px;"
              [nzData]="listSubscriptionsNearExpire?.records"
              [nzFrontPagination]="false"
              [nzTotal]="listSubscriptionsNearExpire?.totalCount"
              [nzPageSize]="listSubscriptionsNearExpire?.pageSize"
              [nzPageIndex]="listSubscriptionsNearExpire?.currentPage"
              [nzLoading]="isLoadingNearExpire"
              (nzPageSizeChange)="onPageSizeNearExpireChange($event)"
              (nzPageIndexChange)="onPageIndexNearExpireChange($event)">
      <thead>
      <tr>
        <th>{{ 'app.dashboard.service.near.expire.service.name'|i18n }}</th>
        <th>{{ 'app.dashboard.service.near.expire.service.type'|i18n }}</th>
        <th>{{ 'app.dashboard.service.near.expire.create.date'|i18n }}</th>
        <th>{{ 'app.dashboard.service.near.expire.expire.date'|i18n }}</th>
        <th>{{ 'app.dashboard.service.near.expire.status'|i18n }}</th>
        <th>{{ 'app.dashboard.service.near.expire.action'|i18n }}</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let data of fixTableNearExpire.data">
        <td>{{ data.serviceName }}</td>
        <td>{{ data.serviceTypeName }}</td>
        <td>{{ data.createDate | date: 'dd/MM/yyyy' }}</td>
        <td>{{ data.expireDate | date: 'dd/MM/yyyy' }}</td>
        <td style="color: #EB1414;">{{ data.status }}</td>
        <td>
          <img style="padding-right: 10px; cursor: pointer;" src="assets/imgs/calendar-tick.svg"
               nz-popover [nzPopoverContent]="'app.dashboard.service.near.expire.extend'|i18n"
               nzPopoverPlacement="bottom" alt="" (click)="navigateToExtend(data.serviceInstanceId, data.serviceType)"/>
        </td>
      </tr>
      </tbody>
    </nz-table>
  </nz-card>
</nz-content>
