<page-header
  [breadcrumb]="breadcrumb"
  [action]="action"
  [title]="'Khởi tạo SSL Cert'"
>
  <ng-template #breadcrumb>
    <nz-breadcrumb>
      <nz-breadcrumb-item>
        <a [routerLink]="['/']">{{ 'app.breadcrumb.home' | i18n }}</a>
      </nz-breadcrumb-item>
      <nz-breadcrumb-item>
        <a [routerLink]="['/app-smart-cloud/schedule/snapshot/list']">{{
          'app.breadcrumb.infrastructure.service' | i18n
        }}</a>
      </nz-breadcrumb-item>
      <nz-breadcrumb-item>SSL Cert</nz-breadcrumb-item>
      <nz-breadcrumb-item>Khởi tạo SSL Cert</nz-breadcrumb-item>
    </nz-breadcrumb>
  </ng-template>
  <ng-template #action>
    <div class="alain-custom-action text-right">
      <share-users-combobox></share-users-combobox>
      <region-select-dropdown
        (valueChanged)="onRegionChange($event)"
      ></region-select-dropdown>
      <project-select-dropdown
        [regionId]="region"
        (valueChanged)="onProjectChange($event)"
      ></project-select-dropdown>
    </div>
  </ng-template>
</page-header>
<div>
  <nz-card style="border-radius: 8px">
    <h2 class="custom-title">Thông tin SSL Cert</h2>
    <form [formGroup]="form" nz-form [nzLayout]="'vertical'">
      <nz-row nzGutter="16">
        <nz-col nzSpan="12">
          <nz-form-label [nzSm]="6" [nzXs]="24">Private key</nz-form-label>
          <textarea
            formControlName="privateKey"
            [placeholder]="'Sao chép nội dung từ file .key'"
            rows="4"
            nz-input
          ></textarea>
        </nz-col>
        <nz-col nzSpan="12">
          <nz-form-label [nzSm]="6" [nzXs]="24">Public key</nz-form-label>
          <textarea
            formControlName="publicKey"
            placeholder="Sao chép nội dung từ file .crt"
            rows="4"
            nz-input
          ></textarea>
        </nz-col>
        <nz-col nzSpan="12" class="mt-3">
          <nz-form-item>
            <nz-form-control
              [nzErrorTip]="'validation.file.system.empty' | i18n"
            >
              <nz-form-label nzFor="name">
                <div>
                  <span>Tên SSL Cert</span>
                  (<span style="color: rgba(252, 16, 16, 1)">*</span>)
                  <span
                    nz-icon
                    nzType="question-circle"
                    nzTheme="outline"
                    nz-popover
                    [nzPopoverContent]="'Tên của File System.'"
                    nzPopoverPlacement="bottom"
                  ></span>
                </div>
              </nz-form-label>
              <input
                nz-input
                type="text"
                required
                placeholder="Nhập tên SSL Cert"
                formControlName="certName"
                class="input-custom"
              />
            </nz-form-control>
          </nz-form-item>
        </nz-col>
        <nz-col nzSpan="12" class="mt-3">
          <nz-form-item>
            <nz-form-control [nzErrorTip]="nameErrorTpl">
              <nz-form-label nzFor="name">
                <div>
                  <span>Mật khẩu private key</span>
                  (<span style="color: rgba(252, 16, 16, 1)">*</span>)
                  <span
                    nz-icon
                    nzType="question-circle"
                    nzTheme="outline"
                    nz-popover
                    nzPopoverPlacement="bottom"
                  ></span>
                </div>
              </nz-form-label>
              <nz-input-group class="input-custom" style="width: 100%; border-radius: 4px;" nzSearch [nzSuffix]="suffixTemplate">
              <input
                nz-input
                type="text"
                required
                placeholder="Nhập mật khẩu private key"
                formControlName="passphrase"
                [type]="passwordVisible ? 'text' : 'password'"
              />
              <ng-template #suffixTemplate>
                <span
                  nz-icon
                  [nzType]="passwordVisible ? 'eye-invisible' : 'eye'"
                  (click)="passwordVisible = !passwordVisible"
                  style="cursor: pointer;"
                ></span>
              </ng-template>
            </nz-input-group>             
            </nz-form-control>
          </nz-form-item>
        </nz-col>
        <nz-col nzSpan="12">
          <nz-form-item>
            <nz-form-control [nzErrorTip]="nameErrorTpl">
              <nz-form-label nzFor="name">
                <div>
                  <span>Ngày hết hạn</span>
                  (<span style="color: rgba(252, 16, 16, 1)">*</span>)
                  <span
                    nz-icon
                    nzType="question-circle"
                    nzTheme="outline"
                    nz-popover
                    nzPopoverPlacement="bottom"
                  ></span>
                </div>
              </nz-form-label>
              <nz-date-picker
                class="input-date-picker"
                nzFormat="yyyy-MM-dd HH:mm:ss"
                style="width: 100%; border-radius: 4px"
                [(ngModel)]="expireDate"
              ></nz-date-picker>
              <ng-template #nameErrorTpl let-control>
                <ng-container *ngIf="control.hasError('required')">{{
                  'validation.info.required' | i18n
                }}</ng-container>
                <ng-container *ngIf="control.hasError('pattern')">{{
                  'validation.file.system.name.patternd' | i18n
                }}</ng-container>
              </ng-template>
            </nz-form-control>
          </nz-form-item>
        </nz-col>
      </nz-row>
    <div class="d-flex justify-content-end">
      <button
      nz-button
      nzType="primary"
      (click)="handleCreate()"
    >
      <img
        style="padding-right: 10px; margin-top: -4px"
        src="assets/imgs/confirm.svg"
        alt=""
      />{{ 'app.button.confirm' | i18n }}
    </button>
    </div>
    </form>
  </nz-card>
</div>
<div
  class="text-right"
  style="
    display: flex;
    align-items: center;
    justify-content: flex-end;
    height: 100%;
  "
></div>
