<page-header [action]="action" [title]="'Danh sách Policies'">
  <ng-template #action>
    <div class="text-right">
      <region-select-dropdown (valueChanged)="onRegionChange($event)"></region-select-dropdown>
      <project-select-dropdown [regionId]="regionId" (valueChanged)="projectChange($event)"></project-select-dropdown>
    </div>
  </ng-template>
  <div nz-row class="mb-md">
    <div nz-col nzSpan="14">
      <div class="row">
        <div class="col-md-6" style="display:flex;">
          <h4 style="display: flex; align-items: center; margin-right:10px">Loại policy:</h4>
          <nz-select [(ngModel)]="selectedStatus" nzSize="default" style="width: 150px">
            <nz-option *ngFor="let p of listPolicyType" [nzValue]="p.value" [nzLabel]="p.label"></nz-option>
          </nz-select>
        </div>
        <div class="col-md-6" style="margin-left: 30px">
          <nz-input-group nzSearch nzSize="default" [nzAddOnAfter]="suffixButton">
            <input #searchBox type="text" nz-input placeholder="Tìm kiến tên,thời gian khởi tạo..."
                   style="width: 350px"/>
            <ng-template #suffixButton>
              <button nz-button nzType="primary" nzSize="default" nzSearch (click)="search(searchBox.value)">
                <span nz-icon nzType="search" nzTheme="outline"></span>
                Tim kiếm
              </button>
            </ng-template>
          </nz-input-group>
        </div>
      </div>
    </div>
    <div nz-col nzSpan="10">
      <div class="text-right">
        <button (click)="deletePolicy()" nz-button nzType="default" style="
            margin-right: 10px;
          "><i nz-icon nzType="delete"></i><span nz-icon nzType="reload" nzTheme="outline"></span>
        </button>
        <nz-select [(ngModel)]="selectedAction" nzSize="default" style="width: 90px; margin-right: 10px;">
          <nz-option *ngFor="let p of listAction" [nzValue]="p.value" [nzLabel]="p.label"></nz-option>
        </nz-select>
        <button (click)="deletePolicy()" nz-button nzType="default" style="
            border: 1px solid #808080;
            border-radius: 2px;
            background-color: #808080;
            color: whitesmoke;
            margin-right: 10px;
          "><i nz-icon nzType="delete"></i> Xóa
        </button>
        <button (click)="createPolicy()" nz-button nzType="primary" style="
            border: 1px solid #52c41a;
            border-radius: 2px;
            background-color: #52c41a;
          "><i nz-icon nzType="plus"></i> Tạo mới
        </button>
      </div>
    </div>
  </div>
</page-header>
<nz-card>
  <!-- Bảng-->
  <nz-table #rowSelectionTable [nzFrontPagination]="false" nzShowPagination nzShowSizeChanger [nzData]="listOfData"
            [nzTotal]="total" [nzPageSize]="size" (nzPageSizeChange)="onPageSizeChange($event)"
            (nzPageIndexChange)="onPageIndexChange($event)">
    <thead>
    <tr>
      <th nzWidth="40px"></th>
      <th nzWidth="40px"></th>
      <th>Tên</th>
      <th>Type</th>
      <th>Mô tả</th>
    </tr>
    </thead>
    <tbody>
    <ng-container *ngFor="let item of listOfData">
      <tr>
        <td>
          <nz-radio-group [(ngModel)]="radioValue">
            <label nz-radio [nzValue]="item.id"></label>
          </nz-radio-group>
        </td>
        <td [nzExpand]="expandSet.has(item.id)" (nzExpandChange)="onExpandChange(item.id, $event)"></td>
        <td>{{ item.name }}</td>
        <td>{{ item.type }}</td>
        <td>{{ item.description }}</td>
      </tr>
      <tr [nzExpand]="expandSet.has(item.id)">
<!--        <json-editor [options]="options" [data]="item"></json-editor>-->
        <json-editor
          [options]="optionJsonEditor"
          formControlName="myinput"
          [data]="item.jsonData"
        ></json-editor>
      </tr>
    </ng-container>
    </tbody>
  </nz-table>
</nz-card>

