<page-header [breadcrumb]="breadcrumb" title="Danh sách SSL Cert" [action]="action">
    <ng-template #breadcrumb>
        <nz-breadcrumb [nzSeparator]="iconTemplate">
            <nz-breadcrumb-item><a [routerLink]="['/']">{{
                    'app.breadcrumb.home' | i18n
                    }}</a></nz-breadcrumb-item>
            <nz-breadcrumb-item> {{ 'app.breadcrumb.infrastructure.service' | i18n }} </nz-breadcrumb-item>
            <nz-breadcrumb-item>WAF</nz-breadcrumb-item>
            <nz-breadcrumb-item>SSL Cert</nz-breadcrumb-item>
        </nz-breadcrumb>
        <ng-template #iconTemplate><one-portal-svg-icon [icon]="'icon_breadcrumb'"></one-portal-svg-icon></ng-template>
    </ng-template>
    <ng-template #action>
        <div class="alain-custom-action text-right">
            <share-users-combobox></share-users-combobox>
            <region-select-dropdown (regionChange)="onRegionChanged($event)"
                (valueChanged)="regionChanged($event)"></region-select-dropdown>
            <project-select-dropdown #projectCombobox (valueChanged)="projectChanged($event)"
                (userChanged)="projectChanged($event)" [regionId]="region" [isFirstVisit]="isFirstVisit"
                [disabledProject]="isLoading"></project-select-dropdown>
        </div>
    </ng-template>
</page-header>
<nz-content>
    <nz-card>
      <ng-container [ngSwitch]="isBegin">
        <ng-container *ngSwitchCase="false">
          <nz-row nzJustify="space-between">
            <nz-col nzSpan="16">
              
              <nz-input-group style="width: 300px;"
                              [nzPrefix]="prefixIconSearch"
                              nzSize="large">
                <input name="name"
                       nz-input
                       placeholder="Tìm kiếm theo Certificate Name"
                       [(ngModel)]="value"
                       (input)="changeInputChange($event)"
                       (keydown.enter)="onEnter($event)" />
              </nz-input-group>
              <ng-template #prefixIconSearch>
                <img src="assets/imgs/search.svg" alt="" />
              </ng-template>
            </nz-col>
            <nz-col nzSpan="8" style="flex:none;">
              <button nz-button
                      nzType="primary"
                      nzSize="large"
                      (click)="navigateToCreateVolume()">
                <img style="padding-right: 10px; margin-top: -4px"
                     src="assets/imgs/add-circle.svg"
                     alt="" />
                <span class="button-text-primary">Tạo mới SSL Cert</span>
              </button>
            </nz-col>
          </nz-row>
          <nz-table #fixedTable
                    style="margin-top: 20px;"
                    nzShowSizeChanger
                    [nzData]="response?.records || []"
                    [nzPageSize]="response?.pageSize"
                    (nzPageSizeChange)="onPageSizeChange($event)"
                    [nzPageIndex]="response?.currentPage"
                    (nzPageIndexChange)="onPageIndexChange($event)"
                    [nzTotal]="response?.totalCount"
                    [nzFrontPagination]="false"
                    [nzLoading]="false">
            <thead>
            <tr>
              <th nzLeft>Certificate Name</th>
              <th >Authorized Domain(s)</th>
              <th >Certificate Status</th>
              <th >Certificate Type</th>
              <th >Expiration Date</th>
              <th >Associated Domain(s)</th>
              <th >{{ 'volume.table.title.action' | i18n }}</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let data of fixedTable.data">
              <td nzLeft><a (click)="navigateToDetail(data.id)">{{ data.name }}</a></td>
              <td nzAlign="center" nzBreakWord>
                {{data.authorizedDomains.join(", ")}}
              </td>
              <td nzAlign="center" nzBreakWord>{{data.status}}</td>
              <td nzAlign="center" nzBreakWord>{{data.type}}</td>
              <td nzAlign="center" nzBreakWord>{{data.expiration | date: 'HH:mm:ss dd/MM/YYYY'}}</td>
              <td nzAlign="center" nzBreakWord>{{data.associatedDomain.join(", ")}}</td>
              <td nzAlign="center" nzBreakWord>
                <div>
                  <img nz-popover src="assets/imgs/add.svg" alt="" nzPopoverPlacement="bottom" style="cursor: pointer; margin-right: 5px; margin-top: 2px;"
                  [nzPopoverContent]="'Associated Domains'">
                  <img nz-popover src="assets/imgs/edit-2.svg" alt="" nzPopoverPlacement="bottom" style="cursor: pointer; margin-right: 5px; margin-top: 2px;"
                  [nzPopoverContent]="'app.text.edit' | i18n">
                  <img nz-popover src="assets/imgs/delete.svg" alt="" nzPopoverPlacement="bottom" style="cursor: pointer; margin-right: 5px; margin-top: 2px;"
                  [nzPopoverContent]="'app.text.delete' | i18n">
                </div>
              </td>
              
            </tr>
            </tbody>
          </nz-table>
        </ng-container>
        <!---------------TRANG GIỚI THIỆU-------------->
        <ng-container *ngSwitchDefault>
          <result>
            <nz-row>
              <nz-col class="text-center" style="width: 100%">
                <img src="/assets/imgs/volume.png" alt="" />
              </nz-col>
            </nz-row>
            <nz-row style="margin-top: 20px">
              <nz-col class="text-center" style="width: 100%">
                <span class="text-intro-title" style="color: #0066b3">{{ 'volume.intro.title' | i18n }}
                  <br>{{ 'volume.intro.title2' | i18n }}</span>
              </nz-col>
            </nz-row>
            <nz-row style="margin-top: 20px">
              <nz-col class="text-center" style="width: 100%">
                <span class="text-intro-desc">{{ 'volume.intro.subtitle' | i18n }}</span>
              </nz-col>
            </nz-row>
            <button style="margin-top: 20px" nz-button [nzType]="'primary'" (click)="navigateToCreateVolume()"
                    nzSize="large">
              <img style="padding-right: 10px; margin-top: -4px" src="assets/imgs/cloud-plus-bold.svg" alt="" />
              {{ 'volume.button.create' | i18n }}
            </button>
          </result>
        </ng-container>
      </ng-container>
    </nz-card>
  </nz-content>