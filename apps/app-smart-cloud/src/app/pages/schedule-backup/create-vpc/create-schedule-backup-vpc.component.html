<page-header [breadcrumb]="breadcrumb" [action]="action" title="{{'schedule.backup.title.job' | i18n}}">
  <ng-template #breadcrumb>
    <nz-breadcrumb [nzSeparator]="iconTemplate">
      <nz-breadcrumb-item>{{ 'app.breadcrumb.home' | i18n }}</nz-breadcrumb-item>
      <nz-breadcrumb-item>{{ 'app.breadcrumb.infrastructure.service' | i18n }}</nz-breadcrumb-item>
      <nz-breadcrumb-item>Backup</nz-breadcrumb-item>
      <nz-breadcrumb-item><a
        routerLink="/app-smart-cloud/schedule/backup/list">{{ 'schedule.backup.title.job' | i18n }}</a>
      </nz-breadcrumb-item>
      <ng-template #iconTemplate>
        <one-portal-svg-icon [icon]="'icon_breadcrumb'"></one-portal-svg-icon>
      </ng-template>
    </nz-breadcrumb>
  </ng-template>
  <ng-template #action>
    <div class="alain-custom-action text-right">
      <share-users-combobox></share-users-combobox>
      <region-select-dropdown (regionChange)="onRegionChanged($event)" (valueChanged)="regionChanged($event)"></region-select-dropdown>
      <project-select-dropdown #projectCombobox (userChanged)="userChanged($event)"
                               (valueChanged)="projectChanged($event)"
                               [regionId]="region"></project-select-dropdown>
    </div>
  </ng-template>
</page-header>
<nz-spin [nzSpinning]=isLoading>
  <nz-content>
    <form nz-form [formGroup]="validateForm" nzLayout="vertical">
      <nz-row nzGutter="24">
        <nz-col nzSpan="16">
          <nz-card style="border-radius: 8px;">
            <span class="text-card-header">{{ 'volume.menu.create.schedule.backup'|i18n }}</span>
            <nz-row nzGutter="24">
              <nz-col nzSpan="12">
                <nz-radio-group
                  [(ngModel)]="selectedOption"
                  [ngModelOptions]="{ standalone: true }"
                  (ngModelChange)="onSelectionChange()"
                  style="display: grid">
                  <label nz-radio nzValue="instance">Backup VM</label>
                  <label nz-radio nzValue="volume">Backup Volume</label>
                </nz-radio-group>
              </nz-col>
            </nz-row>
            <!---SCHEDULE BACKUP VM---!-->
            <div *ngIf="selectedOption == 'instance'" [formGroupName]="'formInstance'">
              <nz-row nzGutter="24" style="margin-bottom: 0;">
                <nz-col nzSpan="12">
                  <!----Nhập tên lịch backup vm--!-->
                  <nz-form-item>
                    <nz-form-label>
                      <span>{{ 'schedule.backup.label.name'|i18n }} (<span style="color: #EA3829;">*</span>)</span>
                      <img nz-popover
                           [nzPopoverContent]="'schedule.backup.tooltip.name' | i18n"
                           nzPopoverPlacement="bottom"
                           style="margin-left: 5px;margin-top: 2px;"
                           src="assets/imgs/pajamas_question.svg" alt="" />
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips [nzErrorTip]="nameErrorTpl">
                      <input appAutofocus
                             nz-input
                             class="input-custom"
                             formControlName="name"
                             [maxLength]="50"
                             [placeholder]="'schedule.backup.placeholder.input.name'|i18n"
                             style="width: 100%;border-radius: 8px;" />
                      <ng-template #nameErrorTpl let-control>
                        <ng-container *ngIf="control.hasError('required')">{{ 'validation.info.required' | i18n }}
                        </ng-container>
                        <ng-container *ngIf="control.hasError('pattern')">{{ 'schedule.backup.validate1' | i18n }}
                          . {{ 'schedule.backup.validate2'|i18n }}
                        </ng-container>
                        <ng-container
                          *ngIf="control.hasError('duplicateName')">{{ 'schedule.backup.validate3' | i18n }}
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
                <nz-col nzSpan="12">
                  <!----chọn vm--!-->
                  <nz-form-item>
                    <nz-form-label>
                      <div class="label">
                        <span>{{ 'volume.modal.attach.title' | i18n }} (<span style="color: #EA3829;">*</span>)</span>
                        <img style="margin-left: 5px;"
                             nz-popover
                             [nzPopoverContent]="'schedule.backup.vm.select.vm.tooltip' | i18n"
                             nzPopoverPlacement="bottom"
                             src="assets/imgs/pajamas_question.svg" alt="" />
                      </div>
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips [nzErrorTip]="instanceErrorTpl">
                      <nz-select *ngIf="instanceId != undefined"
                                 formControlName="instanceId"
                                 [nzSize]="'large'"
                                 nzPlaceHolder="{{'volume.modal.attach.title' | i18n}}"
                                 [nzShowSearch]="false"
                                 [nzLoading]="isLoadingInstance"
                                 [(ngModel)]="instanceSelected"
                                 (ngModelChange)="selectInstanceChange($event)">
                        <nz-option *ngFor="let i of listInstanceNotUse"
                                   [nzLabel]="i.name"
                                   [nzValue]="i.id"></nz-option>
                      </nz-select>
                      <nz-select *ngIf="instanceId == null"
                                 formControlName="instanceId"
                                 [nzSize]="'large'"
                                 nzPlaceHolder="{{'volume.modal.attach.title' | i18n}}"
                                 [nzShowSearch]="false"
                                 [nzLoading]="isLoadingInstance"
                                 [(ngModel)]="instanceSelected"
                                 (ngModelChange)="selectInstanceChange($event)">
                        <nz-option *ngFor="let i of listInstanceNotUse"
                                   [nzLabel]="i.name"
                                   [nzValue]="i.id"></nz-option>
                      </nz-select>
                      <ng-template #instanceErrorTpl let-control>
                        <ng-container *ngIf="control.hasError('required')">{{ 'validation.info.required' | i18n }}
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
              </nz-row>
              <nz-row nzGutter="24" style="margin-bottom: 0;">
                <nz-col nzSpan="12">
                  <!----nhập số bản lưu trữ backup--!-->
                  <nz-form-item>
                    <nz-form-label>
                      <span>{{ 'schedule.backup.number.save'|i18n }} (<span style="color: #EA3829;">*</span>)</span>
                      <img nz-popover
                           [nzPopoverContent]="'schedule.backup.vm.max.backup.tooltip' | i18n"
                           nzPopoverPlacement="bottom"
                           style="margin-left: 5px;margin-top: 2px;"
                           [nzPopoverOverlayStyle]="{ width: '360px' }"
                           src="assets/imgs/pajamas_question.svg" alt="" />
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips [nzErrorTip]="maxBackupTpl">
                      <nz-input-number class="input-custom"
                                       formControlName="maxBackup"
                                       style="width: 100%; margin-left: 0;"
                                       nzMin="1"
                                       nzStep="1"
                                       nzMax="5" (input)="inputMaxBackup($event)"/>
                      <ng-template #maxBackupTpl let-control>
                        <ng-container
                          *ngIf="control.hasError('required')">{{ 'schedule.backup.require.max.backup' | i18n }}
                        </ng-container>
                        <ng-container
                          *ngIf="control.hasError('pattern')">{{ 'schedule.backup.pattern.max.backup' | i18n }}
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
                <nz-col nzSpan="12">
                  <!----chọn chế độ backup--!-->
                  <nz-form-item>
                    <nz-form-label nzFor="mode">
                      <div class="label">
                        <span>{{ 'schedule.backup.mode' | i18n }} (<span style="color:#EA3829;">*</span>)</span>
                        <img style="margin-left: 5px;"
                             nz-popover
                             [nzPopoverContent]="'schedule.backup.vm.mode.backup.tooltip' | i18n"
                             nzPopoverPlacement="bottom"
                             src="assets/imgs/pajamas_question.svg" alt="" />
                      </div>
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips [nzErrorTip]="backupModeErrorTpl">
                      <nz-select
                        formControlName="mode"
                        nzSize="large"
                        nzPlaceHolder="{{'schedule.backup.mode' | i18n}}"
                        [nzShowSearch]="false"
                        [(ngModel)]="modeSelected"
                        (ngModelChange)="modeChange($event)">
                        <nz-option *ngFor="let i of modes"
                                   [nzLabel]="i.label"
                                   [nzValue]="i.value" />
                      </nz-select>
                      <ng-template #backupModeErrorTpl let-control>
                        <ng-container *ngIf="control.hasError('required')">{{ 'validation.info.required' | i18n }}
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
              </nz-row>
              <nz-row nzGutter="24" style="margin-bottom: 0;">
                <nz-col nzSpan="12">
                  <nz-row nzGutter="24">
                    <nz-col nzSpan="12">
                      <span class="text-label">{{ 'app.info.backup.vm.total.storage'|i18n }}</span>
                    </nz-col>
                    <nz-col nzSpan="12" style="text-align: end;">
                      <span class="text-label">{{ sizeInCloudProject?.cloudProject?.quotaBackupVolumeInGb }} GB</span>
                    </nz-col>
                  </nz-row>
                  <nz-row nzGutter="24">
                    <nz-col nzSpan="12">
                      <span class="text-label">{{ 'app.backup.package.storage.used'|i18n }}</span>
                    </nz-col>
                    <nz-col nzSpan="12" style="text-align: end;">
                      <span class="text-label">{{ sizeInCloudProject?.cloudProjectResourceUsed?.backup }} GB</span>
                    </nz-col>
                  </nz-row>
                  <nz-row nzGutter="24">
                    <nz-col nzSpan="12">
                      <span class="text-label">{{ 'app.backup.package.storage.remaining'|i18n }}</span>
                    </nz-col>
                    <nz-col nzSpan="12" style="text-align: end;">
                      <span
                        class="text-label">{{ sizeInCloudProject?.cloudProject?.quotaBackupVolumeInGb - sizeInCloudProject?.cloudProjectResourceUsed?.backup }}
                        GB</span>
                    </nz-col>
                  </nz-row>
                </nz-col>
                <nz-col nzSpan="12">
                  <!----volume gắn ngoài--!-->
                  <nz-form-item>
                    <nz-form-label nzFor="listAttachedVolume">
                      <div class="label">{{ 'schedule.backup.select.volume.backup' | i18n }}</div>
                      <img style="margin-left: 5px;"
                           nz-popover
                           [nzPopoverContent]="'schedule.backup.vm.backup.volume.attach.tooltip' | i18n"
                           nzPopoverPlacement="bottom"
                           src="assets/imgs/pajamas_question.svg" alt="" />
                    </nz-form-label>
                    <nz-form-control>
                      <nz-select id="volumeToBackupIds"
                                 formControlName="volumeToBackupIds"
                                 nzPlaceHolder="{{'app.info.backup.vm.external.volume' | i18n}}"
                                 nzMode="multiple"
                                 nzSize="large"
                                 (ngModelChange)="onSelectedVolume($event)"
                                 [nzShowSearch]="false">
                        <nz-option *ngFor="let i of volumeAttachments" [nzLabel]="i.name" [nzValue]="i.id" />
                      </nz-select>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
              </nz-row>
              <!----thông tin chế độ backup: Hằng ngày & Theo thứ--!-->
              <nz-row nzGutter="24" *ngIf="modeSelected == 1 || modeSelected == 2">
                <nz-col nzSpan="12">
                  <!----Thời gian thực hiện--!-->
                  <nz-form-item>
                    <nz-form-label>
                      <span>{{ 'app.cluster.action-time' | i18n }} (<span style="color: #EA3829;">*</span>)</span>
                      <img style="margin-left: 5px;"
                           nz-popover
                           [nzPopoverContent]="'schedule.backup.vm.backup.volume.mode.daily.tooltip' | i18n"
                           nzPopoverPlacement="bottom"
                           src="assets/imgs/pajamas_question.svg" alt="" />
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips [nzErrorTip]="timeErrorTpl">
                      <nz-time-picker formControlName=times
                                      id="times"
                                      nzSize="large"
                                      nzFormat="HH:mm"
                                      nzPlaceHolder="{{'schedule.backup.time.select' | i18n}}"
                                      style="width: 100%; border-radius: 8px;"></nz-time-picker>
                      <ng-template #timeErrorTpl let-control>
                        <ng-container *ngIf="control.hasError('required')">{{ 'validation.info.required' | i18n }}
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
                <nz-col nzSpan="12" *ngIf="modeSelected == 2">
                  <!----Chọn thứ--!-->
                  <nz-form-item>
                    <nz-form-label nzFor="daysOfWeekMultiple">
                      <div class="label">
                        <span>{{ 'schedule.backup.day.select' | i18n }} (<span style="color: #EA3829; ">*</span>)</span>
                        <img style="margin-left: 5px;"
                             nz-popover
                             [nzPopoverContent]="'schedule.backup.vm.backup.volume.mode.day.tooltip' | i18n"
                             nzPopoverPlacement="bottom"
                             src="assets/imgs/pajamas_question.svg" alt="" />
                      </div>
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips [nzErrorTip]="daysOfWeekErrorTpl">
                      <nz-select formControlName="daysOfWeekMultiple"
                                 nzMode="multiple"
                                 nzSize="large"
                                 nzPlaceHolder="{{'schedule.backup.day.select' | i18n}}"
                                 [nzShowSearch]="false">
                        <nz-option *ngFor="let i of daysOfWeeks" [nzLabel]="i.label" [nzValue]="i.value"></nz-option>
                      </nz-select>
                      <ng-template #daysOfWeekErrorTpl let-control>
                        <ng-container *ngIf="control.hasError('required')">{{ 'schedule.backup.select.date' | i18n }}
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
              </nz-row>
              <!----thông tin chế độ backup: Theo tuần & Theo tháng--!-->
              <nz-row nzGutter="24" style="margin-bottom: 0;" *ngIf="modeSelected == 3 || modeSelected == 4">
                <nz-col nzSpan="8">
                  <!----Thời gian thực hiện--!-->
                  <nz-form-item>
                    <nz-form-label>
                      <span>{{ 'app.cluster.action-time' | i18n }} (<span style="color: #EA3829;">*</span>)</span>
                      <img style="margin-left: 5px;"
                           nz-popover
                           [nzPopoverContent]="'schedule.backup.vm.backup.volume.mode.daily.tooltip' | i18n"
                           nzPopoverPlacement="bottom"
                           src="assets/imgs/pajamas_question.svg" alt="" />
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips [nzErrorTip]="timeErrorTpl">
                      <nz-time-picker formControlName=times
                                      nzSize="large"
                                      nzFormat="HH:mm"
                                      nzPlaceHolder="{{'schedule.backup.time.select' | i18n}}"
                                      style="width: 100%; border-radius: 8px;"></nz-time-picker>
                      <ng-template #timeErrorTpl let-control>
                        <ng-container *ngIf="control.hasError('required')">{{ 'validation.info.required' | i18n }}
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
                <nz-col nzSpan="8" *ngIf="modeSelected == 3">
                  <!----Chọn tuần--!-->
                  <nz-form-item>
                    <nz-form-label nzFor="numberOfWeek">
                      <div class="label">
                        <span>{{ 'app.number.of.week.executed' | i18n }} (<span style="color: #EA3829;">*</span>)</span>
                        <img style="margin-left: 5px;"
                             nz-popover
                             [nzPopoverContent]="'schedule.backup.vm.backup.volume.mode.week.tooltip' | i18n"
                             nzPopoverPlacement="bottom"
                             src="assets/imgs/pajamas_question.svg" alt="" />
                      </div>
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips>
                      <nz-select
                        formControlName="numberOfWeek" id="numberOfWeek"
                        nzPlaceHolder="{{'app.number.of.week.executed' | i18n}}"
                        [nzShowSearch]="false"
                        nzSize="large"
                        [(ngModel)]="numberOfWeekChangeSelected"
                        (ngModelChange)="numberOfWeekChange($event)">
                        <nz-option
                          *ngFor="let i of numberOfWeeks"
                          [nzLabel]="i.label"
                          [nzValue]="i.value" />
                      </nz-select>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
                <nz-col nzSpan="8" *ngIf="modeSelected == 3">
                  <!----Chọn ngày trong tuần--!-->
                  <nz-form-item>
                    <nz-form-label nzFor="daysOfWeek">
                      <div class="label">
                        <span>{{ 'schedule.backup.day.select' | i18n }} (<span style="color: #EA3829;">*</span>)</span>
                        <img style="margin-left: 5px;"
                             nz-popover
                             [nzPopoverContent]="'schedule.backup.vm.backup.volume.mode.day.tooltip' | i18n"
                             nzPopoverPlacement="bottom"
                             src="assets/imgs/pajamas_question.svg" alt="" />
                      </div>
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips [nzErrorTip]="daysOfWeekErrorTpl">
                      <nz-select formControlName="daysOfWeek"
                                 nzPlaceHolder="{{'schedule.backup.day.select' | i18n}}"
                                 nzSize="large"
                                 [nzShowSearch]="false"
                                 [(ngModel)]="daySelected"
                                 (ngModelChange)="dayOfWeekChange($event)">
                        <nz-option *ngFor="let i of daysOfWeeks"
                                   [nzLabel]="i.label"
                                   [nzValue]="i.value" />
                      </nz-select>
                      <ng-template #daysOfWeekErrorTpl let-control>
                        <ng-container *ngIf="control.hasError('required')">{{ 'schedule.backup.press.date' | i18n }}
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
                <nz-col nzSpan="8" *ngIf="modeSelected == 4">
                  <!----Nhập tháng--!-->
                  <nz-form-item>
                    <nz-form-label nzFor="months">
                      <div class="label">
                        <span>{{ 'app.number.of.month.executed' | i18n }} (<span
                          style="color: #EA3829;">*</span>)</span>
                        <img style="margin-left: 5px;"
                             nz-popover
                             [nzPopoverContent]="'schedule.backup.vm.backup.volume.mode.month.tooltip' | i18n"
                             nzPopoverPlacement="bottom"
                             src="assets/imgs/pajamas_question.svg" alt="" />
                      </div>
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips [nzErrorTip]="monthsErrorTpl">
                      <nz-input-number style="width:100%; margin-left: 0;"
                                       class="input-custom"
                                       formControlName="months"
                                       id="months"
                                       nzMin="1"
                                       nzMax="24"
                                       nzStep="1" (input)="inputMonthMode($event)" />
                      <ng-template #monthsErrorTpl let-control>
                        <ng-container *ngIf="control.hasError('required')">{{ 'schedule.backup.0.to.24' | i18n }}
                        </ng-container>
                        <ng-container *ngIf="control.hasError('max')">{{ 'schedule.backup.0.to.24' | i18n }}
                        </ng-container>
                        <ng-container *ngIf="control.hasError('min')">{{ 'schedule.backup.0.to.24' | i18n }}
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
                <nz-col nzSpan="8" *ngIf="modeSelected == 4">
                  <!----nhập ngày trong tháng--!-->
                  <nz-form-item>
                    <nz-form-label nzFor="date">
                      <div class="label">
                        <span>{{ 'app.execution.date' | i18n }} (<span style="color: #EA3829;">*</span>)</span>
                        <img style="margin-left: 5px;"
                             nz-popover
                             [nzPopoverContent]="'schedule.backup.vm.backup.volume.mode.date.tooltip' | i18n"
                             nzPopoverPlacement="bottom"
                             src="assets/imgs/pajamas_question.svg" alt="" />
                      </div>
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips [nzErrorTip]="dateErrorTpl">
                      <nz-input-number formControlName="date"
                                       style="width:100%; margin-left: 0;"
                                       class="input-custom"
                                       id="date"
                                       [nzMin]="1"
                                       nzMax="30"
                                       nzStep="1" (input)="inputDayInMonthMode($event)"/>
                      <ng-template #dateErrorTpl let-control>
                        <ng-container *ngIf="control.hasError('required')">{{ 'schedule.backup.0.to.31' | i18n }}
                        </ng-container>
                        <ng-container *ngIf="control.hasError('max')">{{ 'schedule.backup.0.to.31' | i18n }}
                        </ng-container>
                        <ng-container *ngIf="control.hasError('min')">{{ 'schedule.backup.0.to.31' | i18n }}
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
              </nz-row>
              <!----Kiểm tra dung lượng--!-->
              <div *ngIf="((instance?.storage + sizeOfVlAttach) * validateForm.get('formInstance').get('maxBackup').value) >
              (sizeInCloudProject?.cloudProject?.quotaBackupVolumeInGb - sizeInCloudProject?.cloudProjectResourceUsed?.backup)"
                   style="margin-bottom: 10px;">
                <nz-alert nzType="warning"
                          [nzMessage]="titleMessage"
                          nzShowIcon></nz-alert>
                <ng-template #titleMessage>
              <span
                style="color: #FF0000;">{{ 'schedule.backup.alert.storage.vpc'|i18n:{ storage: ((instance?.storage + sizeOfVlAttach) * validateForm.get('formInstance').get('maxBackup').value) } }}
                <a
                  [routerLink]="'/app-smart-cloud/project/detail/' + project">{{ projectName }}</a> {{ 'schedule.backup.alert.storage.normal1'|i18n }}</span>
                </ng-template>
              </div>
              <nz-form-item>
                <nz-form-label nzFor="description">
                  <div class="label">
                    <span>{{ 'app.service.description' | i18n }}</span>
                  </div>
                </nz-form-label>
                <nz-form-control nzDisableAutoTips [nzErrorTip]="descriptionErrorTpl">
                  <nz-textarea-count nzMaxCharacterCount="255">
                    <textarea nz-input
                              formControlName="description"
                              class="input-custom"
                              [placeholder]="'app.input.des'|i18n"
                              [nzAutosize]="{ minRows: 4, maxRows: 6 }"></textarea>
                  </nz-textarea-count>
                  <ng-template #descriptionErrorTpl let-control>
                    <ng-container *ngIf="control.hasError('required')">{{ 'validation.info.required' | i18n }}
                    </ng-container>
                    <ng-container *ngIf="control.hasError('maxlength')">{{ 'schedule.backup.validate4' | i18n }}
                    </ng-container>
                  </ng-template>
                </nz-form-control>
              </nz-form-item>
            </div>
            <!---SCHEDULE BACKUP VOLUME---!-->
            <div *ngIf="selectedOption == 'volume'" [formGroupName]="'formVolume'">
              <nz-row nzGutter="24" style="margin-bottom: 0;">
                <nz-col nzSpan="12">
                  <!---Nhập tên lịch backup--!-->
                  <nz-form-item>
                    <nz-form-label>
                      <span>{{ 'schedule.backup.label.name'|i18n }} (<span style="color: #EA3829;">*</span>)</span>
                      <img nz-popover
                           [nzPopoverContent]="'schedule.backup.tooltip.name' | i18n"
                           nzPopoverPlacement="bottom"
                           style="margin-left: 5px;margin-top: 2px;"
                           src="assets/imgs/pajamas_question.svg" alt="" />
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips [nzErrorTip]="nameErrorTpl">
                      <input appAutofocus
                             nz-input
                             class="input-custom"
                             formControlName="name"
                             [placeholder]="'schedule.backup.placeholder.input.name'|i18n"
                             [maxLength]="50"
                             style="width: 100%;border-radius: 8px;" />
                      <ng-template #nameErrorTpl let-control>
                        <ng-container *ngIf="control.hasError('required')">{{ 'validation.info.required' | i18n }}
                        </ng-container>
                        <ng-container *ngIf="control.hasError('pattern')">{{ 'schedule.backup.validate1' | i18n }}
                          . {{ 'schedule.backup.validate2'|i18n }}
                        </ng-container>
                        <ng-container
                          *ngIf="control.hasError('duplicateName')">{{ 'schedule.backup.validate3' | i18n }}
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
                <nz-col nzSpan="12">
                  <!----Chọn volume--!-->
                  <nz-form-item>
                    <nz-form-label>
                      <div class="label">
                        <span>{{ 'schedule.backup.volume.select' | i18n }} (<span
                          style="color: #EA3829;">*</span>)</span>
                        <img style="margin-left: 5px;"
                             nz-popover
                             [nzPopoverContent]="'schedule.backup.vm.select.volume.tooltip' | i18n"
                             nzPopoverPlacement="bottom"
                             src="assets/imgs/pajamas_question.svg" alt="" />
                      </div>
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips [nzErrorTip]="instanceErrorTpl">
                      <nz-select *ngIf="volumeId != undefined"
                                 formControlName="volumeId"
                                 [nzSize]="'large'"
                                 nzPlaceHolder="{{'schedule.backup.volume.select' | i18n}}"
                                 [nzShowSearch]="false"
                                 [nzLoading]="isLoadingVolume"
                                 [(ngModel)]="volumeSelected"
                                 (ngModelChange)="selectVolumeChange($event)">
                        <nz-option *ngFor="let i of listVolumeNotUseUnique"
                                   [nzLabel]="i.name"
                                   [nzValue]="i.id"></nz-option>
                      </nz-select>
                      <nz-select *ngIf="volumeId == undefined" formControlName="volumeId"
                                 nzSize="large"
                                 nzPlaceHolder="{{'schedule.backup.volume.select' | i18n}}"
                                 [nzShowSearch]="false"
                                 [nzLoading]="isLoadingVolume"
                                 [(ngModel)]="volumeSelected"
                                 (ngModelChange)="selectVolumeChange($event)">
                        <nz-option *ngFor="let i of listVolumeNotUseUnique"
                                   [nzLabel]="i.name"
                                   [nzValue]="i.id"></nz-option>
                      </nz-select>
                      <ng-template #instanceErrorTpl let-control>
                        <ng-container *ngIf="control.hasError('required')">{{ 'validation.info.required' | i18n }}
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
              </nz-row>
              <nz-row nzGutter="24" style="margin-bottom: 0;">
                <nz-col nzSpan="12">
                  <!----chọn số bản backup--!-->
                  <nz-form-item>
                    <nz-form-label>
                      <span>{{ 'schedule.backup.number.save'|i18n }} (<span style="color: #EA3829;">*</span>)</span>
                      <img nz-popover
                           [nzPopoverContent]="'schedule.backup.vm.max.backup.tooltip' | i18n"
                           nzPopoverPlacement="bottom"
                           style="margin-left: 5px;margin-top: 2px;"
                           [nzPopoverOverlayStyle]="{ width: '360px' }"
                           src="assets/imgs/pajamas_question.svg" alt="" />
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips [nzErrorTip]="maxBackupTpl">
                      <nz-input-number class="input-custom"
                                       formControlName="maxBackup"
                                       style="width: 100%; margin-left: 0;"
                                       nzMin="1"
                                       nzStep="1"
                                       nzMax="5" (input)="inputMaxBackup($event)"/>
                      <ng-template #maxBackupTpl let-control>
                        <ng-container
                          *ngIf="control.hasError('required')">{{ 'schedule.backup.require.max.backup' | i18n }}
                        </ng-container>
                        <ng-container
                          *ngIf="control.hasError('pattern')">{{ 'schedule.backup.pattern.max.backup' | i18n }}
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
                <nz-col nzSpan="12">
                  <!----Chọn chế độ backup--!-->
                  <nz-form-item>
                    <nz-form-label nzFor="mode">
                      <div class="label">
                        <span>{{ 'schedule.backup.mode' | i18n }} (<span style="color:#EA3829;">*</span>)</span>
                        <img style="margin-left: 5px;"
                             nz-popover
                             [nzPopoverContent]="'schedule.backup.vm.mode.backup.tooltip' | i18n"
                             nzPopoverPlacement="bottom"
                             src="assets/imgs/pajamas_question.svg" alt="" />
                      </div>
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips [nzErrorTip]="backupModeErrorTpl">
                      <nz-select
                        formControlName="mode"
                        nzSize="large"
                        nzPlaceHolder="{{'schedule.backup.mode' | i18n}}"
                        [nzShowSearch]="false"
                        [(ngModel)]="modeSelected"
                        (ngModelChange)="modeChange($event)">
                        <nz-option *ngFor="let i of modes"
                                   [nzLabel]="i.label"
                                   [nzValue]="i.value" />
                      </nz-select>
                      <ng-template #backupModeErrorTpl let-control>
                        <ng-container *ngIf="control.hasError('required')">{{ 'validation.info.required' | i18n }}
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
              </nz-row>
              <nz-row nzGutter="24" style="margin-bottom: 0;" *ngIf="modeSelected == 1">
                <nz-col nzSpan="12">
                  <nz-row nzGutter="24">
                    <nz-col nzSpan="12">
                      <span class="text-label">{{ 'app.info.backup.vm.total.storage'|i18n }}</span>
                    </nz-col>
                    <nz-col nzSpan="12" style="text-align: end;">
                      <span class="text-label">{{ sizeInCloudProject?.cloudProject?.quotaBackupVolumeInGb }} GB</span>
                    </nz-col>
                  </nz-row>
                  <nz-row nzGutter="24">
                    <nz-col nzSpan="12">
                      <span class="text-label">{{ 'app.backup.package.storage.used'|i18n }}</span>
                    </nz-col>
                    <nz-col nzSpan="12" style="text-align: end;">
                      <span class="text-label">{{ sizeInCloudProject?.cloudProjectResourceUsed?.backup }} GB</span>
                    </nz-col>
                  </nz-row>
                  <nz-row nzGutter="24">
                    <nz-col nzSpan="12">
                      <span class="text-label">{{ 'app.backup.package.storage.remaining'|i18n }}</span>
                    </nz-col>
                    <nz-col nzSpan="12" style="text-align: end;">
                      <span
                        class="text-label">{{ sizeInCloudProject?.cloudProject?.quotaBackupVolumeInGb - sizeInCloudProject?.cloudProjectResourceUsed?.backup }}
                        GB</span>
                    </nz-col>
                  </nz-row>
                </nz-col>
                <nz-col nzSpan="12">
                  <!---Thời gian thực hiện--!-->
                  <nz-form-item>
                    <nz-form-label>
                      <span>{{ 'app.cluster.action-time' | i18n }} (<span style="color: #EA3829;">*</span>)</span>
                      <img style="margin-left: 5px;"
                           nz-popover
                           [nzPopoverContent]="'schedule.backup.vm.backup.volume.mode.daily.tooltip' | i18n"
                           nzPopoverPlacement="bottom"
                           src="assets/imgs/pajamas_question.svg" alt="" />
                    </nz-form-label>
                    <nz-form-control nzDisableAutoTips [nzErrorTip]="timeErrorTpl">
                      <nz-time-picker formControlName=times
                                      nzSize="large"
                                      nzFormat="HH:mm"
                                      nzPlaceHolder="{{'schedule.backup.time.select' | i18n}}"
                                      style="width: 100%; border-radius: 8px;"></nz-time-picker>
                      <ng-template #timeErrorTpl let-control>
                        <ng-container *ngIf="control.hasError('required')">{{ 'validation.info.required' | i18n }}
                        </ng-container>
                      </ng-template>
                    </nz-form-control>
                  </nz-form-item>
                </nz-col>
              </nz-row>

              <div *ngIf="modeSelected == 2">
                <nz-row nzGutter="24" style="margin-bottom: 0;">
                  <nz-col nzSpan="12">
                    <!---Thời gian thực hiện--!-->
                    <nz-form-item>
                      <nz-form-label>
                        <span>{{ 'app.cluster.action-time' | i18n }}</span>
                        <span style="color: rgba(252, 16, 16, 1);">*</span>
                        <img style="margin-left: 5px;"
                             nz-popover
                             [nzPopoverContent]="'schedule.backup.vm.backup.volume.mode.daily.tooltip' | i18n"
                             nzPopoverPlacement="bottom"
                             src="assets/imgs/pajamas_question.svg" alt="" />
                      </nz-form-label>
                      <nz-form-control nzDisableAutoTips [nzErrorTip]="timeErrorTpl">
                        <nz-time-picker formControlName=times
                                        nzSize="large"
                                        nzFormat="HH:mm"
                                        nzPlaceHolder="{{'schedule.backup.time.select' | i18n}}"
                                        style="width: 100%; border-radius: 8px;"></nz-time-picker>
                        <ng-template #timeErrorTpl let-control>
                          <ng-container *ngIf="control.hasError('required')">{{ 'validation.info.required' | i18n }}
                          </ng-container>
                        </ng-template>
                      </nz-form-control>
                    </nz-form-item>
                  </nz-col>
                  <nz-col nzSpan="12">
                    <!---Ngày thực hiện trong tuần--!-->
                    <nz-form-item>
                      <nz-form-label nzFor="daysOfWeekMultiple">
                        <div class="label">
                          <span>{{ 'schedule.backup.day.select' | i18n }} (<span style="color: rgba(252, 16, 16, 1); ">*</span>)</span>
                          <img style="margin-left: 5px;"
                               nz-popover
                               [nzPopoverContent]="'schedule.backup.vm.backup.volume.mode.day.tooltip' | i18n"
                               nzPopoverPlacement="bottom"
                               src="assets/imgs/pajamas_question.svg" alt="" />
                        </div>
                      </nz-form-label>
                      <nz-form-control nzDisableAutoTips [nzErrorTip]="daysOfWeekErrorTpl">
                        <nz-select formControlName="daysOfWeekMultiple"
                                   nzMode="multiple"
                                   nzSize="large"
                                   nzPlaceHolder="{{'schedule.backup.day.select' | i18n}}"
                                   [nzShowSearch]="false">
                          <nz-option *ngFor="let i of daysOfWeeks" [nzLabel]="i.label" [nzValue]="i.value"></nz-option>
                        </nz-select>
                        <ng-template #daysOfWeekErrorTpl let-control>
                          <ng-container *ngIf="control.hasError('required')">{{ 'schedule.backup.select.date' | i18n }}
                          </ng-container>
                        </ng-template>
                      </nz-form-control>
                    </nz-form-item>
                  </nz-col>
                </nz-row>
                <nz-row nzGutter="24" style="margin-bottom: 0;">
                  <nz-col nzSpan="12">
                    <nz-row nzGutter="24">
                      <nz-col nzSpan="12">
                        <span class="text-label">{{ 'app.info.backup.vm.total.storage'|i18n }}</span>
                      </nz-col>
                      <nz-col nzSpan="12" style="text-align: end;">
                        <span class="text-label">{{ sizeInCloudProject?.cloudProject?.quotaBackupVolumeInGb }} GB</span>
                      </nz-col>
                    </nz-row>
                    <nz-row nzGutter="24">
                      <nz-col nzSpan="12">
                        <span class="text-label">{{ 'app.backup.package.storage.used'|i18n }}</span>
                      </nz-col>
                      <nz-col nzSpan="12" style="text-align: end;">
                        <span class="text-label">{{ sizeInCloudProject?.cloudProjectResourceUsed?.backup }} GB</span>
                      </nz-col>
                    </nz-row>
                    <nz-row nzGutter="24">
                      <nz-col nzSpan="12">
                        <span class="text-label">{{ 'app.backup.package.storage.remaining'|i18n }}</span>
                      </nz-col>
                      <nz-col nzSpan="12" style="text-align: end;">
                        <span
                          class="text-label">{{ sizeInCloudProject?.cloudProject?.quotaBackupVolumeInGb - sizeInCloudProject?.cloudProjectResourceUsed?.backup }}
                          GB</span>
                      </nz-col>
                    </nz-row>
                  </nz-col>
                </nz-row>
              </div>
              <div *ngIf="modeSelected == 3 || modeSelected == 4">
                <nz-row nzGutter="24" style="margin-bottom: 0;">
                  <nz-col nzSpan="12">
                    <nz-row nzGutter="24">
                      <nz-col nzSpan="12">
                        <span class="text-label">{{ 'app.info.backup.vm.total.storage'|i18n }}</span>
                      </nz-col>
                      <nz-col nzSpan="12" style="text-align: end;">
                        <span class="text-label">{{ sizeInCloudProject?.cloudProject?.quotaBackupVolumeInGb }} GB</span>
                      </nz-col>
                    </nz-row>
                    <nz-row nzGutter="24">
                      <nz-col nzSpan="12">
                        <span class="text-label">{{ 'app.backup.package.storage.used'|i18n }}</span>
                      </nz-col>
                      <nz-col nzSpan="12" style="text-align: end;">
                        <span class="text-label">{{ sizeInCloudProject?.cloudProjectResourceUsed?.backup }} GB</span>
                      </nz-col>
                    </nz-row>
                    <nz-row nzGutter="24">
                      <nz-col nzSpan="12">
                        <span class="text-label">{{ 'app.backup.package.storage.remaining'|i18n }}</span>
                      </nz-col>
                      <nz-col nzSpan="12" style="text-align: end;">
                        <span
                          class="text-label">{{ sizeInCloudProject?.cloudProject?.quotaBackupVolumeInGb - sizeInCloudProject?.cloudProjectResourceUsed?.backup }}
                          GB</span>
                      </nz-col>
                    </nz-row>
                  </nz-col>
                </nz-row>
                <nz-row nzGutter="24" style="margin-bottom: 0;" *ngIf="modeSelected == 3 || modeSelected == 4">
                  <nz-col nzSpan="8">
                    <!---Thời gian thực hiện--!-->
                    <nz-form-item>
                      <nz-form-label>
                        <span>{{ 'app.cluster.action-time' | i18n }} (<span style="color: #EA3829;">*</span>)</span>
                        <img style="margin-left: 5px;"
                             nz-popover
                             [nzPopoverContent]="'schedule.backup.vm.backup.volume.mode.daily.tooltip' | i18n"
                             nzPopoverPlacement="bottom"
                             src="assets/imgs/pajamas_question.svg" alt="" />
                      </nz-form-label>
                      <nz-form-control nzDisableAutoTips [nzErrorTip]="timeErrorTpl">
                        <nz-time-picker formControlName=times
                                        nzSize="large"
                                        nzFormat="HH:mm"
                                        nzPlaceHolder="{{'schedule.backup.time.select' | i18n}}"
                                        style="width: 100%; border-radius: 8px;"></nz-time-picker>
                        <ng-template #timeErrorTpl let-control>
                          <ng-container *ngIf="control.hasError('required')">{{ 'validation.info.required' | i18n }}
                          </ng-container>
                        </ng-template>
                      </nz-form-control>
                    </nz-form-item>
                  </nz-col>
                  <nz-col nzSpan="8" *ngIf="modeSelected == 3">
                    <!---chọn tuần--!-->
                    <nz-form-item>
                      <nz-form-label nzFor="numberOfWeek">
                        <div class="label">
                          <span>{{ 'app.number.of.week.executed' | i18n }} (<span style="color: rgba(252, 16, 16, 1); ">*</span>)</span>
                          <img style="margin-left: 5px;"
                               nz-popover
                               [nzPopoverContent]="'schedule.backup.vm.backup.volume.mode.week.tooltip' | i18n"
                               nzPopoverPlacement="bottom"
                               src="assets/imgs/pajamas_question.svg" alt="" />
                        </div>
                      </nz-form-label>
                      <nz-form-control nzDisableAutoTips>
                        <nz-select
                          formControlName="numberOfWeek"
                          nzPlaceHolder="{{'app.number.of.week.executed' | i18n}}"
                          [nzShowSearch]="false"
                          nzSize="large"
                          [(ngModel)]="numberOfWeekChangeSelected"
                          (ngModelChange)="numberOfWeekChange($event)">
                          <nz-option
                            *ngFor="let i of numberOfWeeks"
                            [nzLabel]="i.label"
                            [nzValue]="i.value" />
                        </nz-select>
                      </nz-form-control>
                    </nz-form-item>
                  </nz-col>
                  <nz-col nzSpan="8" *ngIf="modeSelected == 3">
                    <!---Ngày thực hiện trong tuần--!-->
                    <nz-form-item>
                      <nz-form-label nzFor="daysOfWeek">
                        <div class="label">
                          <span>{{ 'schedule.backup.day.select' | i18n }} (<span style="color: rgba(252, 16, 16, 1); ">*</span>)</span>
                          <img style="margin-left: 5px;"
                               nz-popover
                               [nzPopoverContent]="'schedule.backup.vm.backup.volume.mode.day.tooltip' | i18n"
                               nzPopoverPlacement="bottom"
                               src="assets/imgs/pajamas_question.svg" alt="" />
                        </div>
                      </nz-form-label>
                      <nz-form-control nzDisableAutoTips [nzErrorTip]="daysOfWeekErrorTpl">
                        <nz-select formControlName="daysOfWeek"
                                   nzPlaceHolder="{{'schedule.backup.day.select' | i18n}}"
                                   nzSize="large"
                                   [nzShowSearch]="false"
                                   [(ngModel)]="daySelected"
                                   (ngModelChange)="dayOfWeekChange($event)">
                          <nz-option *ngFor="let i of daysOfWeeks"
                                     [nzLabel]="i.label"
                                     [nzValue]="i.value" />
                        </nz-select>
                        <ng-template #daysOfWeekErrorTpl let-control>
                          <ng-container *ngIf="control.hasError('required')">{{ 'schedule.backup.press.date' | i18n }}
                          </ng-container>
                        </ng-template>
                      </nz-form-control>
                    </nz-form-item>
                  </nz-col>
                  <nz-col nzSpan="8" *ngIf="modeSelected == 4">
                    <!---chọn tháng--!-->
                    <nz-form-item>
                      <nz-form-label nzFor="months">
                        <div class="label">
                        <span>{{ 'app.number.of.month.executed' | i18n }} (<span
                          style="color: #EA3829;">*</span>)</span>
                          <img style="margin-left: 5px;"
                               nz-popover
                               [nzPopoverContent]="'schedule.backup.vm.backup.volume.mode.month.tooltip' | i18n"
                               nzPopoverPlacement="bottom"
                               src="assets/imgs/pajamas_question.svg" alt="" />
                        </div>
                      </nz-form-label>
                      <nz-form-control nzDisableAutoTips [nzErrorTip]="monthsErrorTpl">
                        <nz-input-number style="width:100%; margin-left: 0;"
                                         class="input-custom"
                                         formControlName="months"
                                         nzMin="1"
                                         nzMax="24"
                                         nzStep="1" (input)="inputMonthMode($event)"/>
                        <ng-template #monthsErrorTpl let-control>
                          <ng-container *ngIf="control.hasError('required')">{{ 'schedule.backup.0.to.24' | i18n }}
                          </ng-container>
                          <ng-container *ngIf="control.hasError('max')">{{ 'schedule.backup.0.to.24' | i18n }}
                          </ng-container>
                          <ng-container *ngIf="control.hasError('min')">{{ 'schedule.backup.0.to.24' | i18n }}
                          </ng-container>
                        </ng-template>
                      </nz-form-control>
                    </nz-form-item>
                  </nz-col>
                  <nz-col nzSpan="8" *ngIf="modeSelected == 4">
                    <!---Ngày thực hiện trong tháng--!-->
                    <nz-form-item>
                      <nz-form-label nzFor="date">
                        <div class="label">
                          <span>{{ 'app.execution.date' | i18n }} (<span style="color: #EA3829;">*</span>)</span>
                          <img style="margin-left: 5px;"
                               nz-popover
                               [nzPopoverContent]="'schedule.backup.vm.backup.volume.mode.date.tooltip' | i18n"
                               nzPopoverPlacement="bottom"
                               src="assets/imgs/pajamas_question.svg" alt="" />
                        </div>
                      </nz-form-label>
                      <nz-form-control nzDisableAutoTips [nzErrorTip]="dateErrorTpl">
                        <nz-input-number formControlName="date"
                                         style="width:100%; margin-left: 0;"
                                         class="input-custom"
                                         [nzMin]="1"
                                         nzMax="30"
                                         nzStep="1" (input)="inputDayInMonthMode($event)"/>
                        <ng-template #dateErrorTpl let-control>
                          <ng-container *ngIf="control.hasError('required')">{{ 'schedule.backup.0.to.31' | i18n }}
                          </ng-container>
                          <ng-container *ngIf="control.hasError('max')">{{ 'schedule.backup.0.to.31' | i18n }}
                          </ng-container>
                          <ng-container *ngIf="control.hasError('min')">{{ 'schedule.backup.0.to.31' | i18n }}
                          </ng-container>
                        </ng-template>
                      </nz-form-control>
                    </nz-form-item>
                  </nz-col>
                </nz-row>
              </div>
              <div *ngIf="((sizeOfVolume) * validateForm.get('formVolume').get('maxBackup').value) >
              (sizeInCloudProject?.cloudProject?.quotaBackupVolumeInGb - sizeInCloudProject?.cloudProjectResourceUsed?.backup)"
                   style="margin-bottom: 10px;">
                <nz-alert nzType="warning"
                          [nzMessage]="titleMessage"
                          nzShowIcon></nz-alert>
                <ng-template #titleMessage>
              <span
                style="color: #FF0000;">{{
                  'schedule.backup.alert.storage.vpc'|i18n:
                    { storage: ((sizeOfVolume) * validateForm.get('formVolume').get('maxBackup').value) }
                }} <a
                  [routerLink]="'/app-smart-cloud/project/detail/' + project">{{ projectName }}</a> {{ 'schedule.backup.alert.storage.vpc1'|i18n }}</span>
                </ng-template>
              </div>
              <nz-form-item>
                <nz-form-label nzFor="description">
                  <div class="label">
                    <span>{{ 'app.service.description' | i18n }}</span>
                  </div>
                </nz-form-label>
                <nz-form-control nzDisableAutoTips [nzErrorTip]="descriptionErrorTpl">
                  <nz-textarea-count nzMaxCharacterCount="255">
                    <textarea nz-input
                              formControlName="description"
                              class="input-custom"
                              [placeholder]="'app.input.des'|i18n"
                              [nzAutosize]="{ minRows: 4, maxRows: 6 }"></textarea>
                  </nz-textarea-count>
                  <ng-template #descriptionErrorTpl let-control>
                    <ng-container *ngIf="control.hasError('required')">{{ 'validation.info.required' | i18n }}
                    </ng-container>
                    <ng-container *ngIf="control.hasError('maxlength')">{{ 'schedule.backup.validate4' | i18n }}
                    </ng-container>
                  </ng-template>
                </nz-form-control>
              </nz-form-item>
            </div>
          </nz-card>
        </nz-col>
        <nz-col nzSpan="8">
          <!---CARD THÀNH TIỀN--!-->
          <nz-affix [nzOffsetTop]="72">
            <nz-card class="border-card">
              <div style="margin-bottom: 20px">
                <span class="text-card-header">{{ 'app.config.parameters'|i18n }}</span>
              </div>
              <div class="card-money">
                <div *ngIf="selectedOption == 'instance'">
                  <div class="text-value">{{ 'schedule.backup.label.name'|i18n }}</div>
                  <div style="margin-top: 10px"
                       class="text-label">{{ validateForm.get('formInstance').get('name').value }}
                  </div>
                  <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                  <div class="text-value">{{ 'app.instances' | i18n }}</div>
                  <div style="margin-top: 10px" class="text-label">{{ instanceName }}</div>
                  <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                  <div class="text-value">{{ 'schedule.backup.number.save' | i18n }}</div>
                  <div style="margin-top: 10px"
                       class="text-label">{{ validateForm.get('formInstance').get('maxBackup').value }}
                  </div>
                  <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                  <div class="text-value">{{ 'schedule.backup.mode' | i18n }}</div>
                  <div style="margin-top: 10px" class="text-label"
                       [ngSwitch]="validateForm.get('formInstance').get('mode').value">
                    <span *ngSwitchCase="1">{{ 'schedule.backup.label.each.day'|i18n }}</span>
                    <span *ngSwitchCase="2">{{ 'schedule.backup.label.each.number.day'|i18n }}</span>
                    <span *ngSwitchCase="3">{{ 'schedule.backup.label.each.week'|i18n }}</span>
                    <span *ngSwitchCase="4">{{ 'schedule.backup.label.each.month'|i18n }}</span>
                  </div>
                  <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                  <div class="text-value">{{ 'app.info.backup.vm.total.storage' | i18n }}</div>
                  <div style="margin-top: 10px" class="text-label">{{ sizeInCloudProject.cloudProject.quotaBackupVolumeInGb }} GB</div>
                  <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                  <div class="text-value">{{ 'app.cluster.action-time' | i18n }}</div>
                  <div style="margin-top: 10px"
                       class="text-label">{{ validateForm.get('formInstance')?.get('times')?.value | date: 'HH:mm' }}
                  </div>
                  <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                  <div *ngIf="modeSelected == 2">
                    <div class="text-value">{{ 'app.choose.day.of.week' | i18n }}</div>
                    <div style="margin-top: 10px" class="text-label" *ngFor="let data of daysOfWeeks">
                    <span *ngFor="let i of validateForm.get('formInstance').get('daysOfWeekMultiple').value;">
                      <span *ngIf="data.value === i">{{ data.label }}</span>
                    </span>
                    </div>
                  </div>
                  <div *ngIf="modeSelected == 3">
                    <div class="text-value">{{ 'app.number.of.week.executed' | i18n }}</div>
                    <div style="margin-top: 10px"
                         class="text-label">{{ validateForm.get('formInstance').get('numberOfWeek').value }} {{ 'app.Week' |i18n }}
                    </div>
                    <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                    <div class="text-value">{{ 'schedule.backup.day.select' | i18n }}</div>
                    <div style="margin-top: 10px" class="text-label" *ngFor="let data of daysOfWeeks">
                    <span
                      *ngIf="data.value === validateForm.get('formInstance').get('daysOfWeek').value">{{ data.label }}</span>
                    </div>
                  </div>
                  <!--                  <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>-->
                  <div *ngIf="modeSelected == 4">
                    <div class="text-value">{{ 'app.number.of.month.executed' | i18n }}</div>
                    <div style="margin-top: 10px"
                         class="text-label">{{ validateForm.get('formInstance').get('months').value }}  {{ 'app.Month'|i18n }}
                    </div>
                    <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                    <div class="text-value">{{ 'app.execution.date' | i18n }}</div>
                    <div style="margin-top: 10px"
                         class="text-label">{{ validateForm.get('formInstance').get('date').value }}
                    </div>
                    <!--                    <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>-->
                  </div>
                </div>
              </div>
              <!---Máy ảo--!-->
              <div *ngIf="selectedOption === 'instance'">
                <nz-row>
                  <nz-col style="width: 100%">
                    <button style="width: 100%" nz-button nzSize="large" nzType="primary"
                            [nzLoading]="isLoadingAction"
                            [disabled]="validateForm.get('formInstance')?.invalid"
                            (click)="doCreateScheduleBackup()">
                      <img src="assets/imgs/wallet.svg" style="margin-right: 5px; padding-bottom: 5px;" />
                      <span [style.color]="validateForm.get('formInstance')?.invalid ? 'gray' : 'white'">
                        {{ 'app.button.createNew' |i18n }}
                      </span>

                    </button>
                  </nz-col>
                </nz-row>
              </div>
              <div class="card-money">
                <div *ngIf="selectedOption == 'volume'">
                  <div class="text-value">{{ 'schedule.backup.label.name'|i18n }}</div>
                  <div style="margin-top: 10px"
                       class="text-label">{{ validateForm.get('formVolume').get('name').value }}
                  </div>
                  <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                  <div class="text-value">{{ 'app.volume.name' | i18n }}</div>
                  <div style="margin-top: 10px"
                       class="text-label">{{ volumeName }}
                  </div>
                  <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                  <div class="text-value">{{ 'schedule.backup.number.save' | i18n }}</div>
                  <div style="margin-top: 10px"
                       class="text-label">{{ validateForm.get('formVolume').get('maxBackup').value }}
                  </div>
                  <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                  <div class="text-value">{{ 'schedule.backup.mode' | i18n }}</div>
                  <div style="margin-top: 10px" class="text-label"
                       [ngSwitch]="validateForm.get('formVolume').get('mode').value">
                    <span *ngSwitchCase="1">{{ 'schedule.backup.label.each.day'|i18n }}</span>
                    <span *ngSwitchCase="2">{{ 'schedule.backup.label.each.number.day'|i18n }}</span>
                    <span *ngSwitchCase="3">{{ 'schedule.backup.label.each.week'|i18n }}</span>
                    <span *ngSwitchCase="4">{{ 'schedule.backup.label.each.month'|i18n }}</span>
                  </div>
                  <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                  <div class="text-value">{{ 'app.info.backup.vm.total.storage' | i18n }}</div>
                  <div style="margin-top: 10px" class="text-label">{{ sizeInCloudProject.cloudProject.quotaBackupVolumeInGb }} GB</div>
                  <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                  <div class="text-value">{{ 'app.cluster.action-time' | i18n }}</div>
                  <div style="margin-top: 10px"
                       class="text-label">{{ validateForm.get('formVolume')?.get('times')?.value | date: 'HH:mm' }}
                  </div>
                  <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                  <div *ngIf="modeSelected == 2">
                    <div class="text-value">{{ 'app.choose.day.of.week' | i18n }}</div>
                    <div style="margin-top: 10px" class="text-label" *ngFor="let data of daysOfWeeks">
                    <span *ngFor="let i of validateForm.get('formVolume').get('daysOfWeekMultiple').value;">
                      <span *ngIf="data.value === i">{{ data.label }}</span>
                    </span>
                    </div>
                  </div>
                  <div *ngIf="modeSelected == 3">
                    <div class="text-value">{{ 'app.number.of.week.executed' | i18n }}</div>
                    <div style="margin-top: 10px"
                         class="text-label">{{ validateForm.get('formVolume').get('numberOfWeek').value }} {{ 'app.Week' |i18n }}
                    </div>
                    <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                    <div class="text-value">{{ 'schedule.backup.day.select' | i18n }}</div>
                    <div style="margin-top: 10px" class="text-label" *ngFor="let data of daysOfWeeks">
                    <span
                      *ngIf="data.value === validateForm.get('formVolume').get('daysOfWeek').value">{{ data.label }}</span>
                    </div>
                    <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                  </div>
                  <div *ngIf="modeSelected == 4">
                    <div class="text-value">{{ 'app.number.of.month.executed' | i18n }}</div>
                    <div style="margin-top: 10px"
                         class="text-label">{{ validateForm.get('formVolume').get('months').value }}  {{ 'app.Month'|i18n }}
                    </div>
                    <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
                    <div class="text-value">{{ 'app.execution.date' | i18n }}</div>
                    <div style="margin-top: 10px"
                         class="text-label">{{ validateForm.get('formVolume').get('date').value }}
                    </div>
                  </div>

                </div>
              </div>
              <!---Volume--!-->
              <div *ngIf="selectedOption === 'volume'">
                <nz-row>
                  <nz-col style="width: 100%">
                    <button style="width: 100%" nz-button nzSize="large" nzType="primary"
                            [nzLoading]="isLoadingAction"
                            [disabled]="validateForm.get('formVolume')?.invalid"
                            (click)="doCreateScheduleBackup()">
                      <img src="assets/imgs/wallet.svg" style="margin-right: 5px; padding-bottom: 5px;" />
                      <span [style.color]="validateForm.get('formVolume')?.invalid ? 'gray' : 'white'">
                        {{ 'app.button.createNew' |i18n }}
                      </span>

                    </button>
                  </nz-col>
                </nz-row>
              </div>
            </nz-card>
          </nz-affix>
        </nz-col>
      </nz-row>
    </form>
  </nz-content>
</nz-spin>
