<page-header [breadcrumb]="breadcrumb"
             [action]="action"
             [title]="'Danh sách Volume'" xmlns="http://www.w3.org/1999/html">
    <ng-template #breadcrumb>
        <nz-breadcrumb>
            <nz-breadcrumb-item>Trang chủ</nz-breadcrumb-item>
            <nz-breadcrumb-item>
                Dịch vụ hạ tầng
            </nz-breadcrumb-item>
            <nz-breadcrumb-item>
                Block Storage
            </nz-breadcrumb-item>
            <nz-breadcrumb-item>
                <a routerLink="/app-smart-cloud/volumes">Volume</a>
            </nz-breadcrumb-item>
        </nz-breadcrumb>
    </ng-template>
    <ng-template #action>
        <div class="alain-custom-action text-right">
            <region-select-dropdown (valueChanged)="regionChanged($event)"></region-select-dropdown>
            <project-select-dropdown (valueChanged)="projectChanged($event)"
                                     [regionId]="region"></project-select-dropdown>
        </div>
    </ng-template>
</page-header>
<nz-content>
<!--    <div class="search-volume" *ngIf="!isBlankVolume; else elsePage">-->
        <nz-card >
            <nz-row nzJustify="space-between">
                <nz-col nzSpan="16">
                    <nz-select [nzPlaceHolder]="'Trạng thái'"
                               style="width: 150px; border-radius: 8px;"
                               [(ngModel)]="selectedValue"
                               nz-tooltip
                               (ngModelChange)="onChange($event)"
                               nzTooltipTitle="Tìm kiếm theo trạng thái"
                               nzTooltipPlacement="bottom"
                               nzShowSearch="false">
                        <nz-option *ngFor="let item of options" [nzValue]="item.value" [nzLabel]="item.label"></nz-option>
                    </nz-select>
                    <nz-input-group [nzSuffix]="suffixIconSearch"
                                    style="margin-left: 15px; width: 250px; border-radius: 8px;">
                        <input nz-input
                               [(ngModel)]="value"
                               (input)="onInputChange($event.target['value'])"
                               [placeholder]="'Tìm kiếm'"/>
                    </nz-input-group>
                    <ng-template #suffixIconSearch>
                        <span nz-icon nzType="search"></span>
                    </ng-template>
                </nz-col>
                <nz-col nzSpan="8" style="flex:none;">
                    <button class="btn-create"
                            nz-button
                            nzType="primary"
                            (click)="navigateToCreateVolume()">
                        <span nz-icon nzType="plus" nzTheme="outline"></span>
                        Tạo mới Volume
                    </button>
                </nz-col>
            </nz-row>
            <nz-table #fixedTable
                      style="margin-top: 15px;"
                      nzShowPagination
                      [nzScroll]="{ x: '100%', y: '55vh' }"
                      [nzData]="response?.records"
                      [nzPageSize]="response?.pageSize"
                      (nzPageSizeChange)="onPageSizeChange($event)"
                      [nzPageIndex]="response?.currentPage"
                      (nzPageIndexChange)="onPageIndexChange($event)"
                      [nzTotal]="response?.totalCount"
                      [nzFrontPagination]="false"
                      [nzLoading]="isLoading">
                <thead>
                    <tr>
                        <th nzLeft>Tên Volume</th>
                        <th nzBreakWord>Dung lượng (GB)</th>
                        <th nzBreakWord>IOPS</th>
                        <th nzBreakWord>Trạng thái</th>
                        <th nzBreakWord>Trạng thái tác vụ</th>
                        <th nzBreakWord>Máy ảo</th>
                        <th nzBreakWord>Thao tác</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let data of fixedTable.data">
                        <td nzLeft><a [routerLink]="'/app-smart-cloud/volume/detail/' + data.id">{{data.name}}</a></td>
                        <td nzBreakWord>{{data.sizeInGB}}</td>
                        <td nzBreakWord>
                            <div *ngIf="data.iops == null">200</div>
                            <div *ngIf="data.iops != null">{{data.iops}}</div>
                        </td>
                        <td nzBreakWord>
                            <div class="status" [ngSwitch]="data.status">
                                <span class="available" *ngSwitchCase="'KHOITAO'">
                                            Đang hoạt động
                                          </span>
                                <span class="available" *ngSwitchCase="'CREATING'">
                                            Đang khởi tạo
                                          </span>
                                <span class="suspended" *ngSwitchCase="'SUSPENDED'">
                                            Tạm dừng
                                          </span>
                                <span class="suspended" *ngSwitchCase="'ERROR'">
                                            Lỗi
                                          </span>
                                <span class="suspended" *ngSwitchCase="'DELETING'">
                                            Đang xóa
                                          </span>
                            </div>
                        </td>
                        <td nzBreakWord>
                            <div>
                                <span style="color: #0066B3; margin-right: 20px; cursor: pointer;" nz-icon nzType="plus"
                                      nzTheme="outline"
                                      nz-popover
                                      [nzPopoverContent]="'Gắn Volume'"
                                      nzPopoverPlacement="bottom"></span>
                                <span style="color: #0066B3; margin-right: 20px; cursor: pointer;" nz-icon nzType="close"
                                      nzTheme="outline" nz-popover
                                      [nzPopoverContent]="'Gỡ Volume'"
                                      nzPopoverPlacement="bottom"></span>
                                <span style="color: #0066B3; margin-right: 20px; cursor: pointer;" nz-icon nzType="calendar"
                                      nzTheme="outline" nz-popover
                                      [nzPopoverContent]="'Tạo lịch Snapshot'"
                                      nzPopoverPlacement="bottom"></span>
                                <span style="color: #0066B3; margin-right: 20px; cursor: pointer;" nz-icon nzType="delete"
                                      nzTheme="outline" nz-popover
                                      [nzPopoverContent]="'Xóa'"
                                      nzPopoverPlacement="bottom"></span>
                                <span class="more" nz-icon nzType="more" nzTheme="outline">
                                </span>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </nz-table>

        </nz-card>
<!--    </div>-->
</nz-content>
<!--<ng-template #elsePage>-->
<!--    <nz-card>-->
<!--        <result>-->
<!--            <img nz-image style="height: 100%; width: 100%;" nzSrc="assets/imgs/blank_volume.png" alt=""/>-->
<!--            <button nz-button [nzType]="'primary'" (click)="navigateToCreateVolume()">-->
<!--                Khởi tạo ngay-->
<!--            </button>-->
<!--        </result>-->
<!--    </nz-card>-->
<!--</ng-template>-->

