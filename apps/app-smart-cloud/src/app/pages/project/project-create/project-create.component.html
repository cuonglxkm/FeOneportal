<page-header [breadcrumb]="breadcrumb" [action]="action" [title]="('project.create' | i18n)">
  <ng-template #breadcrumb>
    <nz-breadcrumb [nzSeparator]="iconTemplate">
      <nz-breadcrumb-item><a [routerLink]="['/']">{{ 'app.breadcrumb.home' | i18n }}</a></nz-breadcrumb-item>
      <nz-breadcrumb-item><a [routerLink]="['/app-smart-cloud/project']">Quản lý VPC</a>
      </nz-breadcrumb-item>
      <nz-breadcrumb-item>{{ 'project.create' | i18n }}</nz-breadcrumb-item>
    </nz-breadcrumb>
    <ng-template #iconTemplate><one-portal-svg-icon [icon]="'icon_breadcrumb'"></one-portal-svg-icon></ng-template>
  </ng-template>
  <ng-template #action>
    <div class="alain-custom-action text-right">
      <share-users-combobox></share-users-combobox>
      <region-select-dropdown (regionChange)="onRegionChanged($event)" (valueChanged)="onRegionChange($event)"></region-select-dropdown>
    </div>
  </ng-template>
</page-header>
<!---------------FORM-------------->
<form nz-form [formGroup]="form" [nzLayout]="'vertical'">
  <nz-row nzGutter="24">
    <nz-col nzSpan="16">
      <!---------------CARD-THÔNG TIN VPC-------------->
      <nz-card class="text-label" nzTitle="" style="border-radius: 8px;">
        <div style="margin-bottom: 20px">
          <span class="text-card-header">{{ 'project.note24' | i18n }}</span>
        </div>
        <nz-form-item>
          <nz-form-label>{{ 'project.note19' | i18n }}(<span class="text-red">*</span>)<img style="margin-left: 10px"
              nz-tooltip="{{ 'project.note16' | i18n }}" src="assets/imgs/pajamas_question.svg"
              alt="" /></nz-form-label>
          <nz-form-control [nzErrorTip]="nameErrorTpl">
            <input nz-input placeholder="{{ 'project.note33' | i18n }}" style="width: 100%" formControlName="name"
              maxlength="50" class="custom-input">
            <ng-template #nameErrorTpl let-control>
              <ng-container *ngIf="control.hasError('required')">{{ 'validation.info.required' | i18n }} </ng-container>
              <ng-container *ngIf="control.hasError('pattern')">{{'validation.project.required.name'|i18n}}
              </ng-container>
            </ng-template>
          </nz-form-control>
        </nz-form-item>
        <nz-form-item>
          <nz-form-label>{{ 'app.service.description' | i18n }}</nz-form-label>
          <nz-form-control>
            <textarea maxlength="255" nz-input [nzAutosize]="{ minRows: 3 }"
              placeholder="{{ 'volume.tooltip.input.description' | i18n }}" style="width: 100%"
              formControlName="description"></textarea>
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label>{{ 'project.note35' | i18n }}(<span class="text-red">*</span>)
            <img style="margin-left: 10px" nz-tooltip="{{ 'project.note34' | i18n }}"
              src="assets/imgs/pajamas_question.svg" alt="" /></nz-form-label>
          <nz-radio-group [(ngModel)]="vpcType" [ngModelOptions]="{standalone: true}" (ngModelChange)="calculate(null)"
            nzSize="large">
            <nz-row [nzGutter]="{ xs: 24, sm: 24, md: 24, lg: 24 }" style="margin-top: 10px">
              <nz-col [nzLg]="12" [nzMd]="12" [nzSm]="24" [nzXl]="12" [nzXs]="24">
                <nz-card style="border-radius: 8px" [nzAlign]="'middle'" [ngStyle]="{
                      border: activeNoneVpc
                    ? '1px solid #0066B3'
                    : '1px solid #DADADA',
                  }">
                  <nz-row nzGutter="16">
                    <nz-col nzSpan="20">
                      <nz-card-meta [nzAvatar]="nzAvatarselectedHDDorSSD1" [nzTitle]="nzTitleselectedHDDorSSD1"
                        [nzDescription]="nzDescriptionselectedHDDorSSD1">
                        <ng-template #nzAvatarselectedHDDorSSD1>
                          <label nz-radio nzValue="0">
                          </label>
                        </ng-template>
                        <ng-template #nzTitleselectedHDDorSSD1>
                          <b>VPC mặc định</b>
                        </ng-template>
                        <ng-template #nzDescriptionselectedHDDorSSD1>
                          <ellipsis class="text-custom">
                            {{ 'project.note36' | i18n }}
                          </ellipsis>
                        </ng-template>
                      </nz-card-meta>
                    </nz-col>
                    <nz-col style="
                      display: flex;
                      align-items: center;
                      margin-top: -24px;
                    " [ngStyle]="{ height: cardHeight,}" nzSpan="4">
                    </nz-col>
                  </nz-row>
                </nz-card>
              </nz-col>
              <nz-col [nzLg]="12" [nzMd]="12" [nzSm]="24" [nzXl]="12" [nzXs]="24">
                <nz-card style="border-radius: 8px" [nzAlign]="'middle'" [ngStyle]="{
                      border: activeVpc
                    ? '1px solid #0066B3'
                    : '1px solid #DADADA',

                  }">
                  <nz-row nzGutter="16">
                    <nz-col nzSpan="20">
                      <nz-card-meta [nzAvatar]="nzAvatarselectedHDDorSSD2" [nzTitle]="nzTitleselectedHDDorSSD2"
                        [nzDescription]="nzDescriptionselectedHDDorSSD2">
                        <ng-template #nzAvatarselectedHDDorSSD2>
                          <label nz-radio nzValue="1"></label>
                        </ng-template>
                        <ng-template #nzTitleselectedHDDorSSD2>
                          <b>VPC tuỳ biến</b>
                        </ng-template>
                        <ng-template #nzDescriptionselectedHDDorSSD2>
                          <ellipsis class="text-custom">
                            {{ 'project.note37' | i18n }}
                          </ellipsis>
                        </ng-template>
                      </nz-card-meta>
                    </nz-col>
                    <nz-col style="
                      display: flex;
                      align-items: center;
                      margin-top: -24px;
                    " [ngStyle]="{
                          height: cardHeight,
                        }" nzSpan="4">
                    </nz-col>
                  </nz-row>
                </nz-card>
              </nz-col>
            </nz-row>
          </nz-radio-group>
        </nz-form-item>
        <!-- <div *ngIf="vpcType != '1'">
          <div class="text-card-header" style="margin-bottom: 20px">{{ 'app.info' | i18n }} Network</div>
          <nz-row>
            <div style="margin-right: 10px;">{{ 'app.payment-detail.quantity' | i18n }} Network:</div>
            <div>{{ nwNormal }}</div>
          </nz-row>
          <nz-row>
            <div style="margin-right: 10px;">{{ 'app.payment-detail.quantity' | i18n }} Routers:</div>
            <div>{{ routerNormal }}</div>
          </nz-row>
          <nz-row>
            <div style="margin-right: 10px;">{{ 'app.payment-detail.quantity' | i18n }} Security Group:</div>
            <div>{{ sgNormal }}</div>
          </nz-row>
        </div> -->
        <!-- <div *ngIf="vpcType == '1'">
          <nz-tabset nzCentered nzSize="large" (nzSelectChange)="changeTab($event)">
            <nz-tab nzTitle="{{ 'config.package' | i18n }}">
              <ngu-carousel #myCarouselFlavor [inputs]="carouselTileConfig" [dataSource]="listOfferFlavors">
                <ngu-tile *nguCarouselDef="let item; index as i; let ani = animate" [@slider]="ani">
                  <div style="cursor: pointer" (click)="onInputFlavors(item.id,item.offerName);"
                    [id]="'flavor_' + item.id">
                    <nz-row>
                      <nz-col style="padding-bottom: 5px" class="newClassFlavor text-center"
                        [class.initialClassFlavor]=" selectedElementFlavor === 'flavor_' + item.id">
                        <div style="position: relative;">
                          <span class="nameFlavor"
                            [class.initialNameFlavor]="selectedElementFlavor === 'flavor_' + item.id">{{ item.offerName
                            }}</span>
                          <div style="margin-top: -16px">
                            <img style="width: 80%"
                              [src]="selectedElementFlavor === 'flavor_' + item.id? 'assets/imgs/line2.svg': 'assets/imgs/line.svg'"
                              alt="" />
                          </div>
                          <span class="priceFlavor">{{ item.price.fixedPrice.amount | number:'1.0-0':'en-US' }}</span>
                          <span> {{ "app.payment-detail.month" | i18n }}</span>


                          <div style="z-index: 1;position: absolute; right: -5px; top: -5px;">
                            <img src="assets/imgs/mostpop.svg">
                          </div>
                          <div
                            style="width: 40px;height: 20px;background-color: red;border-radius: 5px;z-index: 1;position: absolute; right: 1%; top: 62%;">
                            <span style="color: whitesmoke">-30%</span>
                          </div>
                        </div>
                      </nz-col>
                    </nz-row>

                    <nz-row>
                      <nz-col style="width: 100%; padding-top: 5px"
                        [class.flavor-footer-active]="selectedElementFlavor === 'flavor_' + item.id"
                        [class.flavor-footer]="selectedElementFlavor != 'flavor_' + item.id">
                        <div>
                          <p>{{ item.description }}</p>
                        </div>
                      </nz-col>
                    </nz-row>
                  </div>
                </ngu-tile>

                <ul class="myPoint" NguCarouselPoint>
                  <li *ngFor="let i of myCarouselFlavor?.pointNumbers"
                    [class.active]="i === myCarouselFlavor?.activePoint" (click)="myCarouselFlavor?.moveTo(i)"></li>
                </ul>
              </ngu-carousel>
            </nz-tab>
            <nz-tab nzTitle="{{ 'custom.config.package' | i18n }}">
              <div class="ant-table">
                <table>
                  <thead class="ant-table-thead">
                    <tr>
                      <th>{{ 'app.resource' | i18n }}</th>
                      <th>{{ 'app.payment-detail.quantity' | i18n }}</th>
                      <th>{{ 'app.money.price' | i18n }}</th>
                    </tr>
                  </thead>
                  <tbody class="ant-table-tbody">
                    <tr>
                      <td width="60%">
                        VCPU (<span class="text-red">*</span>)
                        <nz-slider [nzMin]="1" [nzMax]="1000" [(ngModel)]="vCPU" (ngModelChange)="calculate(null)"
                          [ngModelOptions]="{standalone: true}"></nz-slider>
                      </td>
                      <td width="20%">
                        <nz-input-number [(ngModel)]="vCPU" (keydown)="checkPossiblePress($event)"
                          (ngModelChange)="calculate(null)" [ngModelOptions]="{standalone: true}" [nzMin]="1"
                          [nzMax]="1000" [nzStep]="1" nzSize="large"></nz-input-number>
                      </td>
                      <td width="20%">
                        <div class="text-right">{{ price.vcpu }} VND</div>
                        <div class="text-right" style="opacity: 0.5;">{{ price.vcpuPerUnit }} VND</div>
                      </td>
                    </tr>
                    <tr>
                      <td width="60%">
                        RAM (GB) (<span class="text-red">*</span>)
                        <nz-slider [nzMin]="1" [nzMax]="1000" [(ngModel)]="ram" (ngModelChange)="calculate(null)"
                          [ngModelOptions]="{standalone: true}"></nz-slider>
                      </td>
                      <td width="20%">
                        <nz-input-number [(ngModel)]="ram" (keydown)="checkPossiblePress($event)"
                          (ngModelChange)="calculate(null)" [ngModelOptions]="{standalone: true}" [nzMin]="1"
                          [nzStep]="1" nzSize="large"></nz-input-number>
                      </td>
                      <td width="20%">
                        <div class="text-right">{{ price.ram }} VND</div>
                        <div class="text-right" style="opacity: 0.5;">{{ price.ramPerUnit }} VND</div>
                      </td>
                    </tr>
                    <tr>
                      <td width="60%">
                        {{ "volume.table.title.storage" | i18n }} HHD (GB)
                        <nz-slider [nzMin]="1" [nzMax]="1000" [(ngModel)]="hhd" [ngModelOptions]="{standalone: true}"
                          (ngModelChange)="calculate(null)"></nz-slider>
                      </td>
                      <td width="20%">
                        <nz-input-number [(ngModel)]="hhd" (keydown)="checkPossiblePress($event)"
                          (ngModelChange)="calculate(null)" [ngModelOptions]="{standalone: true}" [nzMin]="0"
                          [nzStep]="1" nzSize="large"></nz-input-number>
                      </td>
                      <td width="20%">
                        <div class="text-right">{{ price.hhd }} VND</div>
                        <div class="text-right" style="opacity: 0.5;">{{ price.hhdPerUnit }} VND</div>
                      </td>
                    </tr>
                    <tr>
                      <td width="60%">
                        {{ "volume.table.title.storage" | i18n }} SSD (GB)
                        <nz-slider [nzMin]="1" [nzMax]="1000" [(ngModel)]="ssd" (ngModelChange)="calculate(null)"
                          [ngModelOptions]="{standalone: true}"></nz-slider>
                      </td>
                      <td width="20%">
                        <nz-input-number [(ngModel)]="ssd" (keydown)="checkPossiblePress($event)"
                          [ngModelOptions]="{standalone: true}" (ngModelChange)="calculate(null)" [nzMin]="0"
                          [nzStep]="1" nzSize="large"></nz-input-number>
                      </td>
                      <td width="20%">
                        <div class="text-right">{{ price.ssd }} VND</div>
                        <div class="text-right" style="opacity: 0.5;">{{ price.ssdPerUnit }} VND</div>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </nz-tab>
          </nz-tabset>
          <nz-row style="margin-top: 20px;margin-bottom: 10px;" nzGutter="16">
            <nz-col nzLg="24" nzMd="12" nzSm="24">
              <nz-form-item style="margin-bottom: 5px">
                <nz-form-label>{{ "time.used" | i18n }} (<span class="text-red">*</span>) -
                  {{ "app.month" | i18n }}
                </nz-form-label>
                <nz-form-control>
                  <nz-row>
                    <nz-input-number style="width: 50%; margin-left: -1px" [nzMin]="1" [nzMax]="100" [nzStep]="1"
                      (keydown)="checkPossiblePress($event)" formControlName="numOfMonth"
                      (ngModelChange)="onChangeTime()" nzSize="large"></nz-input-number>
                    <div class="text-custom-time" style="display: flex; margin-left: 20px;align-items: center;">
                      {{ "volume.table.title.create.date" | i18n }}: {{ today | date : 'dd/MM/yyyy' }}
                    </div>
                  </nz-row>
                </nz-form-control>
              </nz-form-item>
            </nz-col>
          </nz-row>
          <div class="text-custom-time" style="color: red;">
            {{ "volume.table.title.expire.date" | i18n }}: {{ expiredDate | date : 'dd/MM/yyyy' }}
          </div>
        </div> -->
      </nz-card>
      <nz-card *ngIf="vpcType != '1'">
        <div style="margin-bottom: 20px"><span class="text-card-header">Thông tin Networks</span></div>
        <div class="netword-card">
          <div nz-row [nzGutter]="24">
            <div nz-col nzXs="24" nzSm="12" nzMd="12" nzLg="12">
              <form nz-form>
                <nz-form-item class="mb-sm">
                  <nz-form-label class="label-fontsize text-label">{{ "app.order-detail.quantity" | i18n }}
                    Network</nz-form-label>
                  <nz-form-control>
                    <input nz-input type="text" [(ngModel)]="nwNormal" readonly class="custom-input" name="nwNormal"
                      disabled />
                  </nz-form-control>
                </nz-form-item>
              </form>
            </div>
            <div nz-col nzXs="24" nzSm="12" nzMd="12" nzLg="12">
              <form nz-form>
                <nz-form-item class="mb-sm">
                  <nz-form-label class="label-fontsize text-label">{{ 'app.payment-detail.quantity' | i18n }}
                    Routers</nz-form-label>
                  <nz-form-control>
                    <input nz-input type="text" [(ngModel)]="routerNormal" readonly class="custom-input"
                      name="routerNormal" disabled />
                  </nz-form-control>
                </nz-form-item>
              </form>
            </div>
            <div nz-col nzXs="24" nzSm="12" nzMd="12" nzLg="12" class="input-network">
              <form nz-form>
                <nz-form-item class="mb-sm">
                  <nz-form-label class="label-fontsize text-label">{{ 'app.payment-detail.quantity' | i18n }} Security
                    Group</nz-form-label>
                  <nz-form-control>
                    <input nz-input type="text" [(ngModel)]="sgNormal" readonly class="custom-input" name="sgNormal"
                      disabled />
                  </nz-form-control>
                </nz-form-item>
              </form>
            </div>
          </div>
        </div>
      </nz-card>
      <div *ngIf="vpcType == '1'">
        <nz-card>
          <div><span class="text-card-header">Thông tin Cấu hình</span></div>
          <div>
            <nz-tabset nzCentered nzSize="large" (nzSelectChange)="changeTab($event)">
              <nz-tab nzTitle="{{ 'config.package' | i18n }}">
                <ngu-carousel #myCarouselFlavor [inputs]="carouselTileConfig" [dataSource]="listOfferFlavors"
                  class="preconfigured-package">
                  <ngu-tile *nguCarouselDef="let item; index as i; let ani = animate" [@slider]="ani">
                    <div style="cursor: pointer" (click)="onInputFlavors(item.id,item.offerName);"
                      [id]="'flavor_' + item.id">
                      <nz-row class="border-bottom">
                        <nz-col style="padding-bottom: 5px" class="newClassFlavor text-center"
                          [class.initialClassFlavor]=" selectedElementFlavor === 'flavor_' + item.id">
                          <div style="position: relative;">
                            <div>
                              <p class="nameFlavor pt-3 mb-0 "
                                [class.initialNameFlavor]="selectedElementFlavor === 'flavor_' + item.id">{{
                                item.offerName
                                }}</p>
                              <div style="margin-top: -10px">
                                <img style="width: 80%"
                                  [src]="selectedElementFlavor === 'flavor_' + item.id? 'assets/imgs/line2.svg': 'assets/imgs/line.svg'"
                                  alt="" />
                              </div>
                              <span class="priceFlavor">{{ item.price.fixedPrice.amount | number:'1.0-0':'en-US'
                                }}</span>
                              <span> {{ "app.payment-detail.month" | i18n }}</span>
                              <div style="z-index: 1;position: absolute; right: -5px; top: -5px;">
                                <img src="assets/imgs/mostpop.svg">
                              </div>
                            </div>

                          </div>
                        </nz-col>
                      </nz-row>
                      <nz-row>
                        <nz-col style="width: 100%; padding-top: 5px"
                          [class.flavor-footer-active]="selectedElementFlavor === 'flavor_' + item.id"
                          [class.flavor-footer]="selectedElementFlavor != 'flavor_' + item.id">
                          <div class="mt-3">
                            <p>{{ item.description }}</p>
                          </div>
                        </nz-col>
                      </nz-row>
                    </div>
                  </ngu-tile>

                  <ul class="myPoint" NguCarouselPoint>
                    <li *ngFor="let i of myCarouselFlavor?.pointNumbers"
                      [class.active]="i === myCarouselFlavor?.activePoint" (click)="myCarouselFlavor?.moveTo(i)"></li>
                  </ul>
                </ngu-carousel>
              </nz-tab>
              <nz-tab nzTitle="Cấu hình tuỳ chọn">
                <div class="ant-table">
                  <table>
                    <thead class="ant-table-thead">
                      <tr>
                        <th>{{ 'app.resource' | i18n }}</th>
                        <th>{{ 'app.payment-detail.quantity' | i18n }}</th>
                        <th>Thành tiền/Đơn giá (VND)</th>
                      </tr>
                    </thead>
                    <tbody class="ant-table-tbody">
                      <tr>
                        <td width="50%">
                          vCPU (<span class="text-red">*</span>)
                          <nz-slider [nzMin]="0" [nzMax]="1000" [(ngModel)]="vCPU" (ngModelChange)="calculate(null)"
                            [ngModelOptions]="{standalone: true}"></nz-slider>
                        </td>
                        <td width="20%">
                          <nz-input-number [(ngModel)]="vCPU" (keydown)="checkPossiblePress($event)"
                            (ngModelChange)="calculate(null)" [ngModelOptions]="{standalone: true}" [nzMin]="0"
                            [nzMax]="1000" [nzStep]="1" nzSize="large"></nz-input-number>
                        </td>
                        <td width="30%">
                          <div class="text-right">{{ price.vcpu | formatPrice}} </div>
                          <div class="text-right" style="opacity: 0.5;">{{ price.vcpuPerUnit | formatPrice}} </div>
                        </td>
                      </tr>
                      <tr>
                        <td width="50%">
                          RAM (GB) (<span class="text-red">*</span>)
                          <nz-slider [nzMin]="0" [nzMax]="1000" [(ngModel)]="ram" (ngModelChange)="calculate(null)"
                            [ngModelOptions]="{standalone: true}"></nz-slider>
                        </td>
                        <td width="20%">
                          <nz-input-number [(ngModel)]="ram" (keydown)="checkPossiblePress($event)"
                            (ngModelChange)="calculate(null)" [ngModelOptions]="{standalone: true}" [nzMin]="0"
                            [nzStep]="1" nzSize="large"></nz-input-number>
                        </td>
                        <td width="30%">
                          <div class="text-right">{{ price.ram | formatPrice}} </div>
                          <div class="text-right" style="opacity: 0.5;">{{ price.ramPerUnit | formatPrice }} </div>
                        </td>
                      </tr>
                      <tr>
                        <td width="50%">
                          <div class="d-flex">
                            {{ "volume.table.title.storage" | i18n }} HDD (GB)
                            <p *ngIf="isRequired" class="ml-1 required"> (<span class="red-color">*</span>)</p>
                          </div>

                          <nz-slider [nzMin]="minBlock" [nzStep]="stepBlock" [nzMax]="maxBlock" [nzStep]="stepBlock"
                            [(ngModel)]="hhd" [ngModelOptions]="{standalone: true}"
                            (ngModelChange)="onInputChange($event, 'hhd')"></nz-slider>
                        </td>
                        <td width="20%">
                          <nz-input-number [(ngModel)]="hhd" name="hhd" (ngModelChange)="onInputChange($event, 'hhd')"
                            (keydown)="checkPossiblePress($event)" [ngModelOptions]="{standalone: true}"
                            [nzMin]="minBlock" id="number-hdd" [nzStep]="stepBlock" [nzMax]="maxBlock"
                            nzSize="large"></nz-input-number>


                        </td>
                        <td width="30%">
                          <div class="text-right">{{ price.hhd | formatPrice}} </div>
                          <div class="text-right" style="opacity: 0.5;">{{ price.hhdPerUnit | formatPrice}} </div>
                        </td>
                      </tr>
                      <tr>
                        <td width="50%">
                          <div class="d-flex">
                            {{ "volume.table.title.storage" | i18n }} SSD (GB)
                            <p *ngIf="isRequired" class="ml-1 required"> (<span class="red-color">*</span>)</p>
                          </div>

                          <nz-slider [nzMin]="minBlock" [nzMax]="maxBlock" [nzStep]="stepBlock" [(ngModel)]="ssd"
                            (ngModelChange)="onInputChange($event, 'ssd')"
                            [ngModelOptions]="{standalone: true}"></nz-slider>
                        </td>
                        <td width="20%">
                          <nz-input-number [(ngModel)]="ssd" (keydown)="checkPossiblePress($event)"
                            [ngModelOptions]="{standalone: true}" (ngModelChange)="onInputChange($event, 'ssd')"
                            [nzMin]="minBlock" [nzStep]="stepBlock" [nzMax]="maxBlock" nzSize="large"></nz-input-number>
                        </td>
                        <td width="30%">
                          <div class="text-right">{{ price.ssd | formatPrice}} </div>
                          <div class="text-right" style="opacity: 0.5;">{{ price.ssdPerUnit | formatPrice}} </div>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </nz-tab>
            </nz-tabset>

          </div>
        </nz-card>
        <nz-card style="border-radius: 8px; ">
          <div style="margin-bottom: 20px"><span class="text-card-header">Thông tin Networks</span></div>
          <div class="netword-card">
            <div nz-row [nzGutter]="24">
              <div nz-col nzXs="24" nzSm="12" nzMd="12" nzLg="12">
                <form nz-form>
                  <nz-form-item class="mb-sm">
                    <nz-form-label class="label-fontsize text-label">{{ "app.order-detail.quantity" | i18n }}
                      Network</nz-form-label>
                    <nz-form-control>
                      <input nz-input type="text" [(ngModel)]="nwNormal" readonly class="custom-input" name="nwNormal"
                        disabled />
                    </nz-form-control>
                  </nz-form-item>
                </form>
              </div>
              <div nz-col nzXs="24" nzSm="12" nzMd="12" nzLg="12">
                <form nz-form>
                  <nz-form-item class="mb-sm">
                    <nz-form-label class="label-fontsize text-label">{{ 'app.payment-detail.quantity' | i18n }}
                      Routers</nz-form-label>
                    <nz-form-control>
                      <input nz-input type="text" [(ngModel)]="routerNormal" readonly class="custom-input"
                        name="routerNormal" disabled />
                    </nz-form-control>
                  </nz-form-item>
                </form>
              </div>
              <div nz-col nzXs="24" nzSm="12" nzMd="12" nzLg="12" class="input-network">
                <form nz-form>
                  <nz-form-item class="mb-sm">
                    <nz-form-label class="label-fontsize text-label">{{ 'app.payment-detail.quantity' | i18n }} Security
                      Group</nz-form-label>
                    <nz-form-control>
                      <input nz-input type="text" [(ngModel)]="sgNormal" readonly class="custom-input" name="sgNormal"
                        disabled />
                    </nz-form-control>
                  </nz-form-item>
                </form>
              </div>
            </div>
          </div>


        </nz-card>
        <nz-card>
          <div class="d-flex " style="justify-content: space-between; align-items: center;">
            <div style="align-items: center" class="d-flex"><span class="text-card-header">Dịch vụ bổ sung</span></div>
            <div>
              <one-portal-svg-icon (click)="toggleBonusService()" [icon]="iconToggle"
                class="btn-view-service"></one-portal-svg-icon>

            </div>
          </div>

          <div *ngIf="activeBonusService">
            <div class="bonus-services" *ngIf="catalogStatus['ip'] || catalogStatus['ipv6']">
              <div class="title-bonus-services">
                <div><span class="text-card-header">IP</span></div>
                <one-portal-svg-icon *ngIf="trashIP" [icon]="'icon_trash'" class="icon-trash"
                  (click)="deleteIP()"></one-portal-svg-icon>
              </div>
              <div *ngIf="!activeIP">
                <button class="h-btn" nz-button nzType="default" (click)="initIP()">
                  <img style="padding-right: 10px; margin-top: -4px" src="assets/imgs/add.svg" alt="" />{{ "app.bonus" |
                  i18n }} IP
                </button>
              </div>
              <div *ngIf="activeIP">
                <nz-form-item>
                  <nz-form-label class="custom-label">Chọn dải IP kết nối Internet</nz-form-label>

                  <nz-form-control>
                    <nz-input-group nzCompact>
                      <nz-select nzSize="large" [nzLoading]="loadingIpConnectInternet"
                        [nzDisabled]="disableIpConnectInternet"
                        style="width: 60%; margin-left: -1px;border-radius: 10px;"
                        nzPlaceHolder="--{{'project.note40' | i18n}}--" [(ngModel)]="ipConnectInternet"
                        [ngModelOptions]="{standalone: true}" (ngModelChange)="openIpSubnet()">
                        <nz-option nzLabel="Không sử dụng" nzValue="" />
                        <nz-option *ngFor="let i of listIpConnectInternet" [nzLabel]="i.displayName"
                          [nzValue]="i.networkId +'--'+ i.displayName" />
                      </nz-select>
                    </nz-input-group>
                  </nz-form-control>

                </nz-form-item>
                <div>
                  <nz-row *ngIf="ipConnectInternet != '' && catalogStatus['ip']">
                    <!-- <nz-row *ngIf="ipConnectInternet != null && ipConnectInternet != ''"> -->
                    <nz-form-item style="width: 60%">
                      <nz-form-label class="custom-label">{{ "app.order-detail.quantity" | i18n }} IP
                        Floating</nz-form-label>
                      <nz-form-control>
                        <nz-input-number style="width: 100%; margin-left: -1px" [nzMin]="0" [nzStep]="1"
                          (keydown)="checkPossiblePress($event)" [(ngModel)]="numberIpFloating"
                          (ngModelChange)="calculate(null)" [ngModelOptions]="{ standalone: true }"
                          nzSize="large"></nz-input-number>
                      </nz-form-control>
                    </nz-form-item>
                    <nz-form-item style="width: 40%">
                      <nz-form-label class="custom-label" style="text-align: right">Thành tiền/Đơn giá (VND)

                      </nz-form-label>
                      <nz-form-control>
                        <div class="centered">
                          <p class="text-custom-price">
                            {{ price.IpFloating |formatPrice}}
                          </p>
                          <p class=" text-price-unit">
                            {{ price.IpFloatingUnit |formatPrice}}
                          </p>
                        </div>
                      </nz-form-control>
                    </nz-form-item>
                  </nz-row>
                  <nz-row *ngIf="catalogStatus['ip']">
                    <nz-form-item style="width: 60%">
                      <nz-form-label class="custom-label">{{ "app.order-detail.quantity" | i18n }} IP
                        Public</nz-form-label>
                      <nz-form-control>
                        <nz-input-number style="width: 100%; margin-left: -1px" [nzMin]="0" [nzStep]="1"
                          (keydown)="checkPossiblePress($event)" [(ngModel)]="numberIpPublic"
                          (ngModelChange)="calculate(null)" [ngModelOptions]="{ standalone: true }"
                          nzSize="large"></nz-input-number>
                      </nz-form-control>
                    </nz-form-item>
                    <nz-form-item style="width: 40%">
                      <nz-form-label class="custom-label" style="text-align: right">Thành tiền/Đơn giá (VND)

                      </nz-form-label>
                      <nz-form-control>
                        <div class="centered">
                          <p class="text-custom-price">
                            {{ price.IpPublic |formatPrice}}
                          </p>
                          <p class=" text-price-unit">
                            {{ price.IpPublicUnit |formatPrice }}
                          </p>
                        </div>
                      </nz-form-control>
                    </nz-form-item>
                  </nz-row>
                  <nz-row *ngIf="catalogStatus['ipv6']">
                    <nz-form-item style="width: 60%">
                      <nz-form-label class="custom-label">{{ "app.order-detail.quantity" | i18n }} IPv6</nz-form-label>
                      <nz-form-control>
                        <nz-input-number style="width: 100%; margin-left: -1px" [nzMin]="0" [nzStep]="1"
                          (keydown)="checkPossiblePress($event)" [(ngModel)]="numberIpv6"
                          (ngModelChange)="calculate(null)" [ngModelOptions]="{ standalone: true }"
                          nzSize="large"></nz-input-number>
                      </nz-form-control>
                    </nz-form-item>
                    <nz-form-item style="width: 40%">
                      <nz-form-label class="custom-label" style="text-align: right">Thành tiền/Đơn giá (VND)

                      </nz-form-label>
                      <nz-form-control>
                        <div class="centered">
                          <p class="text-custom-price">
                            {{ price.IpV6 |formatPrice}}
                          </p>
                          <p class=" text-price-unit">
                            {{ price.IpV6Unit |formatPrice }}
                          </p>
                        </div>
                      </nz-form-control>
                    </nz-form-item>
                  </nz-row>
                </div>

              </div>
              <nz-alert class="ant-alert-warning-custom" nzType="warning"
                nzDescription="Mua bổ sung IP giúp thuận tiện hơn trong quá trình sử dụng các dịch vụ của VNPT Cloud"
                nzShowIcon></nz-alert>
            </div>
            <div class="bonus-services"
              *ngIf="catalogStatus['volume-snapshot-hdd'] || catalogStatus['volume-snapshot-ssd']">
              <div class="title-bonus-services">
                <div><span class="text-card-header">Snapshot</span></div>
                <one-portal-svg-icon *ngIf="trashSnapshot" [icon]="'icon_trash'" class="icon-trash"
                  (click)="deleteSnapshot()"></one-portal-svg-icon>
              </div>
              <div *ngIf="!activeSnapshot">
                <button class="h-btn" nz-button nzType="default" (click)="initSnapshot()">
                  <img style="padding-right: 10px; margin-top: -4px" src="assets/imgs/add.svg" alt="" />{{ "app.bonus" |
                  i18n }} Snapshot
                </button>
              </div>
              <div *ngIf="activeSnapshot">
                <div class="ant-table">
                  <table *ngIf="catalogStatus['volume-snapshot-hdd']">
                    <td style="width:60%">
                      <nz-form-item>
                        <nz-form-label class="custom-label">Dung lượng HDD (GB)</nz-form-label>
                        <nz-form-control>
                          <nz-input-number style="width: 100%; margin-left: -1px" [nzMin]="minBlock"
                            [nzStep]="stepBlock" [nzMax]="maxBlock" name="snapshothdd"
                            (keydown)="checkPossiblePress($event)" [(ngModel)]="numberSnapshothdd"
                            (ngModelChange)="onInputChange($event, 'snapshothdd')"
                            [ngModelOptions]="{ standalone: true }" nzSize="large"></nz-input-number>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                    <td style="width:40%">
                      <nz-form-item>
                        <nz-form-label class="custom-label" style="text-align: right">Thành tiền/Đơn giá (VND)

                        </nz-form-label>
                        <nz-form-control>
                          <div class="centered">
                            <p class="text-custom-price">
                              {{ price.snapshothdd | formatPrice}}
                            </p>
                            <p class=" text-price-unit">
                              {{ price.snapshothddUnit | formatPrice}}
                            </p>
                          </div>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                  </table>
                  <table *ngIf="catalogStatus['volume-snapshot-ssd']">
                    <td style="width:60%">
                      <nz-form-item>
                        <nz-form-label class="custom-label">Dung lượng SSD (GB)</nz-form-label>
                        <nz-form-control>
                          <nz-input-number style="width: 100%; margin-left: -1px" [nzMin]="minBlock"
                            [nzStep]="stepBlock" [nzMax]="maxBlock" name="snapshotssd"
                            (keydown)="checkPossiblePress($event)" [(ngModel)]="numberSnapshotssd"
                            (ngModelChange)="onInputChange($event, 'snapshotssd')"
                            [ngModelOptions]="{ standalone: true }" nzSize="large"></nz-input-number>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                    <td style="width:40%">
                      <nz-form-item>
                        <nz-form-label class="custom-label" style="text-align: right">Thành tiền/Đơn giá (VND)

                        </nz-form-label>
                        <nz-form-control>
                          <div class="centered">
                            <p class="text-custom-price">
                              {{ price.snapshotssd | formatPrice}}
                            </p>
                            <p class=" text-price-unit">
                              {{ price.snapshotssdUnit | formatPrice}}
                            </p>
                          </div>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                  </table>
                </div>
              </div>

              <nz-alert class="ant-alert-warning-custom" nzType="warning"
                nzDescription="Giúp người dùng lưu lại trạng thái hiện tại của Volume/VM. Người dùng có thể sử dụng để sao lưu volume trước khi thực hiện 1 thao tác rủi ro đến dữ liệu trên VM."
                nzShowIcon></nz-alert>
            </div>
            <div class="bonus-services" *ngIf="catalogStatus['backup-volume']">
              <div class="title-bonus-services">
                <div><span class="text-card-header">Backup</span></div>
                <one-portal-svg-icon *ngIf="trashBackup" [icon]="'icon_trash'" class="icon-trash"
                  (click)="deleteBackup()"></one-portal-svg-icon>
              </div>
              <div *ngIf="!activeBackup">
                <button class="h-btn" nz-button nzType="default" (click)="initBackup()">
                  <img style="padding-right: 10px; margin-top: -4px" src="assets/imgs/add.svg" alt="" />{{ "app.bonus" |
                  i18n }} Backup
                </button>
              </div>
              <div *ngIf="activeBackup">
                <div class="ant-table">
                  <table>
                    <td style="width:60%">
                      <nz-form-item>
                        <nz-form-label class="custom-label">{{ "volume.table.title.storage" | i18n }} Backup Volume/VM
                          (GB)</nz-form-label>
                        <nz-form-control>
                          <!-- (keydown)="checkPossiblePress($event)" -->
                          <nz-input-number style="width: 100%; margin-left: -1px" [nzMin]="minBlock"
                            [nzStep]="stepBlock" [nzMax]="maxBlock" name="backup" (keydown)="checkPossiblePress($event)"
                            [(ngModel)]="numberBackup" (ngModelChange)="onInputChange($event, 'backup')"
                            [ngModelOptions]="{ standalone: true }" nzSize="large"></nz-input-number>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                    <td style="width:40%">
                      <nz-form-item>
                        <nz-form-label class="custom-label" style="text-align: right">Thành tiền/Đơn giá (VND)

                        </nz-form-label>
                        <nz-form-control>
                          <div class="centered">
                            <p class="text-custom-price">
                              {{ price.backup | formatPrice}}
                            </p>
                            <p class=" text-price-unit">
                              {{ price.backupUnit | formatPrice}}
                            </p>
                          </div>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                  </table>
                </div>
              </div>

              <nz-alert class="ant-alert-warning-custom" nzType="warning" nzDescription="{{'project.note47' | i18n}}"
                nzShowIcon></nz-alert>
            </div>


            <div class="bonus-services" *ngIf="catalogStatus['loadbalancer-sdn']">
              <div class="title-bonus-services">
                <div><span class="text-card-header">Load Balancer</span></div>
                <one-portal-svg-icon *ngIf="trashLoadBalancer" [icon]="'icon_trash'" class="icon-trash"
                  (click)="deleteLoadBalancer()"></one-portal-svg-icon>
              </div>
              <div *ngIf="!activeLoadBalancer">
                <button class="h-btn" nz-button nzType="default" (click)="initLoadBalancer()">
                  <img style="padding-right: 10px; margin-top: -4px" src="assets/imgs/add.svg" alt="" />{{ "app.bonus" |
                  i18n }} Load Balancer
                </button>
              </div>
              <div *ngIf="activeLoadBalancer">
                <div class="ant-table">
                  <table>
                    <td style="width:30%">
                      <nz-form-item>
                        <nz-form-label class="custom-label">{{ "app.order-detail.quantity" | i18n }}

                        </nz-form-label>
                        <nz-form-control>
                          <nz-input-number style="width: 90%; margin-left: -1px" [nzMin]="0" [nzStep]="1"
                            (keydown)="checkPossiblePress($event)" [(ngModel)]="numberLoadBalancer"
                            (ngModelChange)="calculate(null)" [ngModelOptions]="{ standalone: true }"
                            nzSize="large"></nz-input-number>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                    <td style="width:30%">
                      <nz-form-item>
                        <nz-form-label class="custom-label">Chọn gói</nz-form-label>
                        <nz-form-control>
                          <nz-input-group nzCompact>
                            <nz-select nzSize="large" [nzLoading]="false" [nzDisabled]="false"
                              style="width: 100%; margin-left: -1px;border-radius: 10px;" [(ngModel)]="loadBalancerId"
                              [ngModelOptions]="{ standalone: true }" (ngModelChange)="findNameLoadBalance($event)">
                              <nz-option *ngFor="let i of listLoadbalancer" [nzLabel]="i.offerName" [nzValue]="i.id" />
                            </nz-select>
                          </nz-input-group>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                    <td style="width:40%">
                      <nz-form-item>
                        <nz-form-label class="custom-label" style="text-align: right">Thành tiền/Đơn giá (VND)

                        </nz-form-label>
                        <nz-form-control>
                          <div class="centered">
                            <p class="text-custom-price">
                              {{ price.loadBalancer | formatPrice}}
                            </p>
                            <p class="text-price-unit">
                              {{ price.loadBalancerUnit | formatPrice}}
                            </p>
                          </div>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                  </table>
                </div>
              </div>
              <nz-alert class="ant-alert-warning-custom" nzType="warning" nzDescription="{{'project.note48' | i18n}}"
                nzShowIcon></nz-alert>
            </div>

            <div class="bonus-services" *ngIf="catalogStatus['file-storage'] || catalogStatus['file-storage-snapshot']">
              <div class="title-bonus-services">
                <div><span class="text-card-header">File Storage</span></div>
                <one-portal-svg-icon *ngIf="trashFileStorage" [icon]="'icon_trash'" class="icon-trash"
                  (click)="deleteFileStorage()"></one-portal-svg-icon>
              </div>
              <div *ngIf="!activeFileStorage">
                <button class="h-btn" nz-button nzType="default" (click)="initFileStorage()">
                  <img style="padding-right: 10px; margin-top: -4px" src="assets/imgs/add.svg" alt="" />{{ "app.bonus" |
                  i18n }} File Storage
                </button>
              </div>
              <div *ngIf="activeFileStorage">
                <div class="ant-table">
                  <table *ngIf="catalogStatus['file-storage']">
                    <td style="width:60%">
                      <nz-form-item>
                        <nz-form-label class="custom-label">{{ "volume.table.title.storage" | i18n }} File System
                          (GB)</nz-form-label>
                        <nz-form-control>
                          <nz-row>
                            <nz-input-number style="width: 100%;margin-left: -1px" [nzMin]="minBlock"
                              [nzStep]="stepBlock" [nzMax]="maxBlock" (keydown)="checkPossiblePress($event)"
                              [(ngModel)]="numberFileSystem" (ngModelChange)="onInputChange($event, 'fileSystem')"
                              [ngModelOptions]="{ standalone: true }" nzSize="large"></nz-input-number>
                          </nz-row>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                    <td style="width:40%">
                      <nz-form-item>
                        <nz-form-label class="custom-label" style="text-align: right">Thành tiền/Đơn giá (VND)

                        </nz-form-label>
                        <nz-form-control>
                          <div class="centered">
                            <p class="text-custom-price">
                              {{ price.fileStorage | formatPrice}}
                            </p>
                            <p class="text-price-unit">
                              {{ price.fileStorageUnit | formatPrice}}
                            </p>
                          </div>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                  </table>
                  <table *ngIf="catalogStatus['file-storage-snapshot']">
                    <td style="width:60%">
                      <nz-form-item>
                        <nz-form-label class="custom-label">{{ "volume.table.title.storage" | i18n }} File System
                          Snapshot(GB)</nz-form-label>
                        <nz-form-control>
                          <nz-row>
                            <nz-input-number style="width: 100%; margin-left: -1px" [nzMin]="minBlock"
                              [nzMax]="maxBlock" [nzStep]="stepBlock" [(ngModel)]="numberFileScnapsshot"
                              (keydown)="checkPossiblePress($event)"
                              (ngModelChange)="onInputChange($event, 'fileSnapshot')"
                              [ngModelOptions]="{ standalone: true }" nzSize="large"></nz-input-number>
                          </nz-row>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                    <td style="width:40%">
                      <nz-form-item>
                        <nz-form-label class="custom-label" style="text-align: right">Thành tiền/Đơn giá (VND)

                        </nz-form-label>
                        <nz-form-control>
                          <div class="centered">
                            <p class="text-custom-price">
                              {{ price.filestorageSnapshot | formatPrice }}
                            </p>
                            <p class="text-price-unit">
                              {{ price.filestorageSnapshotUnit | formatPrice}}
                            </p>
                          </div>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                  </table>
                </div>
              </div>
              <nz-alert class="ant-alert-warning-custom" nzType="warning" nzDescription="{{'project.note44' | i18n}}"
                nzShowIcon></nz-alert>
            </div>

            <div class="bonus-services" *ngIf="catalogStatus['vpns2s']">
              <div class="title-bonus-services">
                <div><span class="text-card-header">VPN site to site</span></div>
                <one-portal-svg-icon *ngIf="trashVpnSiteToSite" [icon]="'icon_trash'" class="icon-trash"
                  (click)="deleteVpnSiteToSite()"></one-portal-svg-icon>
              </div>
              <div *ngIf="!activeSiteToSite">
                <button class="h-btn" nz-button nzType="default" (click)="initVpnSiteToSite()">
                  <img style="padding-right: 10px; margin-top: -4px" src="assets/imgs/add.svg" alt="" />{{ "app.bonus" |
                  i18n }}
                  VPN site to site
                </button>
              </div>
              <div *ngIf="activeSiteToSite">
                <div class="ant-table">
                  <table>
                    <td style="width:60%">
                      <nz-form-item>
                        <nz-form-label class="custom-label">Chọn gói</nz-form-label>
                        <nz-form-control>
                          <nz-select nzSize="large" [nzLoading]="false" [nzDisabled]="false"
                            style="width: 100%;border-radius: 8px;" [(ngModel)]="siteToSiteId"
                            [ngModelOptions]="{ standalone: true }" (ngModelChange)="findNameSiteToSite($event)">
                            <nz-option *ngFor="let i of listSiteToSite" [nzLabel]="i.offerName" [nzValue]="i.id" />
                          </nz-select>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                    <td style="width:40%">
                      <nz-form-item>
                        <nz-form-label class="custom-label" style="text-align: right">Thành tiền/Đơn giá (VND)

                        </nz-form-label>
                        <nz-form-control>
                          <div class="centered">
                            <p class="text-custom-price">
                              {{ price.siteToSite | formatPrice}}
                            </p>
                            <p class="text-price-unit">
                              {{ price.siteToSiteUnit | formatPrice}}
                            </p>
                          </div>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                  </table>
                </div>
              </div>
              <nz-alert class="ant-alert-warning-custom" (click)="initVpnSiteToSite()" nzType="warning"
                nzDescription="{{'project.note46' | i18n}}" nzShowIcon></nz-alert>
            </div>

            <div class="bonus-services" *ngIf="catalogStatus['vm-gpu']" [nzSeparator]="alertTemplate">
              <div class="title-bonus-services">
                <div><span class="text-card-header">VM GPU</span></div>
                <one-portal-svg-icon *ngIf="trashVpnGpu" [icon]="'icon_trash'" class="icon-trash"
                  (click)="deleteVpnGpu()"></one-portal-svg-icon>
              </div>
              <div *ngIf="!activeVpnGpu">
                <button class="h-btn" nz-button nzType="default" (click)="initVpnGpu()">
                  <img style="padding-right: 10px; margin-top: -4px" src="assets/imgs/add.svg" alt="" />{{ "app.bonus" |
                  i18n }}
                  VM GPU
                </button>
              </div>
              <div *ngIf="activeVpnGpu">
                <div class="ant-table">

                  <table *ngFor="let typeCatelog of gpuQuotasGobal;let i = index;trackBy:trackById">
                    <td style="width:60%">
                      <nz-form-item>
                        <nz-form-label class="custom-label">Số lượng GPU ({{typeCatelog?.GpuType}})</nz-form-label>
                        <nz-form-control>
                          <nz-input-number style="width: 100%; margin-left: -1px" nzMin="0" nzMax="1000" nzStep="1" name="gpu"
                            [(ngModel)]="gpuQuotasGobal[i].GpuCount"
                            (ngModelChange)="getValues(i,gpuQuotasGobal?.[i]?.GpuCount)"
                            [ngModelOptions]="{ standalone: true }" nzSize="large"></nz-input-number>

                        </nz-form-control>
                        <!-- <p class="red-color mt-2 lable-fontsize"
                          *ngIf="( (selectIndexTab==0 && keySSD==false ||(selectIndexTab==0 && !offerFlavor)) || (selectIndexTab==1 && ssd==0)) && gpuQuotasGobal[i].GpuCount !=0">
                          Vui lòng mua kèm dung lượng SSD để đảm bảo sử dụng được dịch vụ máy ảo GPU</p> -->
                      </nz-form-item>
                    </td>
                    <td style="width:40%">
                      <nz-form-item>
                        <nz-form-label class="custom-label" style="text-align: right">Thành tiền/Đơn giá (VND)
                        </nz-form-label>
                        <nz-form-control>
                          <div class="centered">
                            <p class="text-custom-price">
                              {{typeCatelog?.GpuPrice | number }}
                            </p>
                            <p class="text-price-unit">
                              {{typeCatelog?.GpuPriceUnit |number }}
                            </p>
                          </div>
                        </nz-form-control>
                      </nz-form-item>
                    </td>
                  </table>
                  <div *ngIf="isShowAlertGpu">
                    <nz-alert   id="alertTemplate" class="ant-alert-warning-custom-alertTemplate" nzType="warning"
                    nzDescription="Vui lòng mua kèm dung lượng SSD để đảm bảo sử dụng được dịch vụ máy ảo GPU"
                    nzShowIcon></nz-alert>
                  </div>

                </div>
              </div>
              <nz-alert class="ant-alert-warning-custom" nzType="warning"
                nzDescription="Giải pháp giúp tăng tốc độ xử lý cho nhiều tác vụ tính toán và đồ họa phức tạp, đồng thời cung cấp khả năng xử lý hiệu quả cho hàng ngàn luồng dữ liệu cùng lúc."
                nzShowIcon></nz-alert>
            </div>
            <!-- <ng-template #alertTemplate>
              <nz-alert class="ant-alert-warning-custom" nzType="warning"
              nzDescription="Vui lòng mua kèm dung lượng SSD để đảm bảo sử dụng được dịch vụ máy ảo GPU"
              nzShowIcon></nz-alert>
            </ng-template> -->
          </div>
        </nz-card>
      </div>
      <div *ngIf="vpcType == '1'">
        <one-portal-service-usage-period [nameService]="'project'"
          (valueChanged)="onChangeTime($event)"></one-portal-service-usage-period>
      </div>

    </nz-col>

    <!---------------CARD-THÀNH TIỀN-------------->
    <!-- [nzLoading]="loadingCalculate" -->
    <nz-col nzSpan="8">
      <nz-affix [nzOffsetTop]="72">
        <nz-card style="border-radius: 8px" class="information-card card-border">
          <div style="margin-bottom: 20px">
            <span class="text-card-header">{{ 'app.estimated.cost' | i18n }}</span>
          </div>
          <div class="card-money">
            <div class="text-value">{{ 'project.note19' | i18n }}</div>
            <div style="margin-top: 10px" class="text-label">{{ this.form.controls['name'].value }}</div>
            <div *ngIf="vpcType == '1'">
              <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
              <div *ngIf="selectIndexTab == 1">
                <!--        Gói cấu hình sẵn-->
                <div class="text-value">{{ 'custom.config.package' | i18n }}</div>
                <nz-row style="display: flex;justify-content: space-between;">
                  <div style="margin-top: 10px" class="text-label">{{ 'app.payment-detail.quantity' | i18n }} vCPU:
                  </div>
                  <div style="margin-top: 10px" class="text-label">{{ vCPU }} vCPU</div>
                </nz-row>
                <nz-row style="display: flex;justify-content: space-between;">
                  <div style="margin-top: 10px" class="text-label">{{ 'app.payment-detail.quantity' | i18n }} RAM:</div>
                  <div style="margin-top: 10px" class="text-label">{{ ram }} GB</div>
                </nz-row>
                <nz-row style="display: flex;justify-content: space-between;">
                  <div style="margin-top: 10px" class="text-label">Dung lượng HDD:</div>
                  <div style="margin-top: 10px" class="text-label">{{ hhd }} GB</div>
                </nz-row>
                <nz-row style="display: flex;justify-content: space-between;">
                  <div style="margin-top: 10px" class="text-label">Dung lượng SSD:</div>
                  <div style="margin-top: 10px" class="text-label">{{ ssd }} GB</div>
                </nz-row>


                <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
              </div>
              <!--        Gói cấu tùy chọn-->
              <div *ngIf="selectIndexTab == 0">
                <div class="text-value">{{ 'config.package' | i18n }}</div>
                <div style="margin-top: 10px" class="text-label">{{ selectPackge }}</div>
                <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
              </div>
              <!--        Dịch vụ bổ sung-->
              <div
                *ngIf="numberSnapshotssd!=0||numberSnapshothdd!=0|| siteToSiteId || numberLoadBalancer != 0 || numberFileSystem != 0 || numberFileScnapsshot !=0|| numberBackup != 0 ||numberIpFloating != 0|| numberIpPublic != 0|| numberIpv6 != 0"
                class="text-value">{{
                'service.bonus' | i18n }}
              </div>
              <!--        <div style="margin-top: 10px" class="text-label"></div>-->
              <nz-row *ngIf="numberIpFloating != 0" style="display: flex;justify-content: space-between;">
                <div style="margin-top: 10px" class="text-label">Số lượng IP Floating:</div>
                <div style="margin-top: 10px" class="text-label">{{ numberIpFloating }}</div>
              </nz-row>
              <nz-row *ngIf="numberIpPublic != 0" style="display: flex;justify-content: space-between;">
                <div style="margin-top: 10px" class="text-label">Số lượng IP Public:</div>
                <div style="margin-top: 10px" class="text-label">{{ numberIpPublic }}</div>
              </nz-row>
              <nz-row *ngIf="numberIpv6 != 0" style="display: flex;justify-content: space-between;">
                <div style="margin-top: 10px" class="text-label">Số lượng IPv6:</div>
                <div style="margin-top: 10px" class="text-label">{{ numberIpv6 }}</div>
              </nz-row>
              <nz-row *ngIf="numberSnapshothdd != 0" style="display: flex;justify-content: space-between;">
                <div style="margin-top: 10px" class="text-label">Dung lượng Snapshot - HDD:</div>
                <div style="margin-top: 10px" class="text-label">{{ numberSnapshothdd }} GB</div>
              </nz-row>
              <nz-row *ngIf="numberSnapshotssd != 0" style="display: flex;justify-content: space-between;">
                <div style="margin-top: 10px" class="text-label">Dung lượng Snapshot - SSD:</div>
                <div style="margin-top: 10px" class="text-label">{{ numberSnapshotssd }} GB</div>
              </nz-row>
              <nz-row *ngIf="numberBackup != 0" style="display: flex;justify-content: space-between;">
                <div style="margin-top: 10px" class="text-label">Backup:</div>
                <div style="margin-top: 10px" class="text-label">{{ numberBackup }} GB</div>
              </nz-row>
              <nz-row *ngIf="numberLoadBalancer != 0|| loadBalancerId"
                style="display: flex;justify-content: space-between;">
                <div style="margin-top: 10px" class="text-label">Load Balancer:</div>
                <div style="margin-top: 10px" class="text-label">{{loadBalancerName}}</div>
              </nz-row>
              <nz-row *ngIf="numberFileSystem != 0" style="display: flex;justify-content: space-between;">
                <div style="margin-top: 10px" class="text-label">Dung lượng File System:</div>
                <div style="margin-top: 10px" class="text-label">{{ numberFileSystem }} GB</div>
              </nz-row>
              <nz-row *ngIf="numberFileSystem != 0" style="display: flex;justify-content: space-between;">
                <div style="margin-top: 10px" class="text-label">Dung lượng File System Snapshot:</div>
                <div style="margin-top: 10px" class="text-label">{{ numberFileScnapsshot }} GB</div>
              </nz-row>
              <nz-row *ngIf="siteToSiteId " style="display: flex;justify-content: space-between;">
                <div style="margin-top: 10px" class="text-label">VPN site to site:</div>
                <div style="margin-top: 10px" class="text-label">{{ sitetositeName }}</div>
              </nz-row>

              <nz-row *ngFor="let gpu of gpuQuotasGobal" style="display: flex;justify-content: space-between;">
                <div *ngIf="gpu.GpuCount !=0" style="margin-top: 10px" class="text-label">Số lượng GPU {{gpu.GpuType}}:
                </div>
                <div *ngIf="gpu.GpuCount !=0" style="margin-top: 10px" class="text-label">{{ gpu.GpuCount }}</div>
              </nz-row>
              <nz-divider
                *ngIf="numberSnapshotssd!=0|| numberSnapshothdd!=0|| gpuQuotasGobal.length>0|| numberLoadBalancer != 0 ||loadBalancerId || numberFileSystem != 0 || numberFileScnapsshot !=0|| numberBackup != 0 ||numberIpFloating != 0|| numberIpPublic != 0|| numberIpv6 != 0 || siteToSiteId"
                style="margin: 10px 0" nzType="horizontal"></nz-divider>

            </div>


          </div>
          <div *ngIf="!hasRoleSI">
            <nz-row style="margin-bottom: 10px;padding-top:10px" nzGutter="16">
              <nz-col nzSpan="16">
              <span class="text-value">{{ 'app.service.cost' | i18n }} {{ numOfMonth || 0 }}
                {{ 'app.month' | i18n }}</span>
              </nz-col>
              <nz-col class="text-right" nzSpan="8">
              <span class="text-value" style="color: #0066b3" nzAlign="right">
                {{ totalAmount | formatPrice}}
                VND
              </span>
              </nz-col>
            </nz-row>
            <nz-divider style="margin: 10px 0" nzType="horizontal"></nz-divider>
            <nz-row style="margin-bottom: 10px" nzGutter="16">
              <nz-col nzSpan="16">
                <span class="text-value"> Chi phí VAT (10%)</span>
              </nz-col>
              <nz-col class="text-right" nzSpan="8">
              <span class="text-value" style="color: #0066b3" nzAlign="right">
                {{ totalVAT | formatPrice}}
                VND
              </span>
              </nz-col>
            </nz-row>
            <nz-row style="
          margin-bottom: 20px;
          background-color: #cce9ff;
          padding: 16px 0 16px 0;
          border-radius: 8px;
        " nzGutter="16">
              <nz-col nzSpan="16">
                <span class="text-label">{{ 'app.total.payment' | i18n }}</span><br />
                <span class="text-note-italicized">({{ 'app.payment-detail.vat' | i18n }})</span>
              </nz-col>
              <nz-col class="text-right" nzSpan="8">
              <span class="text-value" style="color: #ea3829" nzAlign="right">{{ totalPayment | formatPrice}}
                VND</span>
              </nz-col>
            </nz-row>
          </div>
          <nz-row>
            <nz-col style="width: 100%">
              <button style="width: 100%" nz-button nzSize="large" nzType="primary" (click)="createIpPublic()"
                [ngStyle]="{'margin-top.px': vpcType === '0' ? 15 : 0}" [disabled]="(vpcType == '1'  && (form.invalid || ((selectIndexTab == 0 && (selectedElementFlavor == null) )|| (selectIndexTab == 1 && (vCPU ==0 || ram ==0 || (hhd ==0 && ssd ==0))))))
                     || (vpcType == '0' && this.form.controls['name'].value == '')">
                <span nz-icon nzType="wallet" nzTheme="outline"></span>
                <span [style.color]="(vpcType == '1' && (form.invalid || ((selectIndexTab == 0 && (selectedElementFlavor == null) )|| (selectIndexTab == 1 && (vCPU ==0 || ram ==0 || (hhd ==0 && ssd ==0))))))
                     || (vpcType == '0' && this.form.controls['name'].value == '') ? 'gray' : 'white'">{{
                  'app.button.create' | i18n }}</span>
              </button>
            </nz-col>
          </nz-row>
        </nz-card>
      </nz-affix>
    </nz-col>
  </nz-row>
</form>

<one-portal-popup-list-error [isVisible]="isVisiblePopupError" [errorList]="errorList"
  (onCancel)="closePopupError()"></one-portal-popup-list-error>
