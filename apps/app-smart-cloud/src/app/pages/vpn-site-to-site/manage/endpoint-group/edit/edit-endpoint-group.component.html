<img
  style="cursor: pointer; margin-right: 16px"
  src="assets/imgs/edit-2.svg"
  nz-popover
  [nzPopoverContent]="'Sửa'"
  nzPopoverPlacement="bottom"
  (click)="showModal()"
/>

<nz-modal
  [(nzVisible)]="isVisible"
  nzCentered
  [nzTitle]="modalTitle"
  [nzContent]="modalContent"
  [nzFooter]="null"
  (nzOnCancel)="handleCancel()"
>
  <ng-template #modalTitle>
    <h4><b>Chỉnh sửa thông tin Endpoint Group</b></h4>
  </ng-template>
  <ng-template #modalContent>
    <form nz-form nzLayout="vertical" [formGroup]="validateForm">
      <nz-form-item>
        <div>
          <span>Name</span>
          (<span style="color: rgba(252, 16, 16, 1)">*</span>)
          <img
            nz-popover
            [nzPopoverContent]="
              'Tên của Endpoint, các ký tự chữ thường a-z, chữ hoa A-Z, số 0-9, dấu gạch ngang (-) và dấu gạch dưới (_), có thể có khoảng trắng, tối thiểu 1 ký tự và tối đa 50 ký tự.'
            "
            nzPopoverPlacement="bottom"
            style="margin-left: 5px"
            src="assets/imgs/pajamas_question.svg"
            alt=""
          />
        </div>
        <nz-form-control
          nzDisableAutoTips
          [nzErrorTip]="nameErrorTpl"
          style="margin-top: 10px"
        >
          <input
            nz-input
            formControlName="nameEndpointGroup"
            id="nameEndpointGroup"
            placeholder="{{ 'validation.info.required' | i18n }}"
            appTrim
            [maxlength]="50"
            class="input-custom"
          />
          <ng-template #nameErrorTpl let-control>
            <ng-container *ngIf="control.hasError('required')">{{
              'validation.info.required' | i18n
            }}</ng-container>
            <ng-container *ngIf="control.hasError('pattern')"
              >Tên của Endpoint chỉ chứa các ký tự chữ thường a-z, chữ hoa A-Z,
              số 0-9, dấu gạch ngang (-) và dấu gạch dưới (_), có thể có khoảng
              trắng, tối thiểu 1 ký tự và tối đa 50 ký tự</ng-container
            >
          </ng-template>
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label nzFor="nameFileSystem">
          <div>
            <span>Type</span>
            (<span style="color: rgba(252, 16, 16, 1)">*</span>)
            <img
              nz-popover
              [nzPopoverContent]="
                'IPsec Connection yêu cầu Local Endpoints là Subnet và peer endpoints là CIDR.'
              "
              nzPopoverPlacement="bottom"
              style="margin-left: 5px"
              src="assets/imgs/pajamas_question.svg"
              alt=""
            />
          </div>
        </nz-form-label>
        <input
          nz-input
          class="input-custom"
          type="text"
          [disabled]="true"
          [placeholder]="
            type === 'subnet'
              ? 'Subnet(for local systems)'
              : 'Cidr(for external systems)'
          "
        />
      </nz-form-item>

      <nz-form-item>
        <nz-form-control>
          <nz-form-label *ngIf="type == 'subnet'" nzFor="name"
            >Subnet:</nz-form-label
          >
          <nz-form-label *ngIf="type == 'cidr'" nzFor="name"
            >Cidr:</nz-form-label
          >
          <div
            *ngFor="let item of endpoints"
            style="margin-bottom: 15px"
            class="text-label"
          >
            <div>{{ item }}</div>
          </div>
        </nz-form-control>
      </nz-form-item>
      <div class="d-flex justify-content-end">
        <button nz-button nzType="default" (click)="handleCancel()">
          <img
            style="padding-right: 10px; margin-top: -4px"
            src="assets/imgs/cancel.svg"
            alt=""
          />{{ 'app.button.cancel' | i18n }}
        </button>
        <button
          nz-button
          nzType="primary"
          [disabled]="!validateForm.valid"
          (click)="handleOk()"
          [nzLoading]="isLoading"
          class="button-ok"
        >
          <img
            *ngIf="isLoading === false"
            style="padding-right: 10px; margin-top: -4px"
            src="assets/imgs/confirm.svg"
            alt=""
          />
          {{ 'app.button.confirm' | i18n }}
        </button>
      </div>
    </form>
  </ng-template>
</nz-modal>
