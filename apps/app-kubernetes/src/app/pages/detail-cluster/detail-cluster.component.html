<ng-container *ngIf="detailCluster; else loadingTpl">
  <button nz-button nzType="primary" class="mb-3" [routerLink]="'/app-kubernetes/edit/' + serviceOrderCode"
    [disabled]="detailCluster?.serviceStatus == 3" [nz-tooltip]="'app.text.edit' | i18n" nzSize="large">
    <img src="assets/imgs/edit-1.svg" class="icon-action"
      [routerLink]="'/app-kubernetes/edit/' + serviceOrderCode" />
    {{ 'app.text.edit' | i18n }}
  </button>
  <button nz-button nzType="primary" class="mb-3" [disabled]="detailCluster?.serviceStatus == 3" nzSize="large"
    [nz-tooltip]="'app.text.upgrade' | i18n" [routerLink]="'/app-kubernetes/upgrade/' + serviceOrderCode">
    <span nz-icon>
      <svg width="18" height="18" viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M15.0791 16.4639H2.91941" stroke="white" stroke-width="1.5" stroke-miterlimit="10"
          stroke-linecap="round" stroke-linejoin="round" />
        <path d="M14.0063 2.65625L3.99248 13.1055" stroke="white" stroke-width="1.5" stroke-miterlimit="10"
          stroke-linecap="round" stroke-linejoin="round" />
        <path d="M14.0063 10.3215V2.65625H6.66046" stroke="white" stroke-width="1.5" stroke-miterlimit="10"
          stroke-linecap="round" stroke-linejoin="round" />
      </svg>
    </span>
    {{ 'app.text.upgrade' | i18n }}
  </button>
  <button nz-button nzType="primary" class="mb-3" [nz-tooltip]="'app.extend' |  i18n"
    [routerLink]="'/app-kubernetes/extension/' + serviceOrderCode" nzSize="large">
    <span nz-icon>
      <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M6.6665 1.6665V4.1665" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
          stroke-linejoin="round" />
        <path d="M13.3335 1.6665V4.1665" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
          stroke-linejoin="round" />
        <path d="M2.9165 7.5752H17.0832" stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round"
          stroke-linejoin="round" />
        <path
          d="M18.3332 15.8333C18.3332 16.4583 18.1582 17.05 17.8498 17.55C17.2748 18.5167 16.2165 19.1667 14.9998 19.1667C14.1582 19.1667 13.3915 18.8583 12.8082 18.3333C12.5498 18.1167 12.3248 17.85 12.1498 17.55C11.8415 17.05 11.6665 16.4583 11.6665 15.8333C11.6665 13.9917 13.1582 12.5 14.9998 12.5C15.9998 12.5 16.8915 12.9417 17.4998 13.6333C18.0165 14.225 18.3332 14.9917 18.3332 15.8333Z"
          stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M13.6997 15.8333L14.5247 16.6583L16.2997 15.0166" stroke="white" stroke-width="1.5"
          stroke-linecap="round" stroke-linejoin="round" />
        <path
          d="M17.5 7.08317V13.6332C16.8917 12.9415 16 12.4998 15 12.4998C13.1583 12.4998 11.6667 13.9915 11.6667 15.8332C11.6667 16.4582 11.8417 17.0498 12.15 17.5498C12.325 17.8498 12.55 18.1165 12.8083 18.3332H6.66667C3.75 18.3332 2.5 16.6665 2.5 14.1665V7.08317C2.5 4.58317 3.75 2.9165 6.66667 2.9165H13.3333C16.25 2.9165 17.5 4.58317 17.5 7.08317Z"
          stroke="white" stroke-width="1.5" stroke-miterlimit="10" stroke-linecap="round" stroke-linejoin="round" />
        <path d="M9.99607 11.4167H10.0036" stroke="white" stroke-width="2" stroke-linecap="round"
          stroke-linejoin="round" />
        <path d="M6.91209 11.4167H6.91957" stroke="white" stroke-width="2" stroke-linecap="round"
          stroke-linejoin="round" />
        <path d="M6.91209 13.9167H6.91957" stroke="white" stroke-width="2" stroke-linecap="round"
          stroke-linejoin="round" />
      </svg>
    </span>
    {{ 'app.button.extend' | i18n }}
  </button>

  <form nz-form [formGroup]="upgradeForm">
    <!-- Thông tin chung -->
    <nz-card class="border-radius-card">
      <h3>{{ 'app.cluster.overall' | i18n }}</h3>
      <div nz-row>
        <div nz-col [nzSpan]="24" class="detailtable">
          <nz-table [nzTemplateMode]="true" nzBordered>
            <tbody>
              <tr>
                <td class="w-50"><row-data [value]="detailCluster.clusterName" [label]="'app.cluster.name' | i18n"></row-data></td>
                <!-- <td class="w-50" [ngClass]="{'padbot-zero': isEditMode == true}">
                  <div nz-row>
                    <div nz-col [nzSpan]="8" [ngClass]="{'padtop-5': isEditMode == true}">
                      {{ 'app.cluster.name' | i18n }}
                    </div>
                    <div nz-col [nzSpan]="16" class="description-info">
                      <ng-container *ngIf="!isEditMode; else editClusterNameTpl">
                        {{detailCluster.clusterName}}
                      </ng-container>
                      <ng-template #editClusterNameTpl>
                        <nz-form-item>
                          <nz-form-control [nzErrorTip]="errorClusterNameTpl">
                            <input type="text" nz-input formControlName="clusterName"
                              [placeholder]="'cluster.placeholder.cluster-name' | i18n" nzSize="large" />
                          </nz-form-control>
                          <ng-template #errorClusterNameTpl>
                            <ng-container *ngIf="control.hasError('required')">
                              <div>{{ 'cluster.validate.required.cluster-name' | i18n }}</div>
                            </ng-container>
                            <ng-container *ngIf="control.hasError('minlength') || control.hasError('maxlength')">
                              <div>{{ 'cluster.validate.length.cluster-name' | i18n }}</div>
                            </ng-container>
                            <ng-container *ngIf="control.hasError('pattern')">
                              <div>{{ 'cluster.validate.pattern.cluster-name' | i18n }}</div>
                            </ng-container>
                          </ng-template>
                        </nz-form-item>
                      </ng-template>
                    </div>
                  </div>
                </td> -->
                <td class="w-50">
                  <div nz-row>
                    <div nz-col [nzSpan]="8">
                      <span class="content">{{ 'app.cluster.version' | i18n }}</span>
                    </div>
                    <div nz-col [nzSpan]="16" class="description-info">
                      {{detailCluster.currentVersion}}
                      <button nz-button nzType="text" (click)="handleShowModalUpgradeVersion()"
                        class="action-icon borderless" [nzTooltipTitle]="'app.text.upgrade' | i18n"
                        nzTooltipPlacement="top" nz-tooltip [disabled]="detailCluster?.serviceStatus != 2 || detailCluster?.serviceStatus == 3">
                        <span nz-icon>
                          <svg width="25" height="24" viewBox="0 0 25 24" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                              d="M18.343 9.46736L17.9653 8.81195C17.6458 8.25737 16.9377 8.06606 16.3823 8.38426C16.118 8.53999 15.8026 8.58417 15.5056 8.50706C15.2086 8.42996 14.9545 8.2379 14.7993 7.97324C14.6995 7.80502 14.6459 7.61342 14.6438 7.41781C14.6528 7.1042 14.5345 6.8003 14.3158 6.57534C14.0971 6.35037 13.7967 6.2235 13.483 6.22363H12.722C12.4147 6.22363 12.12 6.34611 11.9031 6.56397C11.6863 6.78184 11.5653 7.07712 11.5667 7.38449C11.5576 8.01909 11.0405 8.52874 10.4059 8.52868C10.2103 8.52665 10.0187 8.473 9.85045 8.37316C9.29511 8.05495 8.58699 8.24626 8.26746 8.80084L7.862 9.46736C7.54285 10.0212 7.73157 10.7289 8.28413 11.0503C8.6433 11.2577 8.86456 11.6409 8.86456 12.0557C8.86456 12.4704 8.6433 12.8536 8.28413 13.061C7.73227 13.3803 7.54335 14.0862 7.862 14.6384L8.24525 15.2994C8.39496 15.5695 8.64615 15.7689 8.94324 15.8533C9.24033 15.9378 9.55882 15.9003 9.82823 15.7493C10.0931 15.5948 10.4087 15.5524 10.7049 15.6317C11.0011 15.711 11.2534 15.9053 11.4057 16.1714C11.5055 16.3396 11.5591 16.5313 11.5612 16.7269C11.5612 17.368 12.0809 17.8877 12.722 17.8877H13.483C14.1219 17.8877 14.6408 17.3714 14.6438 16.7324C14.6423 16.4241 14.7642 16.128 14.9822 15.9099C15.2002 15.6919 15.4964 15.5701 15.8047 15.5716C15.9998 15.5768 16.1906 15.6302 16.3601 15.7271C16.914 16.0462 17.6217 15.8575 17.9431 15.305L18.343 14.6384C18.4978 14.3727 18.5403 14.0563 18.4611 13.7592C18.3818 13.4621 18.1874 13.2088 17.9209 13.0555C17.6543 12.9021 17.4599 12.6488 17.3807 12.3517C17.3015 12.0546 17.344 11.7382 17.4988 11.4725C17.5994 11.2967 17.7451 11.151 17.9209 11.0503C18.4701 10.7291 18.6584 10.0255 18.343 9.47291V9.46736Z"
                              stroke="#0066B0" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" />
                            <path
                              d="M13.1064 13.6556C13.9898 13.6556 14.7059 12.9395 14.7059 12.0561C14.7059 11.1727 13.9898 10.4565 13.1064 10.4565C12.223 10.4565 11.5068 11.1727 11.5068 12.0561C11.5068 12.9395 12.223 13.6556 13.1064 13.6556Z"
                              stroke="#0066B0" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" />
                            <path
                              d="M4.55005 17.4682C4.92357 18.0907 5.38008 18.6718 5.89886 19.1905C9.71706 23.0087 15.9216 23.0087 19.7606 19.1905C21.3169 17.6342 22.2092 15.6628 22.4997 13.6499"
                              stroke="#0066B0" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" />
                            <path
                              d="M3.16016 10.8696C3.45067 8.83601 4.34298 6.88531 5.89932 5.32898C9.71752 1.51078 15.9221 1.51078 19.761 5.32898C20.3006 5.86851 20.7363 6.44958 21.1098 7.05136"
                              stroke="#0066B0" stroke-width="1.25" stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M4.5 20.0005V17.0005H7.5" stroke="#0066B0" stroke-width="1.25"
                              stroke-linecap="round" stroke-linejoin="round" />
                            <path d="M21.5 4.00049V7.00049H18.5" stroke="#0066B0" stroke-width="1.25"
                              stroke-linecap="round" stroke-linejoin="round" />
                          </svg>
                        </span>
                      </button>
                    </div>
                  </div>
                </td>
              </tr>

              <tr>
                <!-- <td class="w-50"><row-data [value]="detailCluster.apiEndpoint" [label]="'API Endpoint'"></row-data></td> -->
                <td class="w-50">
                  <div nz-row>
                    <div nz-col [nzSpan]="8">
                      <span class="content">{{ 'app.cluster.api-endpoint' | i18n }}</span>
                    </div>
                    <div nz-col [nzSpan]="16" class="description-info">
                      <ng-container *ngIf="detailCluster.apiEndpoint?.length <= 30; else truncateEndpointTpl">
                        <span class="content">{{detailCluster.apiEndpoint}}</span>
                      </ng-container>
                      <ng-template #truncateEndpointTpl>
                        <span [nzPopoverContent]="apiEnpointTpl" nzPopoverPlacement="bottom" nz-popover>
                          <span class="content">{{detailCluster.apiEndpoint | truncateLabel}}</span>
                        </span>

                        <ng-template #apiEnpointTpl>
                          <div style="width: fit-content"><span class="content">{{detailCluster.apiEndpoint}}</span></div>
                        </ng-template>
                      </ng-template>

                      <ng-container *ngIf="detailCluster.apiEndpoint">
                        <button nz-button nzType="text" (click)="handleCopyAPIEndpoint()" class="action-icon borderless"
                          [nzTooltipTitle]="'app.cluster.copy' | i18n" nzTooltipPlacement="top" nz-tooltip>
                          <span nz-icon>
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                              xmlns="http://www.w3.org/2000/svg">
                              <path
                                d="M16 12.9V17.1C16 20.6 14.6 22 11.1 22H6.9C3.4 22 2 20.6 2 17.1V12.9C2 9.4 3.4 8 6.9 8H11.1C14.6 8 16 9.4 16 12.9Z"
                                stroke="#0066B0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                              <path
                                d="M22 6.9V11.1C22 14.6 20.6 16 17.1 16H16V12.9C16 9.4 14.6 8 11.1 8H8V6.9C8 3.4 9.4 2 12.9 2H17.1C20.6 2 22 3.4 22 6.9Z"
                                stroke="#0066B0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                          </span>
                        </button>
                      </ng-container>
                    </div>
                  </div>
                </td>
                <!-- <td class="w-50">
                  <div nz-row>
                    <div nz-col [nzSpan]="8">{{ 'app.cluster.order-code' | i18n }}</div>
                    <div nz-col [nzSpan]="16">
                      <span style="font-size: 16px; font-weight: 600;">
                        <a [routerLink]="'/app-smart-cloud/order/detail/' + detailCluster.orderId" target="_blank">{{detailCluster.orderCode}}</a>
                      </span>
                    </div>
                  </div>
                </td> -->

                <td class="w-50">
                  <div nz-row>
                    <div nz-col [nzSpan]="8"><span class="content">{{ 'app.config' | i18n }}</span></div>
                    <div nz-col [nzSpan]="16">
                      <span class="description-info content">
                        <a (click)="handleViewKubeConfig()">
                          <ng-container *ngIf="detailCluster.clusterName.length <= 30; else truncateKubeconfigTpl">
                            {{detailCluster.clusterName}}.Kubeconfig
                          </ng-container>
                          <ng-template #truncateKubeconfigTpl>
                            <span nz-popover nzPopoverPlacement="leftTop" [nzPopoverContent]="kubeconfigNameTpl" class="content">
                              {{(detailCluster.clusterName + '.Kubeconfig') | truncateLabel}}
                            </span>
                            <ng-template #kubeconfigNameTpl>
                              {{(detailCluster.clusterName + '.Kubeconfig')}}
                            </ng-template>
                          </ng-template>
                        </a>
                      </span>
                      <button nz-button nzType="text" (click)="handleDownloadKubeConfig()"
                        class="action-icon borderless" [nzTooltipTitle]="'app.cluster.download-config' | i18n"
                        nzTooltipPlacement="top" nz-tooltip>
                        <img src="assets/imgs/download.svg" class="icon-action"/>
                      </button>
                      <button nz-button nzType="text" class="action-icon borderless"
                        [nzTooltipTitle]="'app.cluster.copy' | i18n" nzTooltipPlacement="top" nz-tooltip
                        (click)="handleCopyKubeConfig()">
                        <span nz-icon>
                          <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                              d="M16 12.9V17.1C16 20.6 14.6 22 11.1 22H6.9C3.4 22 2 20.6 2 17.1V12.9C2 9.4 3.4 8 6.9 8H11.1C14.6 8 16 9.4 16 12.9Z"
                              stroke="#0066B0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            <path
                              d="M22 6.9V11.1C22 14.6 20.6 16 17.1 16H16V12.9C16 9.4 14.6 8 11.1 8H8V6.9C8 3.4 9.4 2 12.9 2H17.1C20.6 2 22 3.4 22 6.9Z"
                              stroke="#0066B0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                          </svg>
                        </span>
                      </button>
                    </div>
                  </div>
                </td>
              </tr>

              <tr>
                <td class="w-50">
                  <div nz-row>
                    <div nz-col [nzSpan]="8"><span class="content">{{ 'app.text.status' | i18n }}</span></div>
                    <div nz-col [nzSpan]="16">
                      <ng-container *ngIf="detailCluster.serviceStatus | status2ColorPipe as status">
                        <span [ngStyle]="{color: status.color, 'font-weight': 600}" class="content">{{ status.status | i18n }}</span>
                      </ng-container>
                    </div>
                  </div>
                </td>
                <td class="w-50"><row-data [value]="detailCluster.description"
                    [label]="'app.cluster.description' | i18n"></row-data></td>
              </tr>

              <tr>
                <td class="w-50"><row-data [value]="detailCluster.createdDate | date: 'dd/MM/yyyy'"
                    [label]="'app.text.creation-time' | i18n"></row-data></td>
                <td class="w-50"><row-data [value]="detailCluster.expiredDate| date: 'dd/MM/yyyy'"
                    [label]="'app.service.expiration-date' | i18n" [type]="'danger'"></row-data></td>
              </tr>

            </tbody>
          </nz-table>
        </div>
      </div>
    </nz-card>

    <!-- Thông tin worker group -->
    <nz-card class="border-radius-card">
      <h3>{{ 'app.cluster.worker-group' | i18n }}</h3>
      <div formArrayName="workerGroup" *ngFor="let control of listFormWorkerGroupUpgrade.controls; let i = index;">
        <ng-container [formGroupName]="i">
          <div nz-row>
            <div nz-col [nzSpan]="24" class="detailtable">
              <nz-table [nzTemplateMode]="true" nzBordered>
                <tbody>
                  <tr>
                    <td class="w-50" [ngClass]="{'padbot-zero': isEditMode == true}">
                      <div nz-row>
                        <div nz-col [nzSpan]="8" [ngClass]="{'padtop-5': isEditMode == true}">
                          <span class="content">{{'app.cluster.worker-group-name' | i18n }}</span>
                        </div>
                        <div nz-col [nzSpan]="16" class="description-info">
                          <ng-container *ngIf="!isEditMode; else editWorkerGroupNameTpl">
                            <span class="content">{{'workerGroupName' | getValueInForm: listFormWorkerGroupUpgrade : i}}</span>
                          </ng-container>
                          <ng-template #editWorkerGroupNameTpl>
                            <nz-form-item>
                              <nz-form-control [nzErrorTip]="errorWorkerNameTpl">
                                <input nz-input type="text" formControlName="workerGroupName"
                                  (ngModelChange)="checkDuplicate(i)"
                                  [placeholder]="'cluster.placeholder.wg-name' | i18n" nzSize="large" />
                              </nz-form-control>
                              <ng-template #errorWorkerNameTpl let-control>
                                <ng-container *ngIf="control.hasError('required')">
                                  {{ 'cluster.validate.required.wg-name' | i18n }}
                                </ng-container>
                                <ng-container *ngIf="control.hasError('duplicateName')">
                                  {{ 'cluster.validate.duplicate.wg-name' | i18n }}
                                </ng-container>
                                <ng-container *ngIf="control.hasError('maxlength')">
                                  {{ 'cluster.validate.length.wg-name' | i18n }}
                                </ng-container>
                                <ng-container *ngIf="control.hasError('pattern')">
                                  {{ 'cluster.validate.pattern.wg-name' | i18n }}
                                </ng-container>
                              </ng-template>
                            </nz-form-item>
                          </ng-template>
                        </div>
                      </div>
                    </td>

                    <td class="w-50" [ngClass]="{'padbot-zero': isEditMode == true}">
                      <div nz-row>
                        <div nz-col [nzSpan]="8" [ngClass]="{'padtop-5': isEditMode == true}">
                          <span class="content">{{'app.cluster.node-number' | i18n }}</span>
                        </div>
                        <div nz-col [nzSpan]="16" class="description-info">
                          <ng-container *ngIf="!isEditMode; else editNodeNumberTpl">
                            <span class="content">{{'nodeNumber' | getValueInForm: listFormWorkerGroupUpgrade : i}}</span>
                          </ng-container>
                          <ng-template #editNodeNumberTpl>
                            <nz-form-item>
                              <nz-form-control [nzErrorTip]="errorNodeNumberTpl">
                                <input nz-input type="text" formControlName="nodeNumber" (keypress)="isNumber($event)"
                                  (ngModeChange)="onChangeNodeNumber($event, i)" nzSize="large" />
                              </nz-form-control>
                              <ng-template #errorNodeNumberTpl>
                                <ng-container *ngIf="control.hasError('required')">
                                  {{ 'cluster.validate.required.node-number' | i18n }}
                                </ng-container>
                                <ng-container *ngIf="control.hasError('invalid')">
                                  {{ 'cluster.validate.invalid.node-number' | i18n }}
                                </ng-container>
                                <ng-container *ngIf="control.hasError('min') || control.hasError('max')">
                                  {{ 'cluster.validate.length.node-number' | i18n }}
                                </ng-container>
                              </ng-template>
                            </nz-form-item>
                          </ng-template>
                        </div>
                      </div>
                    </td>
                  </tr>

                  <tr>
                    <td class="w-50" [ngClass]="{'padbot-zero': isEditMode == true}">
                      <div nz-row>
                        <div nz-col [nzSpan]="8" [ngClass]="{'padtop-5': isEditMode == true}">
                          <span class="content">{{ 'app.config' | i18n }}</span>
                        </div>
                        <div nz-col [nzSpan]="16" class="description-info">
                          <ng-container *ngIf="!isEditMode; else editConfigTypeTpl">
                            <span class="content">
                              {{'cpu' | getValueInForm: listFormWorkerGroupUpgrade : i}}vCPU / {{'ram' | getValueInForm:
                              listFormWorkerGroupUpgrade : i}}GB
                            </span>
                          </ng-container>
                          <ng-template #editConfigTypeTpl>
                            <nz-form-item>
                              <nz-form-control [nzErrorTip]="errorConfigError">
                                <nz-select formControlName="configType" nzShowSearch nzPlaceHolder="Chọn cấu hình"
                                  (ngModelChange)="onChangeConfigType($event, i)" class="w-100" nzSize="large">
                                  <nz-option *ngFor="let item of listOfWorkerType"
                                    nzLabel="{{item.machineName}} ({{item.cpu}} CPU - {{item.ram}} GB RAM)"
                                    [nzValue]="item.machineName">
                                  </nz-option>
                                </nz-select>
                              </nz-form-control>
                              <ng-template #errorConfigError let-control>
                                <ng-container *ngIf="control.hasError('invalid')">
                                  {{ 'cluster.validate.invalid.config' | i18n }}
                                </ng-container>
                              </ng-template>
                            </nz-form-item>
                          </ng-template>
                        </div>
                      </div>
                    </td>

                    <td class="w-50" [ngClass]="{'padbot-zero': isEditMode == true}">
                      <div nz-row>
                        <div nz-col [nzSpan]="8" [ngClass]="{'padtop-5': isEditMode == true}">
                          <span class="content">{{ 'app.cluster.storage' | i18n }}</span>
                        </div>
                        <div nz-col [nzSpan]="16" class="description-info">
                          <ng-container *ngIf="!isEditMode; else editWorkerVolumeSizeTpl">
                            <span class="content">{{'volumeStorage' | getValueInForm: listFormWorkerGroupUpgrade : i}}</span>
                          </ng-container>
                          <ng-template #editWorkerVolumeSizeTpl>
                            <nz-form-item>
                              <nz-form-control [nzErrorTip]="volumeErrorTpl">
                                <input nz-input type="text" formControlName="volumeStorage" nzSize="large"
                                  (keypress)="isNumber($event)" (ngModelChange)="onChangeVolumeWorker($event, i)" />
                              </nz-form-control>
                              <ng-template #volumeErrorTpl let-control>
                                <ng-container *ngIf="control.hasError('required')">
                                  {{ 'cluster.validate.required.storage' | i18n }}
                                </ng-container>
                                <ng-container *ngIf="control.hasError('min') || control.hasError('max')">
                                  {{ 'cluster.validate.length.storage' | i18n }}
                                </ng-container>
                                <ng-container *ngIf="control.hasError('invalid')">
                                  {{ 'cluster.validate.invalid.storage' | i18n }}
                                </ng-container>
                              </ng-template>
                            </nz-form-item>
                          </ng-template>
                        </div>
                      </div>
                    </td>
                  </tr>

                  <tr>
                    <td class="w-50">
                      <div nz-row>
                        <div nz-col [nzSpan]="8"><span class="content">Auto scale</span></div>
                        <div nz-col [nzSpan]="16" class="description-info content">
                          <ng-container *ngIf="!isEditMode; else editScalingTpl">
                            <ng-container
                              *ngIf="('autoScalingWorker' | getValueInForm: listFormWorkerGroupUpgrade : i) == true; else offAutoScaleTpl">
                              {{ 'app.start' | i18n }}
                            </ng-container>
                            <ng-template #offAutoScaleTpl>
                              {{ 'app.off' | i18n }}
                            </ng-template>
                          </ng-container>
                          <ng-template #editScalingTpl>
                            <!-- not enable on this phase -->
                            <nz-switch formControlName="autoScalingWorker" (ngModelChange)="onChangeAutoScale($event)"
                              [nzCheckedChildren]="'app.start' | i18n" [nzUnCheckedChildren]="'app.off' | i18n"
                              [nzDisabled]="true"></nz-switch>
                          </ng-template>
                        </div>
                      </div>
                    </td>

                    <td class="w-50">
                      <!-- <div nz-row>
                        <div nz-col [nzSpan]="8">Auto healing</div>
                        <div nz-col [nzSpan]="16" class="description-info">
                          <ng-container *ngIf="!isEditMode; else editHealingTpl">
                            <ng-container
                              *ngIf="('autoHealing' | getValueInForm: listFormWorkerGroupUpgrade : i) == true; else offAutoHealingTpl">
                              Bật
                            </ng-container>
                            <ng-template #offAutoHealingTpl>
                              Tắt
                            </ng-template>
                          </ng-container>
                          <ng-template #editHealingTpl>
                            <nz-switch formControlName="autoHealing" nzCheckedChildren="Bật"
                              nzUnCheckedChildren="Tắt"></nz-switch>
                          </ng-template>
                        </div>
                      </div> -->

                      <div nz-row>
                        <div nz-col [nzSpan]="8"><span class="content">{{ 'app.hard.drive.type' | i18n }}</span></div>
                        <div nz-col [nzSpan]="16" class="description-info content">
                          <ng-container *ngIf="!isEditMode; else editVolumeTypeTpl">
                            {{'volumeTypeName' | getValueInForm: listFormWorkerGroupUpgrade : i}}
                          </ng-container>
                          <ng-template #editVolumeTypeTpl>
                            <nz-radio-group formControlName="volumeType" (ngModelChange)="onSelectVolumeType($event, i)"
                              [nzDisabled]="isUsingPackConfig">
                              <ng-container *ngFor="let item of listOfVolumeType">
                                <label nz-radio [nzValue]="item.volumeType" id="volumeType">
                                  {{item.volumeTypeName}}
                                </label>
                              </ng-container>
                            </nz-radio-group>
                          </ng-template>
                        </div>
                      </div>
                    </td>
                  </tr>

                  <ng-container *ngIf="isAutoScale">
                    <tr>
                      <td class="w-50" [ngClass]="{'padbot-zero': isEditMode == true}">
                        <div nz-row>
                          <div nz-col [nzSpan]="8" [ngClass]="{'padtop-5': isEditMode == true}">
                            <span class="content">Minimum node</span>
                          </div>
                          <div nz-col [nzSpan]="16" class="description-info">
                            <ng-container *ngIf="!isEditMode; else editMinimumNodeTpl">
                              <span class="content">{{'minimumNode' | getValueInForm: listFormWorkerGroupUpgrade : i}}</span>
                            </ng-container>
                            <ng-template #editMinimumNodeTpl>
                              <nz-form-item>
                                <nz-form-control [nzErrorTip]="errorMinimumNodeTpl">
                                  <input nz-input type="text" formControlName="minimumNode"
                                    [placeholder]="'cluster.placeholder.minimum-node' | i18n" nzSize="large" />
                                </nz-form-control>
                                <ng-template #errorMinimumNodeTpl>
                                  <ng-container *ngIf="control.hasError('required')">
                                    {{ 'cluster.required.minimum-node' | i18n }}
                                  </ng-container>
                                  <ng-container *ngIf="control.hasError('invalid')">
                                    {{ 'cluster.invalid.minimum-node' | i18n }}
                                  </ng-container>
                                  <ng-container *ngIf="control.hasError('min') || control.hasError('max')">
                                    {{ 'cluster.length.minimum-node' | i18n }}
                                  </ng-container>
                                </ng-template>
                              </nz-form-item>
                            </ng-template>
                          </div>
                        </div>
                      </td>

                      <td class="w-50" [ngClass]="{'padbot-zero': isEditMode == true}">
                        <div nz-row>
                          <div nz-col [nzSpan]="8" [ngClass]="{'padtop-5': isEditMode == true}">
                            <span class="content">Maximum node</span>
                          </div>
                          <div nz-col [nzSpan]="16" class="description-info content">
                            <ng-container *ngIf="!isEditMode; else editMaximumNodeTpl">
                              {{'maximumNode' | getValueInForm: listFormWorkerGroupUpgrade : i}}
                            </ng-container>
                            <ng-template #editMaximumNodeTpl>
                              <nz-form-item>
                                <nz-form-control [nzErrorTip]="errorMaximumNodeTpl">
                                  <input nz-input type="text" formControlName="maximumNode"
                                    [placeholder]="'cluster.placeholder.maximum-node' | i18n" nzSize="large" />
                                </nz-form-control>
                                <ng-template #errorMaximumNodeTpl>
                                  <ng-container *ngIf="control.hasError('required')">
                                    {{ 'cluster.validate.required' | i18n }}
                                  </ng-container>
                                  <ng-container *ngIf="control.hasError('min') || control.hasError('max')">
                                    {{ 'cluster.validate.length' | i18n }}
                                  </ng-container>
                                </ng-template>
                              </nz-form-item>
                            </ng-template>
                          </div>
                        </div>
                      </td>
                    </tr>
                  </ng-container>
                </tbody>
              </nz-table>
            </div>

            <ng-container
              *ngIf="isEditMode || (listFormWorkerGroupUpgrade?.controls.length > 0 && i != listFormWorkerGroupUpgrade?.controls.length - 1)">
              <nz-divider nzDashed></nz-divider>
            </ng-container>
          </div>
        </ng-container>
      </div>

      <ng-container *ngIf="isEditMode">
        <button nz-button nzType="default" class="border-button" (click)="addWorkerGroup()">
          <span nz-icon>
            <svg viewBox="64 64 896 896" focusable="false">
              <path d="M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z" />
              <path d="M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z" />
            </svg>
          </span>
          {{ 'app.cluster.add-wg' | i18n }}
        </button>
      </ng-container>
    </nz-card>

    <!-- Thông tin network -->
    <nz-card class="border-radius-card">
      <h3>{{ 'app.cluster.network' | i18n }}</h3>
      <div nz-row>
        <div nz-col [nzSpan]="24" class="detailtable">
          <nz-table [nzTemplateMode]="true" nzBordered>
            <tbody>
              <tr>
                <td class="w-50"><row-data [value]="detailCluster.networkType | network2label"
                    [label]="'app.cluster.network-type' | i18n"></row-data></td>
                <td class="w-50"><row-data [value]="detailCluster.cidr" [label]="'Pod CIDR'"></row-data></td>
              </tr>

              <tr>
                <td class="w-50"><row-data [value]="vpcNetwork" [label]="'app.cluster.vpc-network' | i18n"></row-data>
                </td>
                <td class="w-50"><row-data [value]="detailCluster.serviceCidr" [label]="'Service CIDR'"></row-data></td>
              </tr>

              <tr>
                <td class="w-50"><row-data [value]="detailCluster.subnet" [label]="'Subnet'"></row-data></td>
              </tr>
            </tbody>
          </nz-table>
        </div>
      </div>
    </nz-card>

    <!-- Thông tin volume -->
    <!-- <nz-card class="border-radius-card">
      <h3>Thông tin volume persistent</h3>
      <div nz-row>
        <div nz-col [nzSpan]="24" class="detailtable">
          <nz-table [nzTemplateMode]="true" nzBordered>
            <tbody>
              <tr>
                <td class="w-50" [ngClass]="{'padbot-zero': isEditMode == true}">
                  <div nz-row>
                    <div nz-col [nzSpan]="8" [ngClass]="{'padtop-5': isEditMode == true}">Loại</div>
                    <div nz-col [nzSpan]="16" class="description-info">
                      <ng-container *ngIf="!isEditMode; else editVolumeTypeTpl">
                        {{detailCluster.volumeCloudType == 'hdd' ? 'HDD' : 'SSD'}}
                      </ng-container>
                      <ng-template #editVolumeTypeTpl>
                        <nz-form-item>
                          <nz-form-control>
                            <nz-radio-group formControlName="volumeCloudType">
                              <label nz-radio nzValue="hdd">HDD</label>
                              <label nz-radio nzValue="sdd">SDD</label>
                            </nz-radio-group>
                          </nz-form-control>
                        </nz-form-item>
                      </ng-template>
                    </div>
                  </div>
                </td>

                <td class="w-50" [ngClass]="{'padbot-zero': isEditMode == true}">
                  <div nz-row>
                    <div nz-col [nzSpan]="8" [ngClass]="{'padtop-5': isEditMode == true}">Quota (GB)</div>
                    <div nz-col [nzSpan]="16" class="description-info">
                      <ng-container *ngIf="!isEditMode; else editVolumeSizeTpl">
                        {{detailCluster.volumeCloudSize}}
                      </ng-container>
                      <ng-template #editVolumeSizeTpl>
                        <nz-form-item>
                          <nz-form-control [nzErrorTip]="errorVolumeSizeTpl">
                            <input type="text" nz-input formControlName="volumeCloudSize" (keypress)="isNumber($event)"
                              (ngModelChange)="onChangeVolumeSize($event)" />
                          </nz-form-control>
                          <ng-template #errorVolumeSizeTpl let-control>
                            <ng-container *ngIf="control.hasError('required')">
                              Quota volume không để trống
                            </ng-container>
                            <ng-container *ngIf="control.hasError('max') || control.hasError('min')">
                              Quota trong khoảng từ 20-1000 (GB)
                            </ng-container>
                          </ng-template>
                        </nz-form-item>
                      </ng-template>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </nz-table>
        </div>
      </div>
    </nz-card> -->

    <!-- Thông tin SSH -->
    <nz-card class="border-radius-card">
      <h3>SSH Key</h3>
      <div nz-row>
        <div nz-col [nzSpan]="12" class="detailtable">
          <nz-table [nzTemplateMode]="true" nzBordered>
            <tbody>
              <tr>
                <td class="w-50">
                  <div nz-row>
                    <div nz-col [nzSpan]="8"><span class="content">SSH Key</span></div>
                    <div nz-col [nzSpan]="16">
                      <span class="description-info content">
                        <ng-container *ngIf="detailCluster.clusterName.length <= 30; else truncateSSHKeyTpl">
                          {{'k8s-' + detailCluster.clusterName + '-ssh_keypair'}}
                        </ng-container>
                        <ng-template #truncateSSHKeyTpl>
                          <span nz-popover nzPopoverPlacement="leftTop" [nzPopoverContent]="sshkeyNameTpl" class="content">
                            {{('k8s-' + detailCluster.clusterName + '-ssh_keypair') | truncateLabel}}
                          </span>
                          <ng-template #sshkeyNameTpl>
                            {{'k8s-' + detailCluster.clusterName + '-ssh_keypair'}}
                          </ng-template>
                        </ng-template>
                      </span>
                      <button nz-button nzType="text" (click)="handleDownloadSSHkey()" class="action-icon borderless"
                        [nzTooltipTitle]="'app.cluster.download-ssh-key' | i18n" nzTooltipPlacement="top" nz-tooltip>
                        <span nz-icon>
                          <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                              d="M20.5 10.19H17.61C15.24 10.19 13.31 8.26 13.31 5.89V3C13.31 2.45 12.86 2 12.31 2H8.07C4.99 2 2.5 4 2.5 7.57V16.43C2.5 20 4.99 22 8.07 22H15.93C19.01 22 21.5 20 21.5 16.43V11.19C21.5 10.64 21.05 10.19 20.5 10.19ZM12.28 15.78L10.28 17.78C10.21 17.85 10.12 17.91 10.03 17.94C9.94 17.98 9.85 18 9.75 18C9.65 18 9.56 17.98 9.47 17.94C9.39 17.91 9.31 17.85 9.25 17.79C9.24 17.78 9.23 17.78 9.23 17.77L7.23 15.77C6.94 15.48 6.94 15 7.23 14.71C7.52 14.42 8 14.42 8.29 14.71L9 15.44V11.25C9 10.84 9.34 10.5 9.75 10.5C10.16 10.5 10.5 10.84 10.5 11.25V15.44L11.22 14.72C11.51 14.43 11.99 14.43 12.28 14.72C12.57 15.01 12.57 15.49 12.28 15.78Z"
                              fill="#005999" />
                            <path
                              d="M17.4299 8.81048C18.3799 8.82048 19.6999 8.82048 20.8299 8.82048C21.3999 8.82048 21.6999 8.15048 21.2999 7.75048C19.8599 6.30048 17.2799 3.69048 15.7999 2.21048C15.3899 1.80048 14.6799 2.08048 14.6799 2.65048V6.14048C14.6799 7.60048 15.9199 8.81048 17.4299 8.81048Z"
                              fill="#005999" />
                          </svg>
                        </span>
                      </button>
                      <button nz-button nzType="text" class="action-icon borderless"
                        [nzTooltipTitle]="'app.cluster.copy' | i18n" nzTooltipPlacement="top" nz-tooltip
                        (click)="handleCopySSHKey()">
                        <span nz-icon>
                          <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path
                              d="M16 12.9V17.1C16 20.6 14.6 22 11.1 22H6.9C3.4 22 2 20.6 2 17.1V12.9C2 9.4 3.4 8 6.9 8H11.1C14.6 8 16 9.4 16 12.9Z"
                              stroke="#0066B0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                            <path
                              d="M22 6.9V11.1C22 14.6 20.6 16 17.1 16H16V12.9C16 9.4 14.6 8 11.1 8H8V6.9C8 3.4 9.4 2 12.9 2H17.1C20.6 2 22 3.4 22 6.9Z"
                              stroke="#0066B0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
                          </svg>
                        </span>
                      </button>
                    </div>
                  </div>
                </td>
              </tr>
            </tbody>
          </nz-table>
        </div>
      </div>

    </nz-card>

  </form>

</ng-container>

<ng-template #loadingTpl>
  <nz-card class="border-radius-card">
    <nz-table [nzTemplateMode]="true" [nzLoading]="true">
    </nz-table>
  </nz-card>
</ng-template>

<!-- modal upgrade -->
<nz-modal [(nzVisible)]="showModalUpgradeVersion" [nzTitle]="'app.cluster.upgrade-version' | i18n"
  (nzOnCancel)="handleCancelShowModalUpgrade()">
  <div *nzModalContent>
    <ng-container *ngIf="detailCluster.upgradeVersion?.length > 0; else noAvailableVersionTpl">
      <p class="description-info">{{ 'app.cluster.upgrade-version-description-1' | i18n }}</p>
      <!-- <p class="description-info">{{ 'app.cluster.upgrade-version-description-2' | i18n }}</p> -->
      <div class="mt-3">
        <nz-select [nzPlaceHolder]="'app.cluster.select-version' | i18n" [(ngModel)]="upgradeVersionCluster"
          class="w-100" nzSize="large">
          <ng-container *ngFor="let item of listOfK8sVersion">
            <ng-container *ngIf="item.k8sVersion != currentVersion; else currentVersionTpl">
              <nz-option [nzLabel]="item.k8sVersion" [nzValue]="item.k8sVersion"
                [nzDisabled]="item.k8sVersion | checkUpgradeVersion : detailCluster.upgradeVersion"></nz-option>
            </ng-container>
            <ng-template #currentVersionTpl>
              <nz-option [nzLabel]="item.k8sVersion + ' (' +('app.version.current' | i18n) + ')'" [nzValue]="item.k8sVersion"
                [nzDisabled]="item.k8sVersion | checkUpgradeVersion : detailCluster.upgradeVersion"></nz-option>
            </ng-template>
          </ng-container>
        </nz-select>
      </div>

      <div class="mt-3">
        <nz-alert
          nzType="warning"
          [nzMessage]="msgTpl"
          [nzDescription]="desTpl"
          [nzIcon]="customIconTemplate"
          nzShowIcon
        ></nz-alert>

        <ng-template #msgTpl>
          <span class="description-info content">{{ 'app.version.note-title' | i18n }}</span>:
        </ng-template>
        <ng-template #desTpl>
          <div>{{ 'app.cluster.warning-upgrade-1' | i18n }}</div>
          <div>{{ 'app.cluster.warning-upgrade-2' | i18n }}</div>
          <div>{{ 'app.cluster.warning-upgrade-3' | i18n }} <a href="https://kubernetes.io/releases/" target="_blank">K8S release note</a></div>
        </ng-template>
        <ng-template #customIconTemplate>
          <span nz-icon>
            <svg width="24" height="25" viewBox="0 0 24 25" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M11.5 6.5L18.8612 19.25H4.13878L11.5 6.5Z" fill="white"/>
              <path d="M21.76 16.42L15.36 4.9C14.5 3.35 13.31 2.5 12 2.5C10.69 2.5 9.49998 3.35 8.63998 4.9L2.23998 16.42C1.42998 17.89 1.33998 19.3 1.98998 20.41C2.63998 21.52 3.91998 22.13 5.59998 22.13H18.4C20.08 22.13 21.36 21.52 22.01 20.41C22.66 19.3 22.57 17.88 21.76 16.42ZM11.25 9.5C11.25 9.09 11.59 8.75 12 8.75C12.41 8.75 12.75 9.09 12.75 9.5V14.5C12.75 14.91 12.41 15.25 12 15.25C11.59 15.25 11.25 14.91 11.25 14.5V9.5ZM12.71 18.21C12.66 18.25 12.61 18.29 12.56 18.33C12.5 18.37 12.44 18.4 12.38 18.42C12.32 18.45 12.26 18.47 12.19 18.48C12.13 18.49 12.06 18.5 12 18.5C11.94 18.5 11.87 18.49 11.8 18.48C11.74 18.47 11.68 18.45 11.62 18.42C11.56 18.4 11.5 18.37 11.44 18.33C11.39 18.29 11.34 18.25 11.29 18.21C11.11 18.02 11 17.76 11 17.5C11 17.24 11.11 16.98 11.29 16.79C11.34 16.75 11.39 16.71 11.44 16.67C11.5 16.63 11.56 16.6 11.62 16.58C11.68 16.55 11.74 16.53 11.8 16.52C11.93 16.49 12.07 16.49 12.19 16.52C12.26 16.53 12.32 16.55 12.38 16.58C12.44 16.6 12.5 16.63 12.56 16.67C12.61 16.71 12.66 16.75 12.71 16.79C12.89 16.98 13 17.24 13 17.5C13 17.76 12.89 18.02 12.71 18.21Z" fill="#EA3829"/>
            </svg>
          </span>
        </ng-template>
      </div>

      <div class="mt-3">
        <label nz-checkbox [(ngModel)]="isAgreeArrangement">{{ 'app.payment.agree.to' | i18n }} <a style="text-decoration: none;">{{ 'app.version.arrangement' | i18n }}</a></label>
      </div>
    </ng-container>
    <ng-template #noAvailableVersionTpl>
      <span style="font-size: 16px;" class="content">{{ 'app.cluster.none-upgrade-description-1' | i18n }}
        <b>{{detailCluster.currentVersion}}</b> {{ 'app.cluster.none-upgrade-description-2' | i18n }}</span>
    </ng-template>
  </div>

  <div *nzModalFooter>
    <ng-container *ngIf="detailCluster.upgradeVersion?.length > 0; else noAvailableVersionFooterTpl">
      <button nz-button nzType="default" (click)="handleCancelShowModalUpgrade()">
        <span nz-icon nzType="close" nzTheme="outline"></span>
        {{ 'app.cluster.cancel' | i18n }}
      </button>
      <button nz-button nzType="primary" (click)="handleUpgadeVersionCluster()" [nzLoading]="isUpgradingVersion"
        [disabled]="upgradeVersionCluster == null || upgradeVersionCluster == undefined || !isAgreeArrangement">
        <span nz-icon nzType="check" nzTheme="outline"></span>
        {{ 'app.button.confirm' | i18n }}
      </button>
    </ng-container>
    <ng-template #noAvailableVersionFooterTpl>
      <button nz-button nzType="primary" (click)="handleCancelShowModalUpgrade()">
        <span nz-icon nzType="check" nzTheme="outline"></span>
        {{ 'app.button.confirm' | i18n }}
      </button>
    </ng-template>
  </div>
</nz-modal>

<!-- modal upgrade cluster -->
<nz-modal [(nzVisible)]="showModalUpgradeWorker" nzTitle="Nâng cấp nhóm worker"
  (nzOnCancel)="handleCancelModalUpgradeWorker()">
  <div *nzModalContent>
    <nz-alert nzType="warning" [nzDescription]="warningDes" nzShowIcon></nz-alert>
    <ng-template #warningDes>
      <div class="warning-description">{{ 'app.cluster.upgrade-cluster-description' | i18n }}</div>
      <div class="warning-description mt-1">{{ 'app.cluster.confirm-upgrade' | i18n }}</div>
    </ng-template>
  </div>
  <div *nzModalFooter>
    <button nz-button nzType="default" (click)="handleCancelModalUpgradeWorker()" [disabled]="isUpgradingWorker">
      <span nz-icon nzType="close" nzTheme="outline"></span>
      {{ 'app.cluster.cancel' | i18n }}
    </button>
    <button nz-button nzType="primary" (click)="onSubmitUpgradeWorker()" [nzLoading]="isUpgradingWorker"
      [disabled]="upgradeForm.invalid">
      <span nz-icon nzType="check" nzTheme="outline"></span>
      {{ 'app.button.confirm' | i18n }}
    </button>
  </div>
</nz-modal>

<!-- modal view kubeconfig -->
<nz-modal [(nzVisible)]="showModalKubeConfig" [nzTitle]="viewKubeConfigTitle" [nzContent]="viewKubeConfigBodyTpl"
  [nzFooter]="viewKubeConfigFooterTpl" (nzOnCancel)="handleCancelModalViewKubeConfig()">
  <ng-template #viewKubeConfigTitle>
    <div>
      <label>Cluster {{detailCluster.clusterName}} Kubenetes Config</label>
      <div class="modal-btn">
        <button nz-button nzType="text" class="borderless" (click)="handleCopyKubeConfig()" style="height: fit-content;"
          [nzTooltipTitle]="'app.cluster.copy' | i18n" nzTooltipPlacement="top" nz-tooltip>
          <span nz-icon>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M16 12.9V17.1C16 20.6 14.6 22 11.1 22H6.9C3.4 22 2 20.6 2 17.1V12.9C2 9.4 3.4 8 6.9 8H11.1C14.6 8 16 9.4 16 12.9Z"
                stroke="#0066B0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
              <path
                d="M22 6.9V11.1C22 14.6 20.6 16 17.1 16H16V12.9C16 9.4 14.6 8 11.1 8H8V6.9C8 3.4 9.4 2 12.9 2H17.1C20.6 2 22 3.4 22 6.9Z"
                stroke="#0066B0" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
            </svg>
          </span>
        </button>
        <button nz-button nzType="text" class="borderless" (click)="handleDownloadKubeConfig()"
          style="height: fit-content;" [nzTooltipTitle]="'app.cluster.download-config' | i18n" nzTooltipPlacement="top"
          nz-tooltip>
          <span nz-icon>
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path
                d="M20.5 10.19H17.61C15.24 10.19 13.31 8.26 13.31 5.89V3C13.31 2.45 12.86 2 12.31 2H8.07C4.99 2 2.5 4 2.5 7.57V16.43C2.5 20 4.99 22 8.07 22H15.93C19.01 22 21.5 20 21.5 16.43V11.19C21.5 10.64 21.05 10.19 20.5 10.19ZM12.28 15.78L10.28 17.78C10.21 17.85 10.12 17.91 10.03 17.94C9.94 17.98 9.85 18 9.75 18C9.65 18 9.56 17.98 9.47 17.94C9.39 17.91 9.31 17.85 9.25 17.79C9.24 17.78 9.23 17.78 9.23 17.77L7.23 15.77C6.94 15.48 6.94 15 7.23 14.71C7.52 14.42 8 14.42 8.29 14.71L9 15.44V11.25C9 10.84 9.34 10.5 9.75 10.5C10.16 10.5 10.5 10.84 10.5 11.25V15.44L11.22 14.72C11.51 14.43 11.99 14.43 12.28 14.72C12.57 15.01 12.57 15.49 12.28 15.78Z"
                fill="#005999" />
              <path
                d="M17.4299 8.81048C18.3799 8.82048 19.6999 8.82048 20.8299 8.82048C21.3999 8.82048 21.6999 8.15048 21.2999 7.75048C19.8599 6.30048 17.2799 3.69048 15.7999 2.21048C15.3899 1.80048 14.6799 2.08048 14.6799 2.65048V6.14048C14.6799 7.60048 15.9199 8.81048 17.4299 8.81048Z"
                fill="#005999" />
            </svg>
          </span>
        </button>
      </div>
    </div>
  </ng-template>

  <ng-template #viewKubeConfigBodyTpl>
    <div class="modal-view">
      <pre>{{yamlString}}</pre>
    </div>
  </ng-template>

  <ng-template #viewKubeConfigFooterTpl>
    <button nz-button nzType="primary" (click)="handleCancelModalViewKubeConfig()">
      <span nz-icon nzType="check" nzTheme="outline"></span>
      {{ 'app.close' | i18n }}
    </button>
  </ng-template>
</nz-modal>
